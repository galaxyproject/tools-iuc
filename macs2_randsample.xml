<tool id="macs2_randsamoke" name="MACS2" version="2.0.10.0">
    <description>Randomly sample number or percentage of total reads</description>
    <expand macro="requirements" />
    <expand macro="version_command" />
    <macros>
        <import>macs2_macros.xml</import>
    </macros>
    <command>
        macs2 randsample
            -t $infile
            -o $outfile

        --format '$ifile.extension.upper()'

        --tsize $tsize
        #if str($method_options.method_options_selector ) == 'percentage':
            $method_options.percentage
        #else:
            $method_options.number
        #end if
    </command>
    <expand macro="stdio" />
    <inputs>

        <!--may need to add a few more formats at later time-->
        <param name="infile" type="data" format="sam,bam,bed" label="Sequencing alignment file" />
        <expand macro="tag_size" />

        <conditional name="method_options">
            <param name="method_options_selector" type="select" label="Select action to be performed">
                <option value="percentage">Percentage</option>
                <option value="number">Number</option>
            </param>
            <when value="percentage">
                    <param name="percentage" type="float" value="80.0" label="Pvalue cutoff for binomial distribution test" help="(--percentage)" />
            </when>
            <when value="number">
                    <param name="number" type="integer" value="800000" label="Number of tags you want to keep" help="Note that the number of tags in output is approximate as the number specified here (--number)" />
            </when>
        </conditional>

    </inputs>
    <outputs>
        <data name="outfile" format="bed" label="${tool.name} on ${on_string}" />
  </outputs>
  <tests>
    <!--none yet for macs2-->
  </tests>
  <help>
**What it does**

randsample tool from macs2

@citation@
  </help>
</tool>
