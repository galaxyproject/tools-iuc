<macros>
    <xml name="release_spec" token_database_name="pangolin_database_name" token_software_name="pangolin">
        <conditional name="release">
            <param name="which" type="select" label="Select @DATABASE_NAME@ release">
                <option value="latest" selected="true">Latest</option>
                <option value="versions">Choose from release list</option>
            </param>
            <when value="latest">
            </when>
            <when value="versions">
                <param name="compatibility_file" 
                       type="data" format="csv"
                       label="Version compatibility file"
                       help="File describing compatibility between @SOFTWARE_NAME@ releases and databases" />
                <param name="versions" type="select" multiple="true" label="Select @DATABASE_NAME@ release">
                    <options from_dataset="compatibility_file" separator="," >
                     <column name="name" index="1"/>
                     <column name="value" index="1"/>
                     <column name="min_@SOFTWARE_NAME@_version" index="3"/>
                     <filter type="static_value" column="0" value="@DATABASE_NAME@"/>
                    </options>
                  </param>                
            </when>
        </conditional>
    </xml>
</macros>