<macros>
    <xml name="release_spec" token_database_name="pangolin_database_name">
        <conditional name="release">
            <param name="which" type="select" label="Select @DATABASE_NAME@ release">
                <option value="latest" selected="true">Latest</option>
                <option value="version_range">Version range</option>
                <option value="date_range">Date range</option>
            </param>
            <when value="latest">
            </when>
            <when value="version_range">
                <param name="start_version" type="text" label="Start version">
                    <validator type="regex" message="Versions are in the format X.Y or X.Y.Z with an optional v at the start">v?\d+(\.\d+){0,2}$</validator>
                </param>
                <param name="end_version" type="text" label="End version">
                    <validator type="regex" message="Versions are in the format X.Y or X.Y.Z with an optional v at the start">v?\d+(\.\d+){0,2}$</validator>
                </param>
            </when>
            <when value="date_range">
                <param name="start_date" type="text" label="Start date (YYYY-MM-DD)" help="Don't download models older than this date" optional="true">
                    <validator type="regex" message="Dates are in YYYY-MM-DD format">\d{4}-\d{2}-\d{2}$</validator>
                </param>
                <param name="end_date" type="text" label="End date (YYYY-MM-DD)" help="Don't download models newer than this date" optional="true">
                    <validator type="regex" message="Dates are in YYYY-MM-DD format">\d{4}-\d{2}-\d{2}$</validator>
                </param>
            </when>
        </conditional>
    </xml>
</macros>