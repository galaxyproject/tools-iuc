<data_managers>
    <data_manager tool_file="data_manager/bracken_build_database.xml" id="bracken_build_database">
        <data_table name="bracken_databases">
            <output>
                <column name="value"/>
                <column name="name"/>
                <column name="path" output_ref="out_file">
                    <move type="directory" relativize_symlinks="True">
                        <!-- we move the top level folder, since the path points to the bracken DB file -->
		                <source>
                        #import os
                        #set base_dir = os.path.dirname($path)
                        ${base_dir}
                        </source>
                        <target base="${GALAXY_DATA_MANAGER_DATA_PATH}">bracken_databases/${value}</target>
                    </move>
                    <!-- we store the path to the bracken DB file, since this is what bracken uses -->
                <value_translation>
                    #import os
                    ${GALAXY_DATA_MANAGER_DATA_PATH}/bracken_databases/${value}/${os.path.basename($path)}
                </value_translation>                    
                <value_translation type="function">abspath</value_translation>
                </column>
            </output>

        </data_table>
    </data_manager>
</data_managers>
