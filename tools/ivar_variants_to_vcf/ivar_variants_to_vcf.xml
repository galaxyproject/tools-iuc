<tool id="ivar_variants_to_vcf" name="ivar variants to VCF" version="0.1.0" python_template_version="3.5" profile="21.01">
    <description>Convert ivar variant tabular output to VCF</description>
    <requirements>
        <requirement type="package" version="3">python</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python ${__tool_directory__}/ivar_variants_to_vcf.py 
        $pass_only 
        --allele_freq_thresh $allele_freq_thresh '$input1' '$output1'
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="tabular" label="ivar variants output file" />
        <param argument="--pass_only" type="boolean" truevalue="--pass_only" falsevalue="" label="Only output variants that PASS all filters" />
        <param argument="--allele_freq_thresh" type="float" value="0.0" label="Only output variants with allele frequency greater than this number" />
    </inputs>
    <outputs>
        <data name="output1" format="vcf" label="ivar variants to vcf on ${on_string}" />
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input1" ftype="tabular" value="input1.tabular" />
            <output name="output1" value="output1.vcf" lines_diff="2" />
        </test>
    </tests>
    <help><![CDATA[
        
        .. class:: infomark
        
        This tool is based on `ivar_variants_to_vcf.py <https://github.com/nf-core/viralrecon/blob/dev/bin/ivar_variants_to_vcf.py>`
        from the `viralrecon <https://github.com/nf-core/viralrecon>` package. It takes the output for `ivar variants <https://github.com/andersen-lab/ivar>`
        and converts it to VCF format so that it can be manipulated by tools that take VCF as input (e.g. SnpEff).
    ]]></help>
    <citations>
        <citation type="bibtex">
            @misc{githubivar_variants_to_vcf,
                author = {Fernandez, Sarai Varona and Patel, Harshil},
                year = {2021},
                title = {ivar_variants_to_vcf},
                publisher = {GitHub},
                journal = {GitHub repository},
                url = {https://github.com/nf-core/viralrecon/blob/dev/bin/ivar_variants_to_vcf.py},
        </citation>
    </citations>
</tool>