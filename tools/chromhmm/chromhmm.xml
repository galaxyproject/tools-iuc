<?xml version="1.0"?>
<tool id="chromhmm" name="ChromHMM" version="@TOOL_VERSION@+@WRAPPER_VERSION@">
    <description>...</description>

    <macros>
        <import>macros.xml</import>
    </macros>

    <expand macro="requirements"/>

    <stdio></stdio>  

    <command detect_errors="exit_code"><![CDATA[

    ]]></command>
    <inputs>
        <conditional name="type" title="Choose command">
            <param name="select" type="select" label="" help="">
                <option value="lm">LearnModel</option>
                <option value="bbed">BinarizeBed</option>
                <option value="bbam">BinarizeBam</option>
                <option value="bs">BinarizeSignal</option>
                <option value="ms">MakeSegmentation</option>
                <option value="mbf">MakeBrowserFiles</option>
                <option value="oe">OverlapEnrichment</option>
                <option value="ne">NeighborhoodEnrichment</option>
                <option value="cm">CompareModels</option>
                <option value="r">Reorder</option>
                <option value="es">EvalSubset</option>
                <option value="cgt">ConvertGeneTable </option>
                <option value="mb">MergeBinary </option>
                <option value="sp">StatePruning</option>
            </param>
            <when value="">
                
                <param argument="-b" type="integer" value="200" min="0" label="Binsize" help="The number of base pairs in a bindetermining the resolution of the model learning and segmentation."/>
                <param argument="--color" type="text" value="0,0,255" label="Color" help="This specifies the color ofthe heatmap.r,g,b are integer values between 0 and 255 separated by commas."/>
                <param argument="-d" type="float" value="0.001" label="Converge delta" help="The threshold on the change on the estimated log likelihood that if it falls below this value, then parameter training will terminate. If this value is less than 0 then it is not used as part of the stopping criteria."/>
                <param argument="-f" type="data" format="tabular" multiple="true" label="Input file list" help=""/>
                <param argument="-gzip" type="boolean" truevalue="-gzip" falsevalue="" checked="false" label="Segmentation files and browser files are outputted in a gzip format" help=""/>
<param argument="-holdcolumnorder" type="boolean" truevalue="-holdcolumnorder" falsevalue="" checked="false" label="Suppress the reordering of the mark columns in the emission parameter table display." help=""/>
<param argument="-holdroworder" type="boolean" truevalue="-holdroworder" falsevalue="" checked="" label="Suppress reordering the states." help=""/>
<conditional name="init" title="">
    <param argument="select" type="select" multiple="false" label="Set parameter initialization method." help="informationis the default method described in (Ernst and Kellis, Nature Methods 2012).Randomâ€“randomly initializes the parameters from a uniform distribution. loadloads the parameters specified in modelinitialfile and smooths them based on the value of the loadsmoothemission and loadsmoothtransition parameters.">
        <option value="information">information</option>
        <option value="random">random</option>
        <option value="load">load</option>
    </param>
    <when value="information"/>
    <when value="random">
        <param argument="-h" type="float" value="0.02" min="" max="" label="A smoothingconstant away from 0 for all parameters in the informationbased initialization." help=""/>
    </when>
    <when value="load">
<param argument="-e" type="float" value="0.02" min="0.0" max="1.0" label="Load smooth emission" help="This parameter controls the smoothing away from 0 when loading a model. The emission value used in the model initialization is a weighted average of the value in the file and a uniform probability over the two possible emissions. The value in the file gets weight (1-loadsmoothemission) while uniform gets weight loadsmoothemission."/>
<param argument="-h" type="float" value="0.02" min="" max="" label="A smoothingconstant away from 0 for all parameters in the informationbased initialization." help=""/>
    </when>
</conditional>
<param argument="-l" type="data" format="tabular" multiple="false" label="Specify the length of the chromosomes." help="It is a two column tab delimited file with the first column specifying the chromosome name and the second column the length. If this file is provided then no end coordinate will exceed what is specified in this file. By default BinarizeBed excludes the last partial bin along the chromosome, but if that is included in the binarized data input files then this file should be included to give a valid end coordinate for the last interval. Also by default if a file exists in the CHROMSIZES directory or the directory  for the specifiedassembly that will be used(note that this is only applicable when using this option through LearnModel and not MakeSegmentation since no assembly is specified)."/>
<param argument="-m" type="data" format="data" multiple="false" label="Specify the model file containing the initial parameters which canthen be used with the loadoption." help=""/>
<param argument="-nobed" type="boolean" truevalue="-nobed" falsevalue="" checked="false" label="Suppress the printing of segmentation informationin the four column format. " help=""/>












                [-n numseq]

                [-nobed]
                [-nobrowser]
                [-noenrich]
                [-noimage]
                [-p maxprocessors]
                [-pseudo]
                [-printposterior]
                [-printstatebyline]
                [-r maxiterations]
                [-s seed]
                [-scalebeta]
                [-splitrows]
                [-stateordering emission|transition]
                [-t loadsmoothtransition]
                [-u coorddir]
                [-vanchorfiledir]
                [-x maxseconds]
                [-z zerotransitionpower] 
                inputdir 
                outputdir 
                numstatesassembly




***

excluded
[-i outfileID]
-lowmem
-many

<param argument="" type="boolean" truevalue="" falsevalue="" checked="" label="" help=""/>
<param argument="" type="integer" value="" min="" max="" label="" help=""/>
<param argument="" type="float" value="" min="" max="" label="" help=""/>
<param argument="" type="text" value="" label="" help=""/>
<param argument="" type="data" multiple="true" label="" help=""/>
<param argument="" type="select" multiple="false" label="" help="">
    <option value=""></option>
</param>



            </when>

        </conditional>
    </inputs>

    <outputs>
    </outputs> 

    <tests> 
    </tests>
    <help><![CDATA[

.. class:: infomark

**What it does**

...

**Input**

...

**Output**

...

.. class:: infomark

**References**

...
    ]]></help>
    <citations>
        <citation></citation>
    </citations>
</tool>
