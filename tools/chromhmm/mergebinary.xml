<?xml version="1.0"?>
<tool id="chromhmm_mergebinary" name="chromHMM MergeBinary" version="@TOOL_VERSION@+@WRAPPER_VERSION@">
    <description>for binarized data</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <stdio></stdio>
    <command detect_errors="exit_code"><![CDATA[
        ## initialization
        mkdir -p 'input/binary' &&

        ## binary
        #for $i, $file in enumerate($in_binary)
            ln -s '${file}' 'input/binary/${i}_binary.txt' &&
        #end for

        ## run
        @RUN@
            MergeBinary
            ## optional parameters
            ## required parameters (specific order)
            'input' ## inputdir
            'output/binary' ## outputdir
        ]]></command>
    <inputs>
        <expand macro="in_binary" argument="(inputdir)"/>
    </inputs>
    <outputs>
        <expand macro="out_binary"/>
    </outputs>
    <tests>
        <!-- #1; required parameters -->
        <test expect_num_outputs="1">
            <param name="in_binary" value="GM12878_chr11_binary.txt.gz"/>
            <output name="out_binary">
                <discovered_dataset designation="GM12878_chr11" ftype="">
                    <assert_contents>
                        <has_line line="GM12878&#009;chr11"/>
                        <has_n_lines n="672263"/>
                    </assert_contents>
                </discovered_dataset>
            </output>
        </test>
    </tests>
    <help><![CDATA[
.. class:: infomark

**What it does**

MergeBinary @HELP_WID@

@HELP_CHROMHMM@

The command can do a columnwise merge of binarized data for different mark subsets split across files in multiple subdirectories. Files that are for the same cell type and chromosome are merged.

**Input** and **Output**

@HELP_FILETYPE_BINARY@

.. class:: infomark

**References**

@HELP_REFERENCES@
    ]]></help>
    <citations>
        <expand macro="citations"/>
    </citations>
</tool>