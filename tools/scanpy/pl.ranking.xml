<tool id="pl.ranking" name="pl.ranking" version="1.3.1+galaxy1">
    <description>Plot rankings</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
          python $script_file
      ]]></command>
    <configfiles>
        <configfile name="script_file"><![CDATA[
@CMD_imports@
@CMD_read_inputs@

sc.settings.figdir = '.'

sc.pl.ranking(
    adata=adata',
    attr='$attr',
    keys='$keys',
    save='.$format',
    show=False)
]]></configfile>
    </configfiles>
    <inputs>
        <expand macro="inputs_anndata"/>
        <param argument="attr" type="select" label="The attribute of input that contains the score" help="">
            <option value="var">var</option>
            <option value="obs">obs</option>
            <option value="uns">uns</option>
            <option value="varm">varm</option>
            <option value="obsm">obsm</option>
        </param>
        <param argument="keys" type="text" value="" label="The scores to look up an array from the attribute of adata" help=""/>
        <expand macro="param_plot_format"/>
    <outputs>
        <expand macro="plot_output"/>
    </outputs>
    <tests>
        <test>
            <conditional name="input">
                <param name="format" value="h5ad" />
                <param name="adata" value="krumsiek11.h5ad" />
            </conditional>
            <param name="attr" value=""/>
            <param name="keys" value=""/>
            <expand macro="tests_set_figure_params"/>
            <output name="out_png" file="pl.clustermap.krumsiek11.png" ftype="png" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[
        Plot rankings.

See, for example, how this is used in pl.pca_ranking.

    ]]></help>
    <expand macro="citations"/>
</tool>
