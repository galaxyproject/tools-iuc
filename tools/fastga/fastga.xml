<tool id="fastga" name="FastGA" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" python_template_version="3.5" profile="21.05">
    <description>: align long sequences</description>
    <macros>
        <import>fastga_macros.xml</import>
    </macros>
    <requirements>
    	<requirement type="package" version="@TOOL_VERSION@">fastga</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        ln -s "$input1" "input1.${input1.ext}" &&
        ln -s "$input2" "input2.${input2.ext}" &&
        FastGA 
        #if str( $output_format ) == "paf":
            '-paf'
    	#elif str( $output_format ) == "psl":
    	    '-psl'
    	#end if
        "input1.${input1.ext}" "input2.${input2.ext}" > output
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="fasta,fasta.gz"/>
        <param type="data" name="input2" format="fasta,fasta.gz"/>
        <param name="output_format" type="select" display="radio" label="Specify the output format">
            <option value="paf" selected="true">paf (-paf)</option>
            <option value="psl">psl (-psl)</option>
        </param>
    </inputs>
    <outputs>
        <data name="output1" format="paf" from_work_dir="output">
            <change_format>
                <when input="output_format" value="paf" format="paf"/>
                <when input="output_format" value="psl" format="psl"/>
            </change_format>
        </data>
    </outputs>
    <tests>
        <test>
            <param name="input1" value="chrM_hg38.fa.gz"/>
            <param name="input2" value="chrM_mm39.fa.gz"/>
            <param name="output_format" value="paf"/>
            <output name="output1" file="chrM_HGvMM.paf"/>
        </test>
        <test>
            <param name="input1" value="chrM_hg38.fa.gz"/>
            <param name="input2" value="chrM_mm39.fa.gz"/>
            <param name="output_format" value="psl"/>
            <output name="output1" file="chrM_HGvMM.psl"/>
        </test>
    </tests>
    <help><![CDATA[
        
Usage: FastGA [-vkMS] [-L:<log:path>] [-T<int(8)>] [-P<dir($TMPDIR)>] [<format(-paf)>]
              [-f<int(10)>] [-c<int(85)> [-s<int(1000)>] [-l<int(100)>] [-i<float(.7)]
              <source1:path>[<precursor>] [<source2:path>[<precursor>]]

         <format> = -paf[mxsS]* | -psl | -1:<align:path>[.1aln]

         <precursor> = .gix | .1gdb | <fa_extn> | <1_extn>

             <fa_extn> = (.fa|.fna|.fasta)[.gz]
             <1_extn>  = any valid 1-code sequence file type

      -v: Verbose mode, output statistics as proceed.
      -k: Keep any generated .1gdb's and .gix's.
      -M: Use soft mask information if available.
      -S: Use symmetric seeding (not recommended).
      -L: Output log to specified file.
      -T: Number of threads to use.
      -P: Directory to use for temporary files.

      -paf: Stream PAF output
        -pafx: Stream PAF output with CIGAR string with X's
        -pafm: Stream PAF output with CIGAR string with ='s
        -pafs: Stream PAF output with CS string in short form
        -pafS: Stream PAF output with CS string in long form
      -psl: Stream PSL output
      -1: Generate 1-code output to specified file

      -f: adaptive seed count cutoff
      -c: minimum seed chain coverage in both genomes
      -s: threshold for starting a new seed chain
      -l: minimum alignment length
      -i: minimum alignment identity
      -S: seed adaptamers from both genomes


    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{githubFASTGA,
  author = {Gene Myers and Chenxi Zhou},
  year = {2025},
  title = {FASTGA},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/thegenemyers/FASTGA},
}</citation>
    </citations>
</tool>
