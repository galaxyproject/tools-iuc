<?xml version="1.0" encoding="UTF-8"?>
<macros>
    <token name="@TOOL_VERSION@">1.0</token>
    <token name="@WRAPPER_VERSION@">1</token>

    <xml name="help">
        <help><![CDATA[
AMAS (Alignment Manipulation And Summary) was written for modern phylogenomics workflows, where hundreds of taxa and thousands of loci are routinely analysed and summarised. It runs as a lean Python 3 program that depends only on the standard library yet still utilises multiprocessing to chew through very large amino-acid or nucleotide alignments. Drawing on Borowiec 2016 (PeerJ 4:e1660), AMAS combines format conversions, sequence manipulation, partition-aware slicing, replicate generation, and rich summary statistics (taxon counts, alignment length, matrix cells, missing data, AT/GC content, variable and parsimony-informative sites, plus alphabet frequencies). The wrapper surfaces the following sub-commands:

* **concat** — concatenate multiple alignments, emitting `concatenated.out` plus `partitions.txt`. Choose *Format of the concatenated alignment* to control the container (AMAS 1.0 does not expose codon partition flags at the CLI level, so they are not shown here).
* **summary** — write `summary.txt` reporting the key counts listed above; optionally enable *per-taxon summaries* for `<input>-seq-summary.txt` files.
* **convert** — re-encode each alignment as fasta/phylip/nexus (sequential or interleaved) using AMAS’ native `<input>-out.<ext>` naming.
* **replicate** — generate phylogenetic jack-knife replicates by sampling loci; users set the number of replicates and loci per replicate.
* **split** — divide a concatenated alignment using a partitions file (format `unspecified`, `nexus`, or `raxml`) and optionally drop taxa that are entirely missing within a partition.
* **remove** — drop one or more taxa by name, prefixing resulting files with `reduced_` unless a custom prefix is supplied.
* **translate** — translate DNA alignments to amino acids with the chosen NCBI genetic code (1, 2, 3, 4, 5, 6, 9, 10, 11, 12, 13, 14, 16, 21, 22, 23, 24, 25, 26) and reading frame.
* **trim** — prune columns with occupancy below the nominated threshold and optionally retain only parsimony-informative sites (`AMAS trim` behaviour). Output files are named `trimmed_<input>-out.<ext>`.

Common arguments:

1. `--in-files` (multi-select parameter in Galaxy).
2. `--in-format` — `fasta`, `phylip`, `nexus`, `phylip-int`, or `nexus-int`.
3. `--data-type` — `dna` or `aa`.
4. `--check-align` verifies that sequences are aligned (disabled by default for performance).
5. `--cores` controls the multiprocessing pool used when summarising alignments (set to 1 for deterministic Galaxy tests).

Regression expectations from the upstream `amas/tests/tests.py` suite (e.g., `summary.txt`, `fasta1.fas-seq-summary.txt`) are bundled under `test-data/outputs/` so this wrapper stays in lock-step with the reference implementation.

AMAS source code and manual: https://github.com/marekborowiec/AMAS
        ]]></help>
    </xml>

    <xml name="citations">
        <citations>
            <citation type="doi">10.7717/peerj.1660</citation>
        </citations>
    </xml>
</macros>