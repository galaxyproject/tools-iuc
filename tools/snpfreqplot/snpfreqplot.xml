<tool id="snpfreqplot" name="SNP Frequency Plot" version="@VERSION@+@GALAXY_VERSION@" profile="20.09">
    <description>Plots a heatmap of allele frequencies grouped by variant type</description>
    <macros>
        <token name="@VERSION@">1.0</token>
        <token name="@GALAXY_VERSION@">1</token>
    </macros>
    <requirements>
        <requirement type="package" version="1.0.12">r-pheatmap</requirement>
        <requirement type="package" version="1.1_2">r-rcolorbrewer</requirement>
        <requirement type="package" version="1.3.0">r-tidyverse</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[

]]>
    </command>
    <configfiles>
        <configfile name="options"><![CDATA[

        ]]>
        </configfile>
    </configfiles>
    <inputs>
        <repeat name="sinputs" min="2" value="2" title="Sample Inputs">
            <param name="sid" type="text" label="Sample ID" help="Used as axes labels" >
                <!-- <validator>these might be strictly numeric, will check later</validator> -->
            </param>
            <param name="sdata" type="data" format="tabular" label="Sample Data" />
        </repeat>
        <conditional name="date">
            <param name="has" type="select" text="Filenames with Date" help="Sample inputs contain date information?" >
                <option value="yes">Yes</option>
                <option value="no" selected="true">No</option>
            </param>
            <when value="yes">
                <param name="regex" type="text" label="Date Regex" help="Regex used to extract dates from sample data" >
                    <validator type="regex" message=" ">\d{2}[[:punct:]]\d{2}[[:punct:]]\d{4}</validator>
                </param>
            </when>
            <when value="no" />
        </conditional>
        <param name="varfreq" type="float" min="0" max="1"
               value="0.1" label="Variant Frequency" />
        <conditional name="clustering">
            <param name="do" type="select" text="Perform Clustering?" >
                <option value="yes">Yes</option>
                <option value="no" selected="true">No</option>
            </param>
            <when value="yes" >
                <param name="nclust" type="integer"
                       min="1" value="5" label="Number of Cluster" />
                <param name="method" type="select" label="Clustering Method" >
                    <option value="ward.D" />
                    <option value="ward.D2" selected="true" />
                    <option value="single" />
                    <option value="complete" />
                    <option value="average" >average (UPGMA)</option>
                    <option value="mcquitty" >mcquitty (WPGMA)</option>
                    <option value="median" >median (WPGMC)</option>
                    <option value="centroid" >centroid (UPGMC)</option>
                </param>
            </when>
            <when value="no" />
        </conditional>
        <section name="advanced" title="Image Properties" >
            <param name="multiplier_width" type="float" value="0.5"
                   min="0.1" max="1" label="PDF Weight Multiplier" />
            <param name="multiplier_height" type="float" value="0.6"
                   min="0.1" max="1" label="PDF Height Multiplier" />
            <param name="color" type="select" label="Color Gene Annotation" >
                <option value="Set2" />
                <option value="Set3" selected="true" />
                <option value="Paired" />
            </param>
        </section>
    </inputs>
    <outputs>
        <data name="outpdf" type="pdf" label="SNP Frequency Plot on ${on_string}" />
    </outputs>
    <tests>
        <test expect_num_outputs="1">
        </test>
    </tests>
    <help><![CDATA[

    ]]></help>
    <citations>
        <!-- <citation type="doi"></citation> -->
    </citations>
</tool>
