<tool id="circexplorer2_index" name="CIRCexplorer2 indexes" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="21.05">
    <description>generate indexes</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="1.3.1">bowtie</requirement>
        <requirement type="package" version="2.4.5">bowtie2</requirement>
    </requirements>    <expand macro='xrefs'/>
    <command detect_errors="exit_code"><![CDATA[
        mkdir bowtie1_folder bowtie2_folder &&

        bowtie-build $genome bowtie1_index &&
        bowtie2-build $genome bowtie2_index &&

        mv bowtie1_index* './bowtie1_folder' &&
        mv bowtie2_index* './bowtie2_folder' &&
        
        tar -zcvf bowtie1.tgz './bowtie1_folder' &&
        tar -zcvf bowtie2.tgz './bowtie2_folder'
    ]]></command>
    <inputs>
        <param argument="--genome" type="data" format="fasta" label="Reference genome" help="In FASTA format"/>
    </inputs>
    <outputs>
        <data name="bowtie1" format="tgz" from_work_dir="bowtie1.tgz" label="${tool.name} on ${on_string}: bowtie1 index"/>
        <data name="bowtie2" format="tgz" from_work_dir="bowtie2.tgz" label="${tool.name} on ${on_string}: bowtie2 index"/>
    </outputs>
    <tests>
        <test>
            <param name="input1" value="hg19_kg.gtf"/>
            <output name="output1" file="Chimeric.out.junction"/>
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

**Purpose**

CIRCexplorer2 is a comprehensive and integrative circular RNA analysis toolset. It is the successor 
of CIRCexplorer with plenty of new features to facilitate circular RNA identification and characterization.

-------------------

 .. class:: infomark

**Features**

    * Precisely annotate circular RNAs (Annotate)
    * Support multiple circular RNA aligners (TopHat2/TopHat-Fusion, STAR, MapSplice, BWA and segemehl) (Align and Parse)
    * De novo assemble novel circular RNA transcripts (Assemble)
    * Characterize various of alternative (back-)splicing events of circular RNAs (Denovo)
    * Fast identify circuar RNAs with STAR or BWA (Parse)
    * Support both single-read and paired-end sequencing.

-------------------

.. class:: infomark

**Modules** 

CIRCexplorer2 contains 5 modules. Each module functions as an independent component owning its distinctive duty. 
Meanwhile, they inteact with each other, and different circular RNA analysis pipelines are derived from different 
combinations of several modules. Understanding the detailed mechanism of each module could facilitate your circular 
RNA research.

CIRCexplorer2 documentation is available from `here <http://circexplorer2.readthedocs.org/>`_, including installation instructions and tutorial.

    ]]></help>
    <expand macro="citations" />
</tool>