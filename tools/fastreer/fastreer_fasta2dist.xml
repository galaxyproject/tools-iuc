<tool id="fastreer_fasta2dist" name="FASTA2DIST" version="@VERSION@" profile="@PROFILE@">
    <description>Compute D2S distance matrix from FASTA file(s)</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="version_command"/>
    <command detect_errors="exit_code"><![CDATA[
        fastreeR FASTA2DIST
        #for $f in $input_fastas:
            -i '$f'
        #end for
        -o '$output'
        --threads \${threads:-1}
        -k $kmer_size
        #if $normalize:
            --normalize
        #end if
        #if $verbose:
            --verbose
        #end if     
    ]]></command>
    <inputs>
        <param name="input_fastas" type="data" format="fasta" multiple="true" label="FASTA input files" help="FASTA input files"/>
        <param name="kmer_size" type="integer" value="4" label="K-mer size" help="K-mer size"/>
        <param name="normalize" type="boolean" label="Use normalized D2S distance" help="Use normalized D2S distance"/>
        <param name="threads" type="integer" value="1" label="Number of threads for parallelization" help="Number of threads for parallelization"/>
        <param name="verbose" type="boolean" checked="true" label="Verbose logging" help="Verbose logging"/>
    </inputs>
    <outputs>
        <data name="output" format="txt" label="Distance matrix"/>
    </outputs>
    <tests>
        <test>
            <param name="input_fastas" value="test.fasta"/>
            <param name="threads" value="1"/>
            <param name="verbose" value="true"/>
            <output name="output" file="expected.fasta.dist"/>
        </test>
    </tests>
    <help><![CDATA[
        This tool computes a D2S k-mer based distance matrix from one or more FASTA files.
        Supports multithreaded execution.
    ]]></help>
    <expand macro="citations"/>
</tool>
