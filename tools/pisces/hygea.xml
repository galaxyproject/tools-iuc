<?xml version="1.0"?>
<tool id="pisces_hygea" name="Pisces Hygea" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="18.01">
    <description>indel realigner</description>    
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="version_command"/>

    <command detect_errors="exit_code"><![CDATA[
## preprocessing

## run
dotnet Hygea.dll
## required
--genomefolders genomefolders
-b b
## common
--minbasequality <INT>
--mindenovofreq <FLOAT>
--priorsfile <PATH>
--maxindelsize <INT>
--trythree <BOOL>
--remasksoftclips <BOOL>
--skipduplicates <BOOL>
--skipandremoveduplicates <BOOL>
--allowrescoringorigzero <BOOL>
--maxrealignshift <INT>
--tryrealignsoftclippedreads <BOOL>
--usealignmentscorer <BOOL>
--mismatchcoefficient <INT>
--indelcoefficient <INT>
--indellengthcoefficient <INT>
--softclipcoefficient <INT>
--anchorlengthcoefficient <INT>
--maskpartialinsertion <BOOL>
--minimumunanchoredinsertionlength <INT>
--debug <BOOL>
--insidesubprocess <BOOL>
--multiprocess <BOOL>
--chrfilter <STRING>
-o, --outfolder <FOLDER>
-t, --maxthreads, --maxnumthreads <INT>
    ]]></command>
    <inputs>
        <param argument="--genomefolders" type="data" format="bam" multiple="true" label="Select geneomes"/>
        <param argument="-b" type="data" format="" multiple="true" label="Select input files" help=""/> -b, --bam, --bampaths
        <section name="co" title="Common options">
            <param argument="--minbasequality" type="integer" min="" max="" value="10" label="Minimum basecall quality" help="required to use a base of the read."/>
            <param argument="--mindenovofreq" type="float" min="0.0" max="1.0" value="0.01" label="Minimum frequency" help="to use a denovo indel as 
            realignment target."/>
            <param argument="--priorsfile" type="data" format="vcf" multiple="true" label="--priorsfile" help="Filepath for vcf file containing known priors to be used as realignment targets"/>
            <param argument="--maxindelsize" type="integer" min="" max="" value="100" label="Maximum allowed indel size for realignment" help="100"/>
            <param argument="--trythree" type="boolean" truevalue="--trythree true" falsevalue="--trythree false" label="turn on realignment attempts to three indels" help="Not recommended when there are many known priors."/>
            <param argument="--remasksoftclips" type="boolean" truevalue="--remasksoftclips" falsevalue="--remasksoftclips" label="remasksoftclips" help="re-apply softclips to portions of the realigned read that were previously softclipped and are now M."/>
            <param argument="--skipduplicates " type="boolean" truevalue="--skipduplicates " falsevalue="--skipduplicates " checked="true" label="skip realignment of duplicate reads " help="When true, duplicates will not be realigned but will still be outputted."/>
            <param argument="--skipandremoveduplicates" type="boolean" truevalue="--skipandremoveduplicates" falsevalue="--skipandremoveduplicates" checked="true" label="--skipandremoveduplicates" help="Option to skip realignment of duplicate reads and remove them from the bam file. When true, duplicates will not be written to output bam at all."/>
            <param argument="--allowrescoringorigzero" type="boolean" truevalue="--allowrescoringorigzero" falsevalue="--allowrescoringorigzero" checked="true" label="allowrescoringorigzero" help="Option to allow setting mapq of perfectly realigned reads (0 mismatch) to 40 even if original mapq was 0.  If false, perfectly realigned reads with original mapq between 1-20 are still assigned mapq of 40, but those with 0 are left at 0. Default value is true."/>
            <param argument="--maxrealignshift" type="integer" min="" max="" value="" label="Maximum length of shift of realigned read." help="Realignments with a shift of >= this number, relative to the original position, will be discarded and the original alignment will be kept. Default value is 250."/>
            <param argument="--tryrealignsoftclippedreads " type="boolean" truevalue="--tryrealignsoftclippedreads " falsevalue="--tryrealignsoftclippedreads " checked="true" label="--tryrealignsoftclippedreads " help="Whether to treat softclips as realignable, making them eligible for realignment of otherwise perfect reads, and counting against alignments when comparing them."/>
            <param argument="--usealignmentscorer" type="boolean" truevalue="--usealignmentscorer" falsevalue="--usealignmentscorer" checked="true" label="--usealignmentscorer" help="When comparing alignments, whether to use the alignment scorer rather than simply prioritizing alignments that minimize mismatch, softclip, and indel in that order. Alignment scoring is a simple additive function with that sums the product of each feature with its specified coefficient. Default scorer coefficients are -1 softclip, -1 indel, -2 mismatch, and 0 for all others, but can be tuned with the Alignment Scorer Parameters as described below."/>
            <param argument="--mismatchcoefficient" type="integer" min="" max="" value="" label="Coefficient for mismatch penalty." help="(Alignment Scorer Parameter)  Negative number indicates penalty."/>
            <param argument="--indelcoefficient" type="integer" min="" max="" value="" label="Coefficient for indel penalty" help="(Alignment Scorer Parameter) Negative number indicates penalty."/>
            <param argument="--indellengthcoefficient " type="integer" min="" max="" value="" label="Coefficient for number of indel bases. " help="(Alignment Scorer Parameter) Negative number indicates penalty."/>
            <param argument="--softclipcoefficient " type="integer" min="" max="" value="" label="Coefficient for softclip penalty" help="(Alignment Scorer Parameter) Negative number indicates penalty."/>
            <param argument="--anchorlengthcoefficient" type="integer" min="" max="" value="" label="Coefficient for anchor length" help="(Alignment Scorer Parameter) . Positive number indicates preference for highly anchored reads."/>
            <param argument="--maskpartialinsertion" type="boolean" truevalue="" falsevalue="" checked="true" label="softclip a partial insertion at 
            the end of a realigned read" help="(a complete but unanchored insertion is allowed)"/>
            <param argument="--minimumunanchoredinsertionlength " type="integer" min="" max="" value="0" label="Minimum length of an unanchored insertion" help="i.e. no flanking reference base on one side) allowed in a realigned read. Insertions shorter than the specified length will be softclipped. Default value is 0, i.e. allowing unanchored insertions of any length."/>
            <param argument="--chrfilter" type="text" value="" optional="true"label="Chromosome to process" help="If provided, other chromosomes are filtered out of output"/>
        </section>        
        <section name="oo" title="Output options">
            <param name="out" type="select" multiple="true" optional="false" label="Select output file(s)" help="">
                <option value="" selected="true"></option>
                <option value=""></option>
                <option value="log">Log</option>
            </param>            
        </section>
    </inputs>
    <outputs>

    </outputs>
    <tests>
        <!-- #1 default -->

        <!-- #2 -->
    
    </tests>
    <help><![CDATA[
.. class:: infomark

...

**Input**

...

**Output**

...

.. class:: infomark

**References**

@REFERENCES@
    ]]></help>
    <expand macro="citations"/>
</tool>