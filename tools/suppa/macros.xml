<?xml version="1.0"?>
<macros>
	<token name="@TOOL_VERSION@">2.3</token>
    <token name="@VERSION_SUFFIX@">0</token>	
	<xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">suppa</requirement>
        </requirements>
    </xml>
	<xml name="version_command">
       	<!-- no version parameter available -->
        <version_command><![CDATA[conda list suppa 2>&1 | grep 'suppa' | awk -F ' ' '{print$2}']]></version_command>
    </xml>
    <xml name="citations">
        <citations>
	        <citation type="doi">10.1186/s13059-018-1417-1</citation>
	        <citation type="doi">10.1261/rna.051557.115</citation>
	        <citation type="doi">10.1093/nar/gku1392</citation>
        </citations>
    </xml>

    <!--
        command
    -->

    <token name="@LOG@"><![CDATA[
#if 'log' in $out
    |& tee -a '$out_log'
#end if
    ]]></token>

    <!--
        output
    -->

    <xml name="log">
        <data name="out_log" format="txt" label="${tool.name} on ${on_string}: Log">
            <filter>'log' in out</filter>
        </data>
    </xml>

    <!-- 
		Help
    -->

    <token name="@CLUSTVEC@"><![CDATA[
*CLUSTVEC* file is a tab separated file, with the event ID in the first column, the cluster ID as second column, and then followed by a variable even number of fields, one for each condition, giving the mean PSI value per condition. The clustvec file doesn't contain a header. More information are available in the `Cluster analysis <https://github.com/comprna/SUPPA#cluster-analysis>`_ section of the wiki.
    ]]></token>
    <token name="@DPSI@"><![CDATA[
*DPSI* file contains the information about which events are signficantly differentially spliced in each pairwise comparison. For instance, a DPSI file with data from the comparison of three conditions will look like:

::

    Cond1_Cond2_dPSI  Cond1_Cond2_p-val Cond2_Cond3_dPSI  Cond2_Cond3_p-val
    event1    <dpsi_value>    <dpsi_value>    <dpsi_value>    <dpsi_value>
    event2    <dpsi_value>    <dpsi_value>    <dpsi_value>    <dpsi_value>
    event3    <dpsi_value>    <dpsi_value>    <dpsi_value>    <dpsi_value>
    ]]></token>
    <token name="@EXPRESSION@"><![CDATA[
*Transcript expression* files are tab separated files, where each line provides the estimated abundance of each transcript. These files must contain multiple columns with expression values in the different samples,  always keeping the same order of samples and the same sample names.

::

    sample1 sample2 sample3 sample4
    transcript1 <expression>  <expression>  <expression>  <expression>
    transcript2 <expression>  <expression>  <expression>  <expression>
    transcript3 <expression>  <expression>  <expression>  <expression>
    ]]></token>
    <token name="@GTF@"><![CDATA[
*GTF* files aim for visualization and are regular GTF in half-open coordinate convention with a track header to be directly uploaded in UCSC. In this filetype, each of the two possible forms of an event is described as a separated transcript_id. Moreover, the gene_id is defined as the event_id. Note that SUPPA generally operates with closed coordinates.
    ]]></token>
    <token name="@IOE@"><![CDATA[
*IOE* files show the relationship between each event and the transcripts that define that particular event.

::

    seqname gene_id event_id    inclusion_transcripts   total_transcripts
    chr14   ENSG00000133961.15  ENSG00000133961.15;SE:chr14:73763993-73789838:73789937-73822334:-   ENST00000556112.1    ENST00000556112.1,ENST00000555859.1
    chr14   ENSG00000133961.15  ENSG00000133961.15;SE:chr14:73876776-73925740:73926011-73929235:-   ENST00000553415.1    ENST00000553415.1,ENST00000556700.1
    ]]></token>
    <token name="@IOI@"><![CDATA[
*IOI* file shows the transcript 'events' in each gene.

::

    seqname gene_id event_id    inclusion_transcripts   total_transcripts
    chr14   ENSG00000133961.15      ENSG00000133961.15;ENST00000556772.1    ENST00000556772.1       ENST00000554546.1,ENST00000356296.4,ENST00000557597.1
    chr14   ENSG00000133961.15      ENSG00000133961.15;ENST00000554818.1    ENST00000554818.1       ENST00000554546.1,ENST00000356296.4,ENST00000557597.1
    ]]></token>
    <token name="@PSI@"><![CDATA[
*PSI* files are tab separated files, where each line provides the (transcript or local) event PSI values. These files must contain multiple columns with the PSI values in different samples, always keeping the same order of samples and the same sample names as (optionally) applied expression files.

::

    sample1 sample2 sample3 sample4
    event1  <psi_value> <psi_value> <psi_value> <psi_value>
    event2  <psi_value> <psi_value> <psi_value> <psi_value>
    event3  <psi_value> <psi_value> <psi_value> <psi_value>
    ]]></token>
    <token name="@PSIVEC@"><![CDATA[
*PSIVEC* file contains the PSI values for all samples, either per replicate or the average PSI value per condition, averaging over the replicates.

::

    sample1 sample2 sample3 sample1 sample2 sample3 
    event1    <psi_value> <psi_value> <psi_value> <psi_value> <psi_value> <psi_value>
    event2    <psi_value> <psi_value> <psi_value> <psi_value> <psi_value> <psi_value>
    event3    <psi_value> <psi_value> <psi_value> <psi_value> <psi_value> <psi_value>
    ]]></token>
    <token name="@REFERENCES@"><![CDATA[
More information are available on `GitHub <https://github.com/comprna/SUPPA>`_.
    ]]></token>
    <token name="@WID@"><![CDATA[
SUPPA is a flexible and powerful tool to study splicing at the transcript isoform or at the local alternative splicing event level, across multiple conditions and at high speed and accuracy. SUPPA has various modular operations that can be run separately to:

- Generate transcript events and local alternative splicing (AS) events from an annotation.
- Quantify transcript and local AS event inclusion levels (PSIs) from multiple samples.
- Calculate differential splicing for AS events and differential transcript usage across multiple conditions with replicates.
- Cluster events and transcripts according to PSI values across conditions.
    ]]></token>
</macros>