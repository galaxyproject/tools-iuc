<tool id="r-upsetr" name="UpSetR" version="@VERSION@.0">
    <description>visualize set intersections</description>
     <macros>
        <token name="@VERSION@">1.0.3</token>
    </macros>

    <requirements>
        <requirement type="package" version="@VERSION@">r-upsetr</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
        Rscript '$script'
    ]]></command>

    <configfiles>
        <configfile name="script"><![CDATA[
## Setup R error handling to go to stderr
options(show.error.messages=F, error=function(){cat(geterrmessage(),file=stderr());q("no",1,F)})
loc <- Sys.setlocale("LC_MESSAGES", "en_US.UTF-8")

## Import library
library("UpSetR")
list1 = c("$input1")
list3 = c("$input2")
list2 = c("$input3")
list_data = as.list(one=c("$input1"), two=c("$input2"), three=c("$input3"))
print(list_data)
png("$output")
upset(fromList(list_data), order.by = "freq")
dev.off()



        ]]></configfile>
    </configfiles>

    <inputs>
        <param name="input1" type="text" label="A list of named vectors to be converted to a data frame" />
        <param name="input2" type="text" label="A list of named vectors to be converted to a data frame" />
        <param name="input3" type="text" label="A list of named vectors to be converted to a data frame" />
    </inputs>

    <outputs>
        
        <data name="output" format="png" />
    </outputs>

    <tests>
        <test>
        
          
            
        </test>
    </tests>

    <help><![CDATA[
        UpSetR generates static UpSet plots. The UpSet technique visualizes set intersections in a matrix layout and introduces aggregates based on groupings and queries. The matrix layout enables the effective representation of associated data, such as the number of elements in the aggregates and intersections, as well as additional summary statistics derived from subset or element attributes.
    ]]></help>

    <citations>
          <citation type="doi">/10.1093/bioinformatics/btx364</citation>
    </citations>

</tool>