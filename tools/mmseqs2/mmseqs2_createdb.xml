<tool id="mmseqs2_createdb" name="MMseqs2 createdb" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>
        Convert FASTA/Q file(s) to MMseqs sequence DB format
    </description>
    <macros>
        <import>macro.xml</import>
    </macros>
    <expand macro="biotools"/>
    <expand macro="requirements"/>
    <expand macro="version_command"/>
    <command detect_errors="exit_code"><![CDATA[
    mmseqs createdb
    '$input_fasta'
    '$output_file'
    --dbtype '$dbtype'
    $shuffle
    ]]></command>
    <inputs>
        <param name="input" type="data" format="fasta,fasta.gz" label="Input fasta file" help="" />
        <param argument="--dbtype" type="select" label="Database type" help="" >
            <option value="0" selected="true">0 : auto</option>
            <option value="1">1 : amino acid</option>
            <option value="2">2 : nucleotides</option>
        </param>
        <param argument="shuffle" type="boolean" checked="false" label="Shuffle input database" truevalue="1" falsevalue="0" optional="true" help="" />
    </inputs>
    <outputs>
        <data name="output_file" format="tabular" label="${tool.name} on ${on_string}: Output File" >
            <change_format>
                <when input="db_output" value="True" format="mmseqsdb" />
            </change_format>
        </data>
    </outputs>
    <help><![CDATA[
**Usage** 

    *mmseqs createdb <i:fastaFile1[.gz|.bz2]> ... <i:fastaFileN[.gz|.bz2]>|<i:stdin> <o:sequenceDB> [options]*

By Martin Steinegger <martin.steinegger@snu.ac.kr>

-----

**References**

- Steinegger M, Soding J: MMseqs2 enables sensitive protein sequence searching for the analysis of massive data sets. Nature Biotechnology, 35(11), 1026-1028 (2017)

-----

**Options**

* **misc:**
--dbtype INT          Database type 0: auto, 1: amino acid 2: nucleotides [0]
--shuffle BOOL        Shuffle input database [1]
--createdb-mode INT   Createdb mode 0: copy data, 1: soft link data and write new index (works only with single line fasta/q) [0]
--id-offset INT       Numeric ids in index file are offset by this value [0]

* **common:**
--compressed INT      Write compressed output [0]
-v INT                Verbosity level: 0: quiet, 1: +errors, 2: +warnings, 3: +info [3]

* **expert:**
--write-lookup INT    write .lookup file containing mapping from internal id, fasta id and file number [1]

-----

**Examples**

* Create a sequence database from multiple FASTA files
    *mmseqs createdb file1.fa file2.fa.gz file3.fa sequenceDB*

* Create a seqDB from stdin
    *cat seq.fasta | mmseqs createdb stdin sequenceDB*

* Create a seqDB by indexing existing FASTA/Q (for single line fasta entries only)
    *mmseqs createdb seq.fasta sequenceDB --createdb-mode 1*
    ]]></help>
    <expand macro="citations"/>
</tool>