<tool id="DownloadSchema" name="chewBBACA DownloadSchema" version="@CHEW_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>Download a schema from Chewie-NS</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
        chewBBACA.py DownloadSchema
            -sp $species_id 
            -sc $schema_id
            -o './output' &&
        ## The output is named based of the species name. Rename it to schema_seed so it is compatible for other chewbbaca tools.
        mv output/* 'schema_seed' &&
        zip -r schema_seed.zip './schema_seed'
    ]]></command>
    <inputs>
        <param argument="--species-id" type="select" label="Species ID">
            <option value="1">Streptococcus pyogenes</option>
            <option value="2">Acinetobacter baumannii</option>
            <option value="3">Arcobacter butzleri</option>
            <option value="4">Campylobacter jejuni</option>
            <option value="5">Escherichia coli</option>
            <option value="6">Listeria monocytogenes</option>
            <option value="7">Yersinia enterocolitica</option>
            <option value="8">Salmonella enterica</option>
            <option value="9">Streptococcus agalactiae</option>
            <option value="10">Brucella melitensis</option>
            <option value="11">Brucella melitensis</option>
            <option value="12">Brucella melitensis</option>
            <option value="13">Brucella melitensis</option>
            <option value="14">Brucella melitensis</option>
            <option value="15">Brucella melitensis</option>
            <option value="16">Brucella melitensis</option>
        </param>
        <!-- Currently,the schema id can only be set to 1. Maybe in the next versions other values possible -->
        <param argument="--schema-id" type="integer" min="1" value="1" label="Schema ID"/>
    </inputs>
    <outputs>
        <data format="zip" name="schema" from_work_dir="schema_seed.zip" label="${tool.name} on ${on_string}: Schema files"/>
    </outputs>
    <tests>
        <test>
            <param name="species_id" value="13"/>
            <param name="schema_id" value="1"/>
            <output name="schema" file="Download_C-chauvoei_seed.zip" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[
        
chewBBACA version: 3.3.3
Authors: Rafael Mamede, Pedro Cerqueira, Mickael Silva, João Carriço, Mário Ramirez
Github: https://github.com/B-UMMI/chewBBACA
Documentation: https://chewbbaca.readthedocs.io/en/latest/index.html
Contacts: imm-bioinfo@medicina.ulisboa.pt

==============================
  chewBBACA - DownloadSchema
==============================

options:
 
  -sp, --species-id SPECIES_ID                     The integer identifier or name of the species
                                                   that the schema is associated to in Chewie-NS.
                                                   (default: None)
                                                   
  -sc, --schema-id SCHEMA_ID                       The URI, integer identifier or name of the schema
                                                   to download from Chewie-NS. (default: None)

    ]]></help>
    <expand macro="citations" />
</tool>