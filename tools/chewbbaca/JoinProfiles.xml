<tool id="JoinProfiles" name="chewBBACA JoinProfiles" version="@CHEW_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>Join allele calling results from different runs</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
        #set $profiles = $input1
        #set $profile_tmp = []
        #for $i, $k in enumerate($profiles)
            ln -s '$k' './profile_${i}.tsv' &&
            $profile_tmp.append("profile_" + str($i) + ".tsv")
        #end for
        chewBBACA.py JoinProfiles
            -p ${' '.join($profile_tmp)}
            -o JoinedProfile.tsv
    ]]></command>
    <inputs>
        <param name="input1" type="data" format="tsv" multiple="true" label="AlleleCall results" />
    </inputs>
    <outputs>
        <data format="tsv" name="JoinedProfile" from_work_dir="JoinedProfile.tsv" label="${tool.name} on ${on_string}: Joined profiles"/>
    </outputs>
    <tests>
        <test>
            <param name="input1" value="results_alleles.tsv,results_alleles2.tsv"/>
            <output name="JoinedProfile" file="JoinedProfile.tsv" compare="sim_size"/>
        </test>
    </tests>
    <help>
chewBBACA is a software suite for the creation and evaluation of core genome and whole genome MultiLocus Sequence Typing (cg/wgMLST) schemas and results.

The process creates a TSV file with the allelic profiles of all samples in the input files.
    </help>
    <expand macro="citations" />
</tool>