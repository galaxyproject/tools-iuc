<tool id="parse_mykrobe_predict" name="parse mykrobe predict" version="20210201">
    <description>Parses Mykrobe predict results for Shigella sonnei.</description>
    <requirements>
        <requirement type="package" version="20210201">sonneityping</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        parse_mykrobe_predict

        --jsons '$json'

        #if $optional.alleles:
            --alleles '$optional.alleles'
        #end if

        --prefix results

    ]]></command>
    <inputs>
        <param name="json" type="data" format="json" multiple="true" optional="false" label="The Mykrobe results to parse." help="The Mykrobe results, in JSON format, to parse. This input is mandatory." />

        <section name="optional" title="Optional Parameters" expanded="false">
            <param name="alleles" type="data" format="text,tabular" optional="true" label="Alleles" help="Links each lineage name to its human-readable counterpart. This parameter is optional." />
        </section>
    </inputs>
    <outputs>
        <data format="tabular" label="parsed output" name="parsed_output" from_work_dir="results_predictResults.tsv" />
    </outputs>
    <tests>
        <test>
            <param name="json" value="SRR6114360.json"/>
            <param name="optional.alleles" value="alleles.txt" />
            <output name="parsed_output">
                <assert_contents>
                    <has_text text="3.7.30.4" />
                    <has_text text="S. sonnei" />
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="json" value="SRR6114360.json"/>
            <output name="parsed_output">
                <assert_contents>
                    <has_text text="3.7.30.4" />
                    <has_text text="S. sonnei" />
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[
Parse Mykrobe Predict
=====================

Parses Mykrobe predict results for Shigella sonnei. Please refer to the GitHub repository (https://github.com/katholt/sonneityping) for more information.]]></help>
    <citations>
		<citation type="bibtex">
			@misc{GitHubsonneityping,
			title = {sonneityping},
			journal = {GitHub Repository},
			url = {https://github.com/katholt/sonneityping},
			}
		</citation>
    </citations>
</tool>

