<macros>
    <token name="@TOOL_VERSION@">0.5.1</token>
    <token name="@VERSION_SUFFIX@">0</token>
    <token name="@PROFILE@">25.0</token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">alphagenome</requirement>
            <requirement type="package" version="0.31.4">cyvcf2</requirement>
            <yield/>
        </requirements>
    </xml>
    <xml name="credentials">
        <credentials name="alphagenome" version="1.0" label="AlphaGenome API" description="API key from Google DeepMind AlphaGenome">
            <secret name="api_key" inject_as_env="ALPHAGENOME_API_KEY" label="API Key" description="Your AlphaGenome API key"/>
        </credentials>
    </xml>
    <xml name="organism_param">
        <param name="organism" type="select" label="Organism">
            <option value="human" selected="true">Human (hg38)</option>
            <option value="mouse">Mouse (mm10)</option>
        </param>
    </xml>
    <xml name="sequence_length_param">
        <param name="sequence_length" type="select" label="Prediction window size" help="Genomic context window in bases around the target region (e.g. 1 Mb = 1,048,576 bases, not bytes)">
            <option value="16KB">16 kb</option>
            <option value="128KB">128 kb</option>
            <option value="512KB">512 kb</option>
            <option value="1MB" selected="true">1 Mb</option>
        </param>
    </xml>
    <xml name="output_types_param">
        <param name="output_types" type="select" multiple="true" label="Output types to predict">
            <option value="RNA_SEQ" selected="true">RNA-seq</option>
            <option value="ATAC">ATAC-seq</option>
            <option value="CAGE">CAGE</option>
            <option value="DNASE">DNase</option>
            <option value="CHIP_HISTONE">ChIP-seq histone</option>
            <option value="CHIP_TF">ChIP-seq TF</option>
            <option value="SPLICE_SITES">Splice sites</option>
            <option value="PROCAP">PRO-cap</option>
            <validator type="no_options" message="Select at least one output type"/>
        </param>
    </xml>
    <xml name="ontology_terms_param">
        <param name="ontology_terms" type="text" value="" label="Ontology terms (optional)" help="Comma-separated UBERON/CL terms for tissue context, e.g. UBERON:0002107,CL:0000746">
            <validator type="regex" message="Only alphanumeric characters, colons, commas, and spaces are allowed">[A-Za-z0-9:, ]*</validator>
        </param>
    </xml>
    <xml name="test_fixture_param">
        <param name="test_fixture" type="hidden" value=""/>
    </xml>
    <token name="@CMD_ONTOLOGY_TERMS@"><![CDATA[
            #if str($ontology_terms).strip()
                --ontology-terms '$ontology_terms'
            #end if
    ]]></token>
    <token name="@CMD_TEST_FIXTURE@"><![CDATA[
            #if $test_fixture
                --test-fixture '$__tool_directory__/$test_fixture'
            #end if
    ]]></token>
    <xml name="citations">
        <citations>
            <citation type="doi">10.1038/s41586-025-10014-0</citation>
        </citations>
    </xml>
</macros>
