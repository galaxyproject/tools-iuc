<?xml version="1.0"?>
<tool id="assembly-stats" name="Assembly-stats" version="@TOOL_VERSION@+galaxy0" profile="21.05">
    <description>Assembly metric visualisations to facilitate rapid assessment and comparison of assembly quality.</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">assembly-stats</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        cp -r `command -v assembly-stats | xargs dirname`/../bin/ assembly-stats_dir/ &&
        mkdir -p $output.files_path &&
        cp assembly-stats_dir/bin/asm2stats.minmaxgc.pl $output.files_path 
        cp assembly-stats_dir/opt/assembly-stats/assembly-stats.html $output.files_path &&
        cp assembly-stats_dir/opt/assembly-stats/css/ $output.files_path  &&
        cp assembly-stats_dir/opt/assembly-stats/js/ $output.files_path  &&
        
        asm2stats.minmaxgc.pl '${input_fasta}' > '${output.assembly-stats}'

    ]]></command>
    
    <inputs>
        <param name="input_fasta" type="data" format="fa,fasta" label="Genome assembly" ></param>
    </inputs>

    <outputs>
        <data name="output" format="html" label="Assembly-stats on ${on_string}"></data>
    </outputs>
    
    <tests>
    <test expect_num_outputs="1">
        <!--TODO: auto-generated test case. Please fill in the required values-->
        <param name="input_fasta" value="fa,fasta"/>
        <output name="output" value="html">
        </output>
    </test>
    </tests>

    <help><![CDATA[
    assembly-stats_ Assembly metric visualisations to facilitate rapid assessment and comparison of assembly quality.

    .. _assembly-stats: https://github.com/rjchallis/assembly-stats
    ]]></help>
</tool>