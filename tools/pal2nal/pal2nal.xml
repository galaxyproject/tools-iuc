<?xml version="1.0" encoding="UTF-8"?>
<tool id="pal2nal" name="PAL2NAL" version="@TOOL_VERSION@+galaxy@WRAPPER_VERSION@" profile="22.05">
    <description>Perl-based converter for protein alignment and nucleotide FASTA into codon-based alignment</description>

    <macros>
        <import>info.xml</import>
        <import>macros.xml</import>
        <import>tests.xml</import>
    </macros>

    <expand macro="requirements" />

    <expand macro="version_command" />

    <expand macro="command" />

    <inputs>
        <param name="protein_alignment" type="data" format="fasta,clustal" label="Protein alignment (.aln or .fasta)" />
        <repeat name="nucleotide_fastas" title="Nucleotide FASTA files" min="1">
            <param name="nucleotide_fasta" type="data" format="fasta" label="Nucleotide FASTA (.fasta)" />
        </repeat>

        <param name="output_format" type="select" label="Output format (-output)">
            <option value="clustal" selected="true">CLUSTAL (default)</option>
            <option value="paml">PAML</option>
            <option value="fasta">FASTA</option>
            <option value="codon">CODON</option>
        </param>

        <param name="blockonly" type="boolean" truevalue="true" falsevalue="false" checked="false"
               label="Show only user-specified blocks (-blockonly)" help="Use only '#' marked conserved blocks under CLUSTAL alignment" />

        <param name="nogap" type="boolean" truevalue="true" falsevalue="false" checked="false"
               label="Remove codons with gaps or in-frame stop codons (-nogap)" />

        <param name="nomismatch" type="boolean" truevalue="true" falsevalue="false" checked="false"
               label="Remove mismatched codons (-nomismatch)" />

        <param name="codontable" type="select" label="Genetic code (-codontable)">
            <option value="1" selected="true">1: Universal</option>
            <option value="2">2: Vertebrate mitochondrial</option>
            <option value="3">3: Yeast mitochondrial</option>
            <option value="4">4: Mold/Protozoan/Coelenterate mito + Mycoplasma</option>
            <option value="5">5: Invertebrate mitochondrial</option>
            <option value="6">6: Ciliate/Hexamita nuclear</option>
            <option value="9">9: Echinoderm/Flatworm mitochondrial</option>
            <option value="10">10: Euplotid nuclear</option>
            <option value="11">11: Bacterial/Archaeal/Plastid</option>
            <option value="12">12: Alternative yeast nuclear</option>
            <option value="13">13: Ascidian mitochondrial</option>
            <option value="14">14: Alternative flatworm mitochondrial</option>
            <option value="15">15: Blepharisma nuclear</option>
            <option value="16">16: Chlorophycean mitochondrial</option>
            <option value="21">21: Trematode mitochondrial</option>
            <option value="22">22: Scenedesmus obliquus mitochondrial</option>
            <option value="23">23: Thraustochytrium mitochondrial</option>
        </param>

        <param name="html_output" type="boolean" truevalue="true" falsevalue="false" checked="false"
               label="HTML formatted output (-html)" help="Produces HTML-styled output, used for web rendering" />

        <param name="nostderr" type="boolean" truevalue="true" falsevalue="false" checked="false"
               label="Suppress STDERR messages (-nostderr)" help="Hide warning messages (use for automated pipelines)" />
    </inputs>

    <outputs>
        <data name="output_file" format="txt" label="PAL2NAL codon alignment output">
            <change_format>
                <when input="output_format" value="clustal" format="clustal" />
                <when input="output_format" value="fasta" format="fasta" />
                <when input="html_output" value="true" format="html" />
            </change_format>
        </data>
    </outputs>

    <expand macro="tests" />

    <expand macro="help" />

    <expand macro="citations" />
</tool>
