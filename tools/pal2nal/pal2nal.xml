<tool id="pal2nal" name="PAL2NAL" version="@TOOL_VERSION@+galaxy@WRAPPER_VERSION@" profile="24.0">
    <description>Codon-based nucleotide alignment from protein and DNA sequences</description>

    <macros>
        <import>info.xml</import>
        <import>macros.xml</import>
        <import>tests.xml</import>
    </macros>

    <expand macro="requirements" />

    <expand macro="version_command" />

    <expand macro="command" />

    <inputs>
        <param name="protein_alignment" type="data" format="fasta,clustal" label="Protein alignment"
               help="Accepts CLUSTAL/FASTA alignments uploaded through Galaxy." />
        <param name="nucleotide_fastas" type="data" format="fasta" multiple="true" min="1"
               label="Nucleotide FASTA files" help="Accepts FASTA-formatted nucleotide sequences." />

        <param name="output_format" type="select" argument="-output" label="Output format">
            <option value="clustal" selected="true">CLUSTAL (default)</option>
            <option value="paml">PAML</option>
            <option value="fasta">FASTA</option>
            <option value="codon">CODON</option>
        </param>

        <param name="show_only_blocks" type="boolean" argument="-blockonly" truevalue="-blockonly" falsevalue=""
               checked="false" label="Show only user-specified blocks" help="Use only '#' marked conserved blocks under CLUSTAL alignment." />

        <param name="remove_gaps" type="boolean" argument="-nogap" truevalue="-nogap" falsevalue=""
               checked="false" label="Remove codons with gaps or in-frame stop codons" />

        <param name="remove_mismatches" type="boolean" argument="-nomismatch" truevalue="-nomismatch" falsevalue=""
               checked="false" label="Remove mismatched codons" />

        <param name="genetic_code" type="select" argument="-codontable" label="Genetic code">
            <option value="1" selected="true">1: Universal</option>
            <option value="2">2: Vertebrate mitochondrial</option>
            <option value="3">3: Yeast mitochondrial</option>
            <option value="4">4: Mold/Protozoan/Coelenterate mito + Mycoplasma</option>
            <option value="5">5: Invertebrate mitochondrial</option>
            <option value="6">6: Ciliate/Hexamita nuclear</option>
            <option value="9">9: Echinoderm/Flatworm mitochondrial</option>
            <option value="10">10: Euplotid nuclear</option>
            <option value="11">11: Bacterial/Archaeal/Plastid</option>
            <option value="12">12: Alternative yeast nuclear</option>
            <option value="13">13: Ascidian mitochondrial</option>
            <option value="14">14: Alternative flatworm mitochondrial</option>
            <option value="15">15: Blepharisma nuclear</option>
            <option value="16">16: Chlorophycean mitochondrial</option>
            <option value="21">21: Trematode mitochondrial</option>
            <option value="22">22: Scenedesmus obliquus mitochondrial</option>
            <option value="23">23: Thraustochytrium mitochondrial</option>
        </param>

        <param name="html_output" type="boolean" truevalue="true" falsevalue=""
               checked="false" label="Add HTML formatted output" help="Produce an additional dataset with PAL2NAL's HTML view." />

        <param name="suppress_stderr" type="boolean" argument="-nostderr" truevalue="-nostderr" falsevalue=""
               checked="false" label="Suppress STDERR messages" help="Hide warning messages (use for automated pipelines)." />
    </inputs>

    <outputs>
        <data name="output_file" format="txt" label="PAL2NAL codon alignment output">
            <change_format>
                <when input="output_format" value="clustal" format="clustal" />
                <when input="output_format" value="fasta" format="fasta" />
                <when input="output_format" value="paml" format="phylip" />
                <when input="output_format" value="codon" format="txt" />
            </change_format>
        </data>
        <data name="html_output_file" format="html" label="${tool.name} on ${on_string}: HTML view">
            <filter>html_output</filter>
        </data>
    </outputs>

    <expand macro="tests" />

    <expand macro="help" />

    <expand macro="citations" />
</tool>
