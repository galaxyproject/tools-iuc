<tool id="EMBOSS: epestfind29" name="epestfind"  version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
  <description>Finds PEST motifs as potential proteolytic cleavage sites</description>
  <macros>
    <token name="@COMMAND@">epestfind</token>
    <import>macros.xml</import>
  </macros>
  <expand macro="bio_tools" />
  <expand macro="requirements" />
  <expand macro="version_command" />
  <command><![CDATA[
  @COMMAND@
    -sequence '$input1'
    -goutfile 'ofile2'
    -graph png
    -outfile '$ofile1'
    -window $window
    -order $order
    ## Additional (Optional) qualifiers:
    -threshold $threshold
    ## Advanced (Unprompted) qualifiers:
    -potential $potential
    -poor $poor
    -invalid $invalid
    -map $map
    -auto
  ]]></command>
  <inputs>
    <param name="input1" type="data" format="@SEQUENCE_FORMATS@" label="Sequence" />
    <param name="window" type="integer" value="10" label="Minimal distance between positively charged amino acids" />
    <param name="order" type="select" label="Sort by">
      <option value="3">Score</option>
      <option value="1">Length</option>
      <option value="2">Position</option>
    </param>
    <param name="threshold" type="float" value="5.0" min="-55" max="55" label="Threshold value to discriminate weak from potential PEST motifs" help="Valid PEST motifs are discriminated into 'poor' and 'potential' motifs depending on this threshold score. By default, the default value is set to +5.0 based on experimental data. Alterations are not recommended since significance is a matter of biology, not mathematics."/>

    <param name="mono" type="boolean" truevalue="-mono" falsevalue="" checked="false" label="Use monoisotopic weights"/>
    <param name="potential" type="boolean" truevalue="-potential" falsevalue="-nopotential" checked="true" label="Decide whether potential PEST motifs should be printed"/>
    <param name="poor" type="boolean" truevalue="-poor" falsevalue="-nopoor" checked="true" label="Decide whether poor PEST motifs should be printed"/>
    <param name="invalid" type="boolean" truevalue="-invalid" falsevalue="-noinvalid" checked="true" label="Decide whether invalid PEST motifs should be printed"/>
    <param name="map" type="boolean" truevalue="-map" falsevalue="-nomap" checked="true" label="Decide whether PEST motifs should be mapped to sequence"/>
  </inputs>
  <outputs>
    <data name="ofile2" format="png" from_work_dir="ofile2.1.png" label="${tool.name} on ${on_string}: png"  />
    <data name="ofile1" format="epestfind" />
  </outputs>
  <tests>
    <!-- output file contains file location info -->
    <test>
      <param name="input1" value="exu2_drops.faa"/>
      <param name="window" value="10"/>
      <param name="order" value="3"/>
      <param name="threshold" value="5.0"/>
      <param name="potential" value="yes"/>
      <param name="poor" value="yes"/>
      <param name="invalid" value="no"/>
      <param name="map" value="yes"/>
      <output name="ofile1" file="emboss_epestfind_out.epestfind"/>
      <output name="ofile2">
        <assert_contents>
          <has_size min="1"/>
        </assert_contents>
      </output>
    </test>
  </tests>
  <help>
@DOC_LINK@
  </help>
  <expand macro="citations" />
</tool>
