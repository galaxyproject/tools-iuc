<tool id='aegean_canongff3' name='CanonGFF3' version='@TOOL_VERSION@' profile='20.09'>
    <description>- pre-process GFF3 files, removing all features not directly related to protein-coding genes</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro='edam_ontology'/>
    <expand macro='requeriments'/>
    <command detect_errors='exit_code'>
        <![CDATA[
            canon-gff3 '$input'
            $infer
            #if $source
                '$source'
            #end if
            -o $output1
            ]]>
    </command>
    <inputs>
        <param type='data' name='input' label='GFF3 File' format='gff3'/>
        <param name='infer' type='boolean'
            argument='-i' label='Infer gene feature for transcripts lacking it'
            help='For  transcript  features  lacking an explicitly declared gene feature as a parent, create this feature on-they-fly.'
            truevalue='--infer' falsevalue=''/>
        <param name='source' type='text' value=''
            label='Reset the source of each feature'
            optional='true' argument='-s'
            help='Reset the source of each feature to the given value'/>
    </inputs>
    <outputs>
        <data name='output1' format='txt' />
    </outputs>
    <tests>
        <test>
            <param name='input' value='TAIR10_GFF3_genes.gff'/>
            <output name='output1' file='canon-gff3-output_test1.txt'/>
        </test>
        <test>
            <param name='input' value='TAIR10_GFF3_genes.gff'/>
            <param name='infer' value='True'/>
            <output name='output1' file='canon-gff3-output_test2.txt'/>
        </test>

    </tests>
    <help>
        <![CDATA[        
.. class:: infomark
            
**Purpose**
            
CanonGFF3 is a program for pre-processing GFF3 data encoding canonical protein-coding genes. It will clean up a GFF3 file, removing all features not directly related to protein-coding genes and inferring features that are not explicitly declared, such as inrons and UTRs. Under the hood, CanonGFF3 essentially applies the same procedure used by ParsEval when it inspects its GFF3 input.
            
-----
            
.. class:: infomark
            
**Input**
            
Input for CanonGFF3 is one or more files in GFF3 forma. Aside from compliance to GFF3 syntax, CanonGFF3 requires only that protein coding genes be described in enough detail that the entire gene structure can be interpreted. 
            
For example, one common convention is to use exon and CDS features to describe the structure. No intron, UTR, or start/stop features are explicitly provided, but these can be inferred from the other features. An alternative convention is to only declare exon and start & stop codon features, which requires the introns, UTRs, and CDS to be inferred. CanonGFF3 is pretty flexible in its handling of these various conventions, assuming the gene structure is described in sufficient detail.
            
-----
            
.. class:: infomark
            
**Output**
            
CanonGFF3 output is a GFF3 file containing protein-coding genes from the provided input file(s).
            
]]>
    </help>
    <expand macro='citations'/>
</tool>
