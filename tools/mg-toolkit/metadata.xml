<tool id="mg_toolkit_original_metadata" name="Metagenomics toolkit Original Metadata" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@">
    <description>Download original metadata for a study</description>
    <macros>
        <import>macros.xml</import>
    </macros>    
    <command><![CDATA[
        mkdir output_metadata &&
        mg-toolkit original_metadata -a $accession &&
        mv *.csv output_metadata
    ]]></command>
    
    <inputs>
        <param name="accession" type="text" label="Accession" help="Study/project accession (e.g., ERP001736 SRP000319)" optional="false" />
    </inputs>    
    <outputs>
        <collection name="output_collection" type="list" label="Original metadata">
            <discover_datasets pattern="(?P&lt;designation&gt;.+).csv" directory="output_metadata" format="csv"/>
        </collection>
    </outputs>
    <tests>
        <test>
            <param name="accession" value="ERP001736 SRP000319" />
            <output_collection name="output_collection" type="list">
                <element name="ERP001736">
                    <assert_contents>
                        <has_n_lines n="250" />
                        <has_size size="185577" />
                    </assert_contents>
                </element>
                <element name="SRP000319">
                    <assert_contents>
                        <has_n_lines n="30" />
                        <has_size size="2855" />
                    </assert_contents>
                </element>
            </output_collection>
        </test>
        <test>
            <param name="accession" value="ERP001736" />
            <output_collection name="output_collection" type="list">
                <element name="ERP001736">
                    <assert_contents>
                        <has_n_lines n="250" />                
                        <has_size size="185577" />
                    </assert_contents>
                </element>
            </output_collection>
        </test>
    </tests>
    <help>
<![CDATA[
This tool wraps the `mg-toolkit` original_metadata command for use within Galaxy. 

**Command:**
Download original metadata.

**Example usage:**

    mg-toolkit original_metadata [-h] -a ACCESSION [ACCESSION ...]

]]>
    </help>
</tool>
