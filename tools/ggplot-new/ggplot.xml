<tool id="ggplot-new" name="new ggplot with uber cool features" version="@VERSION_SCRIPT@+@VERSION_WRAPPER@" >
    <description>New ggplot update, change this description</description>
    <macros>
        <!-- Common Options -->
        <macro name="
        <macro name="geom_abline_params" >
            <param name="intercept" type="float" label="Intercept" />
            <param name="slope" type="float" label="Slop" />
        </macro>
        <macro name="geom_area_params" >
            <param name="stat" type="select" label="Stat" >
                <option value="identity" >Identity</option>
                <option value="TODO" />
            </param>
            <param name="position" type="select" label="Position" >
                <option value="stack" >Stack</option>
                <option value="TODO" />
            </param>
        </macro>
        <macro name="geom_bar_params" >
            <param name="width" type="integer" min="0" value="10" label="Width" />
            <param name="binwidth" type="integer" min="0" value="10" label="Bin Width" />
        </macro>
        <macro name="geom_bin2d_params" >
            <param name="stat" type="select" label="Stat" >
                <option value="bin2d" />
                <option value="TODO" />
            </param>
        </macro>
    </macros>
    <version_command><![CDATA[
Rscript '$__tool_directory__/scripts/mainscript.R' --version
]]>
    </version_command>
    <command detect_errors="exit_code"><![CDATA[
Rscript '$__tool_directory__/scripts/mainscript.R '$userconf'
    ]]></command>
    <configfiles>
        <configfile name="userconf" ><![CDATA[
## WE WILL FILL THIS IN LATER

dplot = formals(dotplot)

## dplot$x
## dplot$y

#if $series.chart_type.chart == "dotplot":
dplot$x = $series.chart_type.adv_param1
dplot$y = $series.chart_type.adv_param1
#end if




]]>
        </configfile>
    </configfiles>
    <inputs>
        <param name="input" type="data" format="tabular" label="Data Set" />

        <repeat name="layers" title="Plot Layer">
            <conditional name="chart_type" >
                <param name="chart" type="select" label="Chart Type">
                    <option value="dotplot">Dot Plot</option>
                    <option value="otherplot">Other Plot</option>
                    <option value="thirdplot">My third Plot</option>
                </param>
                <when value="thirdplot" />
                <when value="dotplot" >
                     <param name="adv_param1" type="float" value="0.01" />
                    <param name="adv_param2" type="float" value="0.01" />
                </when>
                <when value="otherplot" >
                    <param name="adv_param1" type="float" value="0.01" />
                    <param name="adv_param2" type="float" value="0.01" />
                    <param name="adv_param3" type="boolean" checked="true" />
                </when>
            </conditional>
        </repeat>
        <param name="xcol" type="data_column" data_ref="input" label="Column for x axis"/>
        <param name="ycol" type="data_column" data_ref="input" label="Column for y axis"/>
    </inputs>
    <outputs>
        <data name="outpng" format="png" label="${tool.name} on ${on_string}: PNG" />
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help><![CDATA[

This is the new GGplot tool that we will update later

]]>
    </help>
    <citations>
    </citations>
</tool>
