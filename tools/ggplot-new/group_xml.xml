<macros>
    <!-- Chart parameters -->
    <!-- These are the parameters which DO NOT go into the
         the aes() parameters, but are SPECIFIC to the plot
         See the cheatsheet: https://raw.githubusercontent.com/rstudio/cheatsheets/master/data-visualization-2.1.pdf
    -->
    <macro name="general_plot_params" >
        <!-- These are common to all plots (or most) -->
        <param name="x" type="integer" label="x" />
        <param name="y" type="integer" label="y" />
        <param name="alpha" type="float" label="alpha" value="1.0"/>
        <param name="color" type="select" label="Color of axis label">
            <option value="black">Black (default)</option>
            <option value="red">Red</option>
            <option value="white">White</option>
            <option value="blue">Blue</option>
            <option value="orange">Orange</option>
            <option value="yellow">Yellow</option>
            <option value="green">Green</option>
            <option value="purple">Purple</option>
            <option value="magenta">Magenta</option>
            <option value="cyan">Cyan</option>
            <option value="grey">Grey</option>
            <option value="gold">Gold</option>
        </param>
    </macro>
    <macro name="lines">
      	<param name="size" type="float" value="12" label="Axis label size (default = 12)"/>
		<param name="linetype" type="select"label="Line type">
            <option value="1">Solid</option>
            <option value="0">Blank</option>
            <option value="2">Dashed</option>
            <option value="3">Dotted</option>
            <option value="4">Dot dash</option>
            <option value="5">Long dash</option>
            <option value="6">Two dash </option>
      	</param>
	</macro>
              
              
    <macro/>
    <macro name="2d">
      	<param name="fill" type="select" label="Color of axis label">
            <option value="black">Black (default)</option>
            <option value="red">Red</option>
            <option value="white">White</option>
            <option value="blue">Blue</option>
            <option value="orange">Orange</option>
            <option value="yellow">Yellow</option>
            <option value="green">Green</option>
            <option value="purple">Purple</option>
            <option value="magenta">Magenta</option>
            <option value="cyan">Cyan</option>
            <option value="grey">Grey</option>
            <option value="gold">Gold</option>
        </param>
        
    </macro>
  
  
    <macro name="transform">
        <param name="transform" type="select" label="Data transformation">
            <option value="none">Plot the data as it is</option>
            <option value="log2">Log2(value) transform my data</option>
            <option value="log2plus1">Log2(value+1) transform my data</option>
            <option value="log10">Log10(value) transform my data</option>
            <option value="log10plus1">Log10(value+1) transform my data</option>
        </param>
    </macro>
    <macro name="xy_scaling">
        <conditional name="scaling">
            <param name="plot_scaling" type="select" label="Axis scaling">
                <option value="Automatic" selected="true">Automatic axis scaling</option>
                <option value="Defined">User-defined axis scales</option>
            </param>
            <when value="Automatic">
                <!--Do nothing here -->
            </when>
            <when value="Defined">
                <param name="xaxismin" type="float" value="0" label="minimal range of x-axis" />
                <param name="xaxismax" type="float" value="3" label="maximal range of x-axis" />
                <param name="yaxismin" type="float" value="0" label="minimal range of y-axis" />
                <param name="yaxismax" type="float" value="3" label="maximal range of y-axis" />
            </when>
        </conditional>
    </macro>
    <macro name="xy_lab">
        <param name="xlab" type="text" value="title of x-axis" label="Label for x axis">
            <sanitizer sanitize="false"/>
        </param>
        <param name="ylab" type="text" value="title of y-axis" label="Label for y axis">
            <sanitizer sanitize="false"/>
        </param>
    </macro>
    <macro name="legend">
        <param name="legend" type="select" label="Legend options">
            <option value="yes">Include legend on plot</option>
            <option value="no">Hide legend</option>
        </param>
    </macro>
    <macro name="theme">
        <param name="theme" type="select" label="Backgound theme for plot">
            <option value="bw">Black and white</option>
            <option value="Default">Default (grey)</option>
        </param>
    </macro>
    <macro name="dimensions">
        <param name="unit_output_dim" type="select" label="Unit of output dimensions" help="default inches">
            <option value="in" selected="true">Inches (in)</option>
            <option value="cm">Centimeters (cm)</option>
            <option value="mm">Millimeters (mm)</option>
        </param>
        <param name="width_output_dim" type="float" value="7" label="width of output"/>
        <param name="height_output_dim" type="float" value="7" label="height of output"/>
        <param name="dpi_output_dim" type="float" value="300" label="dpi of output" help="Plot resolution. Applies only to raster output types."/>
        <param name="additional_output_format" type="select" label="Additional output format" help="PNG is always selected as output format">
            <option value="none" selected="true">only PNG</option>
            <option value="pdf">PDF</option>
            <option value="svg">SVG</option>
            <option value="eps">EPS</option>
            <option value="ps">PS</option>
            <option value="tex">TEX (pictex)</option>
            <option value="jpeg">JPEG</option>
            <option value="tiff">TIFF</option>
            <option value="bmp">BMP</option>
        </param>
    </macro>
    <macro name="axis_customization" token_label="Axis title options">
        <param name="axis_customization" type="select" label="@LABEL@">
            <option value="default" selected="true">Default</option>
            <option value="defined">User defined label options</option>
        </param>
        <when value="default">
            <!--Do nothing here -->
        </when>
        <when value="defined">
            <param name="size" type="float" value="12" label="Axis label size (default = 12)"/>
            <param name="color" type="select" label="Color of axis label">
                <option value="black">Black (default)</option>
                <option value="red">Red</option>
                <option value="white">White</option>
                <option value="blue">Blue</option>
                <option value="orange">Orange</option>
                <option value="yellow">Yellow</option>
                <option value="green">Green</option>
                <option value="purple">Purple</option>
                <option value="magenta">Magenta</option>
                <option value="cyan">Cyan</option>
                <option value="grey">Grey</option>
                <option value="gold">Gold</option>
            </param>
            <param name="face" type="select" label="Font effect of axis label">
                <option value="plain">Normal (default)</option>
                <option value="bold">Bold</option>
                <option value="italic">Italic</option>
            </param>
        </when>
    </macro>
    <macro name="colors">
        <param name="colors" type="select" label="Color schemes to differentiate your groups" >
            <option value="Default">Default color scheme</option>
            <option value="YlOrRd">Yellow to orange to red (discrete, max=9 colors)</option>
            <option value="YlOrBr">Yellow to orange to brown (discrete, max=9 colors)</option>
            <option value="YlGnBu">Yellow to green to blue (discrete, max=9 colors)</option>
            <option value="YlGn">Yellow to green (discrete, max=9 colors)</option>
            <option value="Reds">Shades of red from light to dark (discrete, max=9 colors)</option>
            <option value="RdPu">Red to purple (discrete, max=9 colors)</option>
            <option value="Purples">Shades of purple from light to dark (discrete, max=9 colors)</option>
            <option value="PuRd">Purple to red (discrete, max=9 colors)</option>
            <option value="PuBuGn">Purple to blue to green (discrete, max=9 colors)</option>
            <option value="PuBu">Purple to blue(discrete, max=9 colors)</option>
            <option value="OrRd">Orange to red (discrete, max=9 colors)</option>
            <option value="Oranges">Shades of orange from light to dark (discrete, max=9 colors)</option>
            <option value="Greys">Shades of grey from light to dark (discrete, max=9 colors)</option>
            <option value="Greens">Shades of greens from light to dark (discrete, max=9 colors)</option>
            <option value="GnBu">Green to blue (discrete, max=9 colors)</option>
            <option value="BuPu">Blue to purple (discrete, max=9 colors)</option>
            <option value="BuGn">Blue to green (discrete, max=9 colors)</option>
            <option value="Blues">Shades of blue from light to dark (discrete, max=9 colors)</option>
            <option value="Set1">Set 1 - predefined color pallete (discrete, max=9 colors)</option>
            <option value="Set2">Set 2 - predefined color pallete (discrete, max=8 colors)</option>
            <option value="Set3">Set 3 - predefined color pallete (discrete, max=12 colors)</option>
            <option value="Pastel1">Pastel 1 - predefined pastel color pallete (discrete, max=9 colors)</option>
            <option value="Pastel2">Pastel 2 - predefined pastel color pallete (discrete, max=8 colors)</option>
            <option value="Paired">Paired - predefined color pallete (discrete, max=12 colors)</option>
            <option value="Dark2">Dark 2 - predefined color pallete (discrete, max=12 colors)</option>
            <option value="Accent">Accent - predefined color pallete (discrete, max=12 colors)</option>
            <option value="Spectral">Spectral - Red to yellow to purple (discrete, max=11 colors)</option>
            <option value="RdYlGn">Red to yellow to green (discrete, max=11 colors)</option>
            <option value="RdYlBu">Red to yellow to blue (discrete, max=11 colors)</option>
            <option value="RdGy">Red to grey (discrete, max=11 colors)</option>
            <option value="RdBu">Red to blue (discrete, max=11 colors)</option>
            <option value="PuOr">Purple to orange (discrete, max=11 colors)</option>
            <option value="PRGn">Purple to green (discrete, max=11 colors)</option>
            <option value="BrBG">Brown to teal (discrete, max=11 colors)</option>
        </param>
    </macro>

    <macro name="when_2ddensityplot_params" >
        <when value="2ddensityplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_3dscatterorsurface_params" >
        <when value="3dscatterorsurface">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_abline_params" >
        <when value="abline" >
            <param name="intercept" type="float" value="0" label="Intercept" />
            <param name="slope" type="float" value="0" label="Slope" />
        </when>
    </macro>
    <macro name="when_areaplot_params" >
        <when value="areaplot">
            <param name="stat" type="select" label="Stat" >
                <option value="identity" >Identity</option>
                <option value="TODO_ADD_MORE_ENTRIES" />
            </param>
            <param name="position" type="select" label="Position" >
                <option value="stack" >Stack</option>
                <option value="TODO_ADD_MORE_ENTRIES" />
            </param>
        </when>
    </macro>
    <macro name="when_barchart_params" >
        <when value="barchart" >
            <param name="width" type="integer" min="0" value="10" label="Width" />
            <param name="binwidth" type="integer" min="0" value="10" label="Bin Width" />
        </when>
    </macro>
    <macro name="when_bin2d_params" >
        <when value="bin2d" >
            <param name="stat" type="select" label="Stat" >
                <option value="bin2d" />
                <option value="TODO_ADD_MORE_ENTRIES" />
            </param>
        </when>
    </macro>
    <macro name="when_boxplot_params" >
        <when value="boxplot">
        </when>
    </macro>
    <macro name="when_bubbleplot_params" >
        <when value="bubbleplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_connectedscatterplot_params" >
        <when value="connectedscatterplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_correlogram_params" >
        <when value="correlogram">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_dendrogram_params" >
        <when value="dendrogram">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_densityplot_params" >
        <when value="densityplot">
            x, y, alpha, colour, group, linetype, size 
        </when>
    </macro>
    <macro name="when_heatmap_params" >
        <when value="heatmap">
            aes(fill = z)), x, y, alpha, color, fill, linetype, size, width
        </when>
    </macro>
    <macro name="when_histogram_params" >
        <when value="histogram">
            (binwidth = 5) x, y, alpha, color, fill, linetype, size, weight
        </when>
    </macro>
    <macro name="when_lineplot_params" >
        <when value="lineplot">
        		x, y, alpha, color, group, linetype
        </when>
    </macro>
    <macro name="when_scatterandmarginalplot_params" >
        <when value="scatterandmarginalplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_scatterplot_params" >
        <when value="scatterplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_stackedareaplot_params" >
        <when value="stackedareaplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_streamgraph_params" >
        <when value="streamgraph">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
    <macro name="when_violinplot_params" >
        <when value="violinplot">
            <!-- TODO: Populate parameters -->
        </when>
    </macro>
</macros>

<macro name="position_macro" token_selected="identity" >
  <!-- common element with multiple options -->
	<param name="position" type="select" label="position" >
        <option value="@SELECTED@" selected="true" />
        <!-- there is a slight disadvantage here that the
             token_selected argument will duplicate one of
             these options below, but this is a small price
             to pay for ease of comfort.
        -->
        <option value="identity" />
  		<option value="stack" />
        <option value="dodge2" />
        <option value="jitter" />
    </param>
</macro>
<macro name="stat_macro" token_selected="identity" >
  <!-- common element with multiple options -->
	<param name="stat" type="select" label="stat" >
        <option value="@SELECTED@" selected="true" />
        <option value="identity" />
   		<option value="sum" />
        <option value="bin" />
        <option value="bin2d" />
        <option value="boxplot" />
        <option value="contour" />
        <option value="contour_filled" />
        <option value="density" />
        <option value="density_2d" />
        <option value="density_2d_filled" />
        <option value="function" />
        <option value="binhex" />
        <option value="quantile" />
        <option value="smooth" />
        <option value="ydensity" />
        <option value="sf" />
        <option value="sf_coordinates" />
    </param>
</macro>


<macro name="when_abline">
    <expand macro="general_plot_params"/>
    <param name="intercept" type="float" value="0" label="Intercept" />
    <param name="slope" type="float" value="0" label="Slope" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
</macro>
<macro name="when_hline">
    <expand macro="general_plot_params"/>
    <param name="yintercept" type="float" value="0" label="yintercept" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
</macro>
<macro name="when_vline">
    <expand macro="general_plot_params"/>
    <param name="xintercept" type="float" value="0" label="xintercept" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
</macro>
<macro name="when_bar">
    <expand macro="general_plot_params"/>
  	<expand macro="stat_macro" token_selected="count" />
    <expand macro="position_macro" token_selected="stack" />
    <param name="width" type="float" optional="true" label="width" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_col">
    <expand macro="general_plot_params"/>
    <expand macro="position_macro" token_selected="stack" />
    <param name="width" type="float" optional="true" label="width" 
           label="Bar width. By default, set to 90% of the resolution of the data." />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_bin2d">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="bin2d" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_blank">
    <expand macro="general_plot_params"/>
  	<expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
<macro name="when_boxplot">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="boxplot" />
    <expand macro="position_macro" token_selected="dodge2" />
    <param name="outlier.colour" type="text" optional="true" label="outlier.colour" />
    <param name="outlier.color" type="text" optional="true" label="outlier.color" />
    <param name="outlier.fill" type="text" optional="true" label="outlier.fill" />
    <param name="outlier.shape" type="integer" value="19" label="outlier.shape" />
    <param name="outlier.size" type="float" value="1.5" label="outlier.size" />
    <param name="outlier.stroke" type="float" value="0.5" label="outlier.stroke" />
    <param name="outlier.alpha" type="select" label="outlier.alpha" >
          <option value="NA" selected="true"/>
          <option value="TRUE" />
          <option value="FALSE" />
    </param>  
    <param name="notch" type="select" label="notch" >
          <option value="NA" selected="true"/>
          <option value="TRUE" />
          <option value="FALSE" />
    </param>
    <param name="notchwidth" type="float" value="0.5" label="notchwidth" />
    <param name="varwidth" type="boolean" value="false" label="varwidth" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_contour">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="contour" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="bins" type="integer" optional="true" label="bins"/>
    <param name="binwidth" type="float" optional="true" label="bins" />
    <param name="breaks" type="text" value="" label="breaks" optional="true" help="breaks listed delimited by commas (e.g. 3,4,5)" >
          <expand macro="sanitize_numeric_vector" />
    </param>
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true"/>
          <option value="round" />
          <option value="square" />
    </param>
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="linemitre" type="float" value="10" label="linemitre"/>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_contour_filled">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="contour_filled" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="bins" type="integer" optional="true" label="bins"/>
    <param name="binwidth" type="float" optional="true" label="bins" />
    <param name="breaks" type="text" value="" label="breaks" optional="true" help="breaks listed delimited by commas (e.g. 3,4,5)" >
          <expand macro="sanitize_numeric_vector" />
    </param>
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_count">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="sum" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_density">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="density" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
    <param name="outline.type" type="select" label="outline.type" >
          <option value="upper" selected="true" />
          <option value="lower" />
          <option value="both" />
          <option value="full" />
    </param>
</macro>
<macro name="when_density_2d">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="density_2d" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true" />
          <option value="round" />
          <option value="square" />
    </param>
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true" />
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="linemitre" type="float" value="10" label="linemitre"/>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_density_2d_filled">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="density_2d_filled" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="contour_var", type="select" label="contour_var" >
          <option value="density" selected="true" />
          <option value="ndensity" />
          <option value="count" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_dotplot">
    <expand macro="general_plot_params"/>
    <expand macro="position_macro" token_selected="identity" />
    <param name="binwidth" type="float" optional="true" label="binwidth" />
    <param name="binaxis" type="select" label="binaxis" >
          <option value="x" selected="true" />
          <option value="y" />
    </param>
    <param name="method" type="select" label="method" >
          <option value="dotdensity" selected="true" />
          <option value="histodot" />
    </param>
    <param name="binpositions" type="select" label="binpositions" >
          <option value="bygroup" selected="true" />
          <option value="all" />
    </param>
    <param name="stackdir" type="select" label="stackdir" >
          <option value="up" selected="true" />
          <option value="down" />
          <option value="center" />
          <option value="centerwhole" />
    </param>
    <param name="stackratio" type="float" value=1 label="stackratio" />
    <param name="dotsize"  type="float" value=1 label="dotsize" />
    <param name="stackgroups" type="boolean" value="false" label="stackgroups" />
    <param name="origin" type="float" optional="true" label="origin" />
    <param name="right" type="boolean" value="true" label="right" />
    <param name="width" type="float" value="0.9" label="width"/>
    <param name="drop" type="boolean" value="false" label="drop" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_errorbarh">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_function">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="function" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_hex">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="binhex" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_freqpoly">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="bin" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_histogram">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="bin" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_jitter">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="jitter" />
    <param name="width" type="float" optional="true" label="width" />
    <param name="height" type="float" optional="true" label="height" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_crossbar">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="fatten" type="float" value="2.5" label="fatten" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_errorbar">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_linerange">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_pointrange">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="fatten" type="float" value="2.5" label="fatten" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_map">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <param name="map" type="text" value="" label="map" optional="true" help="breaks listed delimited by commas (e.g. 3,4,5)" >
          <expand macro="sanitize_numeric_vector" />
        <!-- placeholder:  no backend for dataframes as arguments exists yet... -->
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_path">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true"/>
          <option value="round" />
          <option value="square" />
    </param>
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="linemitre" type="float" value="10" label="linemitre"/>
    <param name="arrow" type="text" optional="true" label="arrow" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_line">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_step">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="direction" type="select" label="direction" >
     	  <option value="vh" selected="true" /> 
          <option value="hv" />
          <option value="mid" />          
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_point">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_polygon">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="rule" type="select" label="rule" >
     	  <option value="evenodd" selected="true" /> 
          <option value="winding" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_qq_line">
    <expand macro="general_plot_params"/>
    <param name="geom" type="text" value="path" label="geom" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="distribution" type="text" optional="true" label="distribution"/>
    <param name="dparams" type="text" optional="true" label="dparams" />
    <!-- placeholder:  no support for a list as an argument exists yet... -->
    <param name="line.p" type="text" label="line.p" optional="true" help="breaks listed delimited by commas (e.g. 3,4,5)" >
          <expand macro="sanitize_numeric_vector" />
    </param>
    <param name="fullrange" type="boolean" value="false" label="fullrange" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />

</macro>
<macro name="when_qq">
    <expand macro="general_plot_params"/>
    <param name="geom" type="text" value="point" label="geom" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="distribution" type="text" optional="true" label="distribution"/>
    <param name="dparams" type="text" optional="true" label="dparams" />
    <!-- placeholder:  no support for a list as an argument exists yet... -->
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_quantile">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="quantile" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true"/>
          <option value="round" />
          <option value="square" />
    </param>
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="linemitre" type="float" value="10" label="linemitre"/>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_ribbon">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
    <param name="outline.type" type="select" label="outline.type" >
          <option value="upper" />
          <option value="lower" />
          <option value="both" selected="true" />
          <option value="full" />
    </param>
</macro>
<macro name="when_area">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="stack" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
    <param name="outline.type" type="select" label="outline.type" >
          <option value="upper" selected="true" />
          <option value="lower" />
          <option value="both" />
          <option value="full" />
    </param>
</macro>
<macro name="when_rug">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="outside" type="boolean" value="false" label="outside" />
    <param name="sides" type="text" value="bl" label="sides" help="any of the characters trbl (eg bl)" />
    <param name="length" type="text" optional="true" label="length" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_segment">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="arrow" type="text" optional="true" label="arrow" />
    <param name="arrow.fill" type="text" optional="true" label="arrow.fill" />
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true"/>
          <option value="round" />
          <option value="square" />
    </param>
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_curve">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="curvature" type="float" value="0.5" label="curvature" />
    <param name="angle" type="float" value="90" label="angle" />
    <param name="ncp" type="integer" value="5" label="ncp" />
    <param name="arrow" type="text" optional="true" label="arrow" />
    <param name="arrow.fill" type="text" optional="true" label="arrow.fill" />
    <param name="lineend" type="select" label="lineend" >
          <option value="butt" selected="true"/>
          <option value="round" />
          <option value="square" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_smooth">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="smooth" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="method" type="text" optional="true" label="method" />
    <param name="formula" type="text" optional="true" label="formula" />
    <param name="se" type="boolean" value="false" label="se" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_spoke">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_label">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="parse" type="boolean" value="false" label="parse" />
    <param name="nudge_x" type="float" value="0" label="nudge_x" />
    <param name="nudge_y" type="float" value="0" label="nudge_y" />
    <param name="label.padding" type="text" optional="true" label="label.padding" />
    <param name="label.r" type="text" optional="true" label="label.r" />
    <param name="label.size" type="float" value="0.25" label="label.size" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_text">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="parse" type="boolean" value="false" label="parse" />
    <param name="nudge_x" type="float" value="0" label="nudge_x" />
    <param name="nudge_y" type="float" value="0" label="nudge_y" />
    <param name="check_overlap" type="boolean" value="false" label="check_overlap" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_raster">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="hjust" type="float" value="0.5" label="hjust" />
    <param name="vjust" type="float" value="0.5" label="vjust" />
    <param name="interpolate" type="boolean" value="false" label="interpolate" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_rect">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_tile">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="identity" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="linejoin" type="select" label="linejoin" >
          <option value="round" selected="true"/>
          <option value="mitre" />
          <option value="bevel" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_violin">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="ydensity" />
    <expand macro="position_macro" token_selected="dodge" />
    <param name="draw_quantiles" type="text" optional="true" label="draw_quantiles" />
    <param name="trim" type="boolean" value="true" label="trim" />
    <param name="scale" type="select" label="scale" >
          <option value="area" selected="true"/>
          <option value="count" />
          <option value="width" />
    </param>
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="orientation" type="select" label="orientation" >
     	  <option value="NA" selected="true" /> 
          <option value="x" />
          <option value="y" />
  	</param>
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_sf">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="sf" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
</macro>
<macro name="when_sf_label">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="sf_coordinates" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="parse" type="boolean" value="false" label="parse" />
    <param name="nudge_x" type="float" value="0" label="nudge_x" />
    <param name="nudge_y" type="float" value="0" label="nudge_y" />
    <param name="label.padding" type="text" optional="true" label="label.padding" />
    <param name="label.r" type="text" optional="true" label="label.r" />
    <param name="label.size" type="float" value="0.25" label="label.size" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
    <param name="fun.geometry" type="text" optional="true" label="fun.geometry" />
</macro>
<macro name="when_sf_text">
    <expand macro="general_plot_params"/>
    <expand macro="stat_macro" token_selected="sf_coordinates" />
    <expand macro="position_macro" token_selected="identity" />
    <param name="parse" type="boolean" value="false" label="parse" />
    <param name="nudge_x" type="float" value="0" label="nudge_x" />
    <param name="nudge_y" type="float" value="0" label="nudge_y" />
    <param name="check_overlap" type="boolean" value="false" label="check_overlap" />
    <param name="na.rm" type="boolean" value="false" label="na.rm" />
    <param name="show.legend" type="boolean" optional="true" label="show.legend" />
    <param name="inheret.aes" type="boolean" value="true" label="inheret.aes" />
    <param name="fun.geometry" type="text" optional="true" label="fun.geometry" />
</macro>

<!-- Sanitizers -->
<macro name="sanitize_title">
    <sanitizer invalid_char="">
        <valid initial="string.letters,string.digits" >
            <add value=" " />
            <add value="_" />
        </valid>
    </sanitizer>
</macro>
<macro name="sanitize_regex" >
    <sanitizer invalid_char="">
        <valid initial="string.letters,string.digits">
            <add value="!"/>
            <add value="="/>
            <add value="-"/>
            <add value="."/>
            <add value="*"/>
            <add value="?"/>
            <add value="+"/>
            <add value="\\"/>
            <add value="_"/>
            <add value="|"/>
            <add value="&#91;"/> <!-- left square bracket, e.g subselecting from vec[1] -->
            <add value="&#93;"/> <!-- right square bracket -->
            <add value="&#40;"/> <!-- left parenthesis -->
            <add value="&#41;"/> <!-- right parenthesis -->
        </valid>
    </sanitizer>
</macro>
<macro name="sanitize_numeric_vector" >
    <sanitizer invalid_char="">
        <valid initial="string.digits">
            <add value=","/>
        </valid>
    </sanitizer>
</macro>
<macro name="sanitize_string_vector" >
    <sanitizer invalid_char="">
        <valid initial="string.letters,string.digits">
            <add value=","/>
            <add value="_"/>
            <add value="-"/>
            <add value="."/>
        </valid>
    </sanitizer>
</macro>