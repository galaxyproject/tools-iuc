<tool id="qiime_pick_rep_set" name="pick rep set" version="@WRAPPER_VERSION@.0">
    <description>Pick representative set of sequences</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <version_command>pick_rep_set.py --version</version_command>
    <command detect_errors="aggressive"><![CDATA[
        pick_rep_set.py
            -i '$input_file'
            -m '$rep_set_picking_method'
            -s '$sort_by'
            #if str($fasta_file) != 'None':
             -f '$fasta_file'
            #end if
             -o '$result_fp' -l rep_set.log
            #if str($reference_seqs_fp) != 'None':
             -r '$reference_seqs_fp'
            #end if
    ]]></command>
    <inputs>
        <param name="input_file" type="data" format="tabular" label="-i/--input_file: Path to input otu mapping file [REQUIRED]"  optional="False"/>
        <param name="fasta_file" type="data" format="fasta" optional="True" label="-f/--fasta_file: Path to input fasta file [REQUIRED if not picking against a reference set; default: None]"/>
        <param label="-m/--rep_set_picking_method: Method for picking representative sets.  Valid choices are random, longest, most_abundant, first [default: first (first chooses cluster seed when picking otus with uclust)]" name="rep_set_picking_method" optional="True" type="select">
            <option value="random">random</option>
            <option value="longest">longest</option>
            <option value="most_abundant">most_abundant</option>
            <option value="first">first</option>
        </param>
        <param label="-s/--sort_by: sort by otu or seq_id [default: otu]" name="sort_by" optional="True" type="select">
            <option value="otu">otu</option>
            <option value="seq_id">seq_id</option>
        </param>
        <param label="-r/--reference_seqs_fp: collection of preferred representative sequences [default: None]" name="reference_seqs_fp" optional="True" type="data"/>
    </inputs>
    <outputs>
        <data format="fasta" name="result_fp" label="${tool.name} on ${on_string}: rep_set_seqs.fasta"/>
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help><![CDATA[
**What it does**

After picking OTUs, you can then pick a representative set of sequences. For each OTU, you will end up with one sequence that can be used in subsequent analyses.

The output from pick_rep_set.py is a single FASTA file containing one sequence per OTU. The FASTA header lines will be the OTU identifier (from here on used as the unique sequence identifier) followed by a space, followed by the sequence identifier originally associated with the representative sequence. The name of the output FASTA file will be <input_sequences_filepath>_rep_set.fasta by default, or can be specified via the "-o" parameter.
    ]]></help>
    <citations>
        <expand macro="citations"/>
    </citations>
</tool>
