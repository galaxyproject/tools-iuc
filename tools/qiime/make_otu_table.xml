<?xml version="1.0" ?>
<tool id="1-9_make_otu_table" name="make otu table" version="1.9.0">
    <description>Make OTU table</description>
    <macros>
        <import>macros.xml</import>
    </macros>

    <expand macro="requirements" />
    <command>


make_otu_table.py -i $otu_map_fp -o $output_biom_fp
#if str($taxonomy) != 'None':
 -t $taxonomy
#end if

#if str($exclude_otus_fp) != 'None':
 -e $exclude_otus_fp
#end if
</command>
    <inputs>
        <param label="-i/--otu_map_fp: path to the input OTU map (i.e., the output from pick_otus.py)" name="otu_map_fp" optional="False" type="data"/>
        <param label="-t/--taxonomy: Path to taxonomy assignment, containing the assignments of taxons to sequences (i.e., resulting txt file from assign_taxonomy.py) [default: None]" name="taxonomy" optional="True" type="data"/>
        <param label="-e/--exclude_otus_fp: path to a file listing OTU identifiers that should not be included in the OTU table (e.g., the output of identify_chimeric_seqs.py) or a fasta file where seq ids should be excluded (e.g., failures fasta file from align_seqs.py)" name="exclude_otus_fp" optional="True" type="data"/>
    </inputs>
    <outputs>
        <data format="txt" name="output_biom_fp" label="otu_table.biom"/>
    </outputs>
    <help><![CDATA[
        The script make_otu_table.py tabulates the number of times an OTU is found in each sample, and adds the taxonomic predictions for each OTU in the last column if a taxonomy file is supplied.
The output of make_otu_table.py is a biom file, where the columns correspond to Samples and rows correspond to OTUs and the number of times a sample appears in a particular OTU.
    ]]>
    </help>
</tool>
