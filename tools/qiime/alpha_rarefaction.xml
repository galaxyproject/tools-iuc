<?xml version="1.0" ?>
<tool id="1-9_alpha_rarefaction" name="alpha rarefaction" version="1.9.0">
	<description>A workflow script for performing alpha rarefaction</description>
	<requirements>
		<requirement type="package">qiime</requirement>
	</requirements>
	<command>

alpha_rarefaction.py -i $otu_table_fp -m $mapping_fp -o $output_dir.files_path

#if str($parameter_fp) != 'None':
 -p $parameter_fp
#end if

#if $num_steps:
 -n $num_steps
#end if

#if str($tree_fp) != 'None':
 -t $tree_fp
#end if

#if $min_rare_depth:
 --min_rare_depth=$min_rare_depth
#end if

#if $max_rare_depth:
 -e $max_rare_depth
#end if
;
mv $output_dir.files_path/alpha_rarefaction_plots/* $output_dir.files_path/
</command>
	<inputs>
		<param label="-i/--otu_table_fp: the input otu table [REQUIRED]" name="otu_table_fp" optional="False" type="data"/>
		<param label="-m/--mapping_fp: path to the mapping file [REQUIRED]" name="mapping_fp" optional="False" type="data"/>
		<param label="-p/--parameter_fp: path to the parameter file, which specifies changes to the default behavior. See http://www.qiime.org/documentation/file_formats.html#qiime-parameters . [if omitted, default values will be used]" name="parameter_fp" optional="True" type="data"/>
		<param default="10" label="-n/--num_steps: number of steps (or rarefied OTU table sizes) to make between min and max counts [default: 10]" name="num_steps" optional="True" type="integer"/>
		<param label="-t/--tree_fp: path to the tree file [default: None; REQUIRED for phylogenetic measures]" name="tree_fp" optional="True" type="data"/>
		<param default="10" label="--min_rare_depth: the lower limit of rarefaction depths [default: 10]" name="min_rare_depth" optional="True" type="integer"/>
		<param label="-e/--max_rare_depth: the upper limit of rarefaction depths [default: median sequence/sample count]" name="max_rare_depth" optional="True" type="integer"/>
	</inputs>
	<outputs>
		<data format="html" from_work_dir="dataset_*_files/*.html" name="output_dir" label="alpha_rarefaction"/>
	</outputs>
	<help>
The steps performed by this script are: Generate rarefied OTU tables; compute alpha diversity metrics for each rarefied OTU table; collate alpha diversity results; and generate alpha rarefaction plots.
The primary interface for the results will be OUTPUT_DIR/alpha_rarefaction_plots/rarefaction_plots.html where OUTPUT_DIR is the value you specify with -o.  You can open this in a web browser for interactive alpha rarefaction plots.</help>
</tool>
