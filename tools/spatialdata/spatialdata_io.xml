<tool id="spatialdata_io" name="SpatialData" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>load common spatial omics formats into SpatialData</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[

    ]]></command>
    <configfiles>
        <configfile name="spdata_script"><![CDATA[

#if $method_condi.method == 'merscope':
## MERSCOPE
python -m spatialdata_io merscope
    -o 'spatialdata'
    -i 'region'
    --vpt-outputs 'vpt_outputs'
    --z-layers $z_layers
    --region-name 'region'
    --slide-name $slide_name
    --backend 'rioxarray'
    --transcripts $transcripts
    --cells-boundaries $cells_boundaries
    --cells-table $cells_table
    --mosaic-images $mosaic_images

#end if
## Final
zip -j spatialdata.spatialdata.zip spatialdata/
        ]]></configfile>
    </configfiles>
    <inputs>
        <conditional name="method.condi">
            <param name="method" type="select" label="Spatial Technology">
                <!-- <option value="codex">CODEX</option> -->
                <!-- <option value="cosmx">CosMx</option>
                <option value="curio">Curio Bioscience</option>
                <option value="dbit">DBiT-seq</option>
                <option value="generic">Generic</option>
                <option value="iss">Sanger ISS</option>
                <option value="macsima">MACSima</option>
                <option value="mcmicro">MCMICRO</option> -->
                <option value="merscope">MERSCOPE</option>
                <!-- <option value="seqfish">seqFISH</option>
                <option value="steinbock">steinbock</option>
                <option value="stereoseq">Stereo-seq</option>
                <option value="visium">10x Genomics Visium</option>
                <option value="visium_hd">10x Genomics Visium HD</option>
                <option value="xenium">10x Genomics Xenium</option> -->
            </param>
            <!-- <when value="codex">
            </when> -->
            <!-- <when value="cosmx">
            </when>
            <when value="curio">
            </when>
            <when value="dbit">
            </when>
            <when value="generic">
            </when>
            <when value="iss">
            </when>
            <when value="macsima">
            </when>
            <when value="mcmicro">
            </when> -->
            <when value="merscope">
                <conditional name="image_condi">
                    <param name="load_image" type="select" label="Load mosaic image?">
                        <option value="yes">Load images</option>
                        <option value="no">Do not load images</option>
                    </param>
                    <when value="yes">
                        <param argument="--z_layers" type="text" value="3" optional="false" label="Indices of the z-layers to consider.">
                            <expand macro="sanitize_digits"/>
                        </param>
                        <param argument="--mosaic-images" type="data" format="tiff" multiple="true" label="MEROSCOPE tiff images"/>
                    </when>
                    <when value="no"/>
                </conditional>
                <conditional name="cell_table_condi">
                    <param name="load_cell_table" type="select" label="Load cell table?">
                        <option value="yes">Load cell table</option>
                        <option value="no">Do not load cell table</option>
                    </param>
                    <when value="yes">
                    </when>
                    <when value="no"/>
                </conditional>
            </when>
            <!-- <when value="seqfish">
            </when>
            <when value="steinbock">
            </when>
            <when value="stereoseq">
            </when>
            <when value="visium">
            </when>
            <when value="visium_hd">
            </when>
            <when value="xenium">
            </when> -->
        </conditional>
    </inputs>
    <outputs>

    </outputs>
    <tests>

    </tests>
    <help><![CDATA[


    ]]></help>
    <expand macro="citations" />
</tool>