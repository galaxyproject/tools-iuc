<macros>
  <token name="@TOOL_VERSION@">0.0.3</token>
  <token name="@HELP@">More information can be found at https://scanpy.readthedocs.io</token>
  <token name="@PLOT_OPTS@">
#if '${do_plotting.plot}'
                  -P output.png
                  --projection '${do_plotting.projection}'
                  --components '${do_plotting.components}'
    #if $do_plotting.color_by
                  --color-by '${do_plotting.color_by}'
    #end if
    #if $do_plotting.groups
                  --group '${do_plotting.groups}'
    #end if
    #if $do_plotting.use_raw
                  --use-raw
    #end if
    #if $do_plotting.palette
                  --palette '${do_plotting.palette}'
    #end if
    #if $do_plotting.show_edges
                  --edges
    #end if
    #if $do_plotting.show_arrows
                  --arrows
    #end if
    #if not $do_plotting.color_order
                  --no-sort-order
    #end if
    #if $do_plotting.omit_frame
                  --frameoff
    #end if
#end if
  </token>
  <xml name="requirements">
    <requirements>
      <requirement type="package" version="1.3.2">scanpy</requirement>
      <requirement type="package" version="0.0.3">scanpy-scripts</requirement>
      <yield/>
    </requirements>
  </xml>
  <xml name="citations">
    <citations>
      <citation type="doi">10.1186/s13059-017-1382-0</citation>
      <citation type="bibtex">
	@misc{githubscanpy-scripts,
	author = {LastTODO, FirstTODO},
	year = {2018},
	title = {scanpy-scripts},
	publisher = {GitHub},
	journal = {GitHub repository},
	url = {https://github.com/ebi-gene-expression-group/scanpy-scripts},
      }</citation>
      <yield />
    </citations>
  </xml>
  <xml name="input_object_params">
    <param name="input_obj_file" argument="--input-object-file" type="data" format="h5" label="Input object in hdf5 format"/>
    <param name="input_format" argument="--input-format" type="select" label="Format of input object">
      <option value="anndata" selected="true">AnnData format hdf5</option>
      <option value="loom">Loom format hdf5, current support is incomplete</option>
    </param> 
  </xml>
  <xml name="output_object_params">
    <param name="output_format" argument="--output-format" type="select" label="Format of output object">
      <option value="anndata" selected="true">AnnData format hdf5</option>
      <option value="loom">Loom format hdf5, current support is defective</option>
    </param> 
  </xml>
  <xml name="output_plot_params">
    <param name="color_by" argument="--color-by" type="text" value="n_genes" label="Color by attributes, comma separated strings"/>
    <param name="groups" argument="--groups" type="text" optional="ture" label="Restrict plotting to named groups, comma separated strings"/>
    <param name="projection" argument="--projection" type="select" label="Plot projection">
      <option value="2d" selected="true">2D</option>
      <option value="3d">3D</option>
    </param>
    <param name="components" argument="--components" type="text" value="1,2" label="Components to plot, comma separated integers"/>
    <param name="palette" argument="--palette" type="text" optional="true" label="Palette"/>
    <param name="use_raw" argument="--use-raw" type="boolean" checked="false" label="Use raw attributes if present"/>
    <param name="show_edges" argument="--edges" type="boolean" checked="false" label="Show edges"/>
    <param name="show_arrows" argument="--arrows" type="boolean" checked="false" label="Show arrows"/>
    <param name="color_order" argument="--no-sort-order" type="boolean" checked="true" label="Element with high color-by value plot on top"/>
    <param name="omit_frame" argument="--frameoff" type="boolean" checked="false" label="Show frame"/>
  </xml>
</macros>
