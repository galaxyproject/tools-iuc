<tool id="biscot" name="BiSCoT" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="20.01">
    <description>Bionano scaffolding correction tool</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
        biscot
        --cmap-ref '${cmap_ref}'
        --cmap-1 '${cmap_1}'
        --xmap-1 '${xmap_1}'
        --key $key
        --contigs $contigs
        #if $secondary_map.cmap_2
            --cmap-2 '${cmap_2}'
            --xmap-2 '${xmap_2}'
        #end if
        #if $xmap_2enz
            --xmap-2enz '${xmap_2enz}'
        #end if
        $aggressive
        $only_confirmed_pos
    ]]>    </command>
    <inputs>
        <param argument="--cmap-ref" type="data" format="cmap" label="Reference CMAP file" help="This file describes the positions of enzymatic labelling sites on the reference genome" />
        <param argument="--cmap-1" type="data" format="cmap" label="Query CMAP file" help="This file describes the positions of enzymatic labelling sites on the contigs" />
        <param argument="--xmap-1" type="data" format="xml,txt" label="XML configuration file" help="This file describes the alignments of contig labels on the anchor" />
        <param argument="--contigs" type="data" format="fasta" label="Contigs file" help="Contigs file (FASTA) that was scaffolded by the Bionano scaffold" />
        <param argument="--key" type="data" format="tabular" label="Bionano key file" help="Bionano key file giving the correspondance between maps and contigs" />
        <section name="secondary_map" title="Secondary map">
            <param argument="--cmap-2" type="data" format="cmap" optional="true" label="Query CMAP file" help="This file describes the positions of enzymatic labelling sites on the contigs" />
            <param argument="--xmap-2" type="data" format="xml" optional="true" label="XML configuration file" help="This file describes the alignments of contig labels on the anchor" />
        </section>
        <param argument="--xmap-2enz" type="data" format="xml" optional="true" label="Two enzymes XML configuration file" help="This argument is used to provide the final XMAP file containing 
            the mappings of labels of both enzymes. This argument is useful (and recommended) to ensure that no mapping has been missed inside one of the individual XMAP file" />
        <param argument="--aggressive" type="boolean" truevalue="--aggressive" falsevalue="" checked="false" 
            label="Enable BLAT phase" help=" enables the sequence similarity scaffolding. In a first phase, BiSCoT will search similarities between contigs based on label mappings. If this parameter is set, 
                BiSCoT will search for sequence similarity to close gaps created by the first step" />
        <param argument="--only-confirmed-pos" type="boolean" truevalue="--only-confirmed-pos" falsevalue="" checked="false" 
            label="Only confirmed positions" help="To be retained, an alignment position in --xmap-1 or --xmap-2 has to be present in --xmap-2enz" />
    </inputs>
    <outputs>
        <data name="tmp" format="txt" label="${tool.name} on ${on_string}: temp"/>
  </outputs>
    <tests>

    </tests>
    <help><![CDATA[
    

    ]]>    </help>
    <expand macro="citations"/>
</tool>
