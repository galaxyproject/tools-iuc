<tool id="hal_halvalidate" name="halValidate" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>checks if a HAL file is valid</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/> 
    <expand macro="stdio"/>
    <command detect_errors="aggressive"><![CDATA[
        halValidate
            #if $genome:
                --genome '$genome'
            #end if
            '$input_hal' > '$out_file'
    ]]></command>
    <inputs>
        <expand macro="input_hal"/>
        <param argument="--genome" type="text" value="" optional="true" label="Specific genome" help="Specific genome to validate instead of entire file">
            <expand macro="sanitizer_default"/>
            <expand macro="validator_trim"/>
        </param>          
    </inputs>
    <outputs>
        <data name="out_file" format="txt" label="${tool.name} on ${on_string}: Validation ${genome}"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_hal" value="halTest.hal"/>
            <output name="out_file" ftype="txt">
                <assert_contents>
                    <has_line line="File valid"/>
                    <has_n_lines n="2"/>
                </assert_contents>
            </output>
        </test>
        <test expect_num_outputs="1">
            <param name="input_hal" value="halTest.hal"/>
            <param name="genome" value="Genome_0"/>
            <output name="out_file" ftype="txt">
                <assert_contents>
                    <has_line line="File valid"/>
                    <has_n_lines n="2"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[
halValidate checks the structural and metadata integrity of a HAL file. 
A HAL file is needed as input, and the tool reports a simple text message indicating whether the file is valid or not. 
It can run a full file scan or limit the check to a single genome. 

Use it to confirm that a HAL database is readable, consistent, and not corrupted before running downstream analyses.
    ]]></help>
    <expand macro="citation"/>
    <expand macro="creator"/>
</tool>