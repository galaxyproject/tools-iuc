<tool id="hal_halUpdateBranchLengths" name="halUpdateBranchLengths" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>updates the branch lengths of a tree</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/> 
    <expand macro="stdio"/>
    <command detect_errors="aggressive"><![CDATA[
        ## Copy input HAL to ensure that it is not modified.
        cp '$input_hal' writable_hal.hal && 
        halUpdateBranchLengths
            writable_hal.hal '$newickTree' &&
        ## echo 'ok' to check it with assert_stdout.
        echo 'ok'
    ]]></command>
    <inputs>
        <expand macro="input_hal"/>
        <param name="newickTree" type="text" value="" label="Newick Tree" help="Newick tree (must be identical, except for the branch lengths)">
            <expand macro="sanitizer_default"/>
            <expand macro="validator_newick"/>
        </param>
    </inputs>
    <outputs>
        <data name="out_file" format="hal" label="${tool.name} on ${on_string}" from_work_dir="writable_hal.hal"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_hal" value="halTest.hal"/>
            <param name="newickTree" value="(Genome_1:2,Genome_2:2,Genome_3:1)Genome_0;"/>
            <assert_stdout>
                <has_line line="ok"/>
            </assert_stdout>
        </test>
    </tests>
    <help><![CDATA[
halUpdateBranchLengths updates the branch lengths stored in a HAL alignment using values provided by a given external Newick tree. 
The topology of the Newick tree must exactly match the topology of the tree already stored in the HAL file. 
Only branch lengths are replaced.

A new HAL file is created as output instead of modifying the input file.
    ]]></help>
    <expand macro="citation"/>
    <expand macro="creator"/>
</tool>