<tool id="hal_hal2paf" name="hal2paf" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>exports pairwise alignment to PAF</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/> 
    <expand macro="stdio"/>
    <command detect_errors="aggressive"><![CDATA[
        hal2paf 
            #if $inputFormat == "mmap":
                --format 'mmap'
            #end if
            #if $rootGenome:
                --rootGenome '$rootGenome'
            #end if
            $onlySequenceNames
            '$input_hal' > '$out_paf'
    ]]></command>
    <inputs>
        <expand macro="input_hal"/>        
        <expand macro="hal_backend_format"/>   
        <param argument="--rootGenome" type="text" value="" optional="true" label="Root genome" help="Process only genomes belonging to the subtree rooted at the chosen root genome">
            <expand macro="sanitizer_default"/>
            <expand macro="validator_trim"/>
        </param>
        <param argument="--onlySequenceNames" type="boolean" truevalue="--onlySequenceNames" falsevalue="" checked="false" label="Only sequence names" help="Use only sequence names for output names. By default, the UCSC convention of Genome.Sequence is used"/>  
    </inputs>
    <outputs>
        <data format="paf" label="${tool.name} on ${on_string}: PAF" name="out_paf"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_hal" value="halTest.hal"/>
            <output name="out_paf" file="hal2paf_output.paf"/>
        </test>
        <test expect_num_outputs="1">
            <param name="input_hal" value="halTest.hal"/>
            <param name="rootGenome" value="Genome_0"/>
            <param name="onlySequenceNames" value="true"/>
            <output name="out_paf" file="hal2paf_rootGenome_onlySequenceNames_output.paf"/>
        </test>
    </tests>
    <help><![CDATA[
hal2paf exports each branch of an input HAL file as a pairwise alignment in PAF format. 
For every parent child relationship in the HAL tree, the tool writes PAF records representing the ungapped alignments between those two genomes. 
The output contains no softclips because HAL stores only aligned blocks. 
Processing can be limited to the subtree rooted at a chosen genome. 
Output naming can use the default Genome.Sequence convention or simple sequence names only.
    ]]></help>
    <expand macro="citation"/>
    <expand macro="creator"/>
</tool>