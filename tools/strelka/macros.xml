<macros>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">strelka</requirement>
            <requirement type="package" version="1.9">samtools</requirement>
            <yield/>
        </requirements>
    </xml>

	<token name="@TOOL_VERSION@">2.9.10</token>

	<xml name="citations">
        <citations>
            <citation type="doi">10.1038/s41592-018-0051-x</citation>
        </citations>
    </xml>

    <token name="@RUN_WORKFLOW@">
    	./results/runWorkflow.py
            -m local
            -j \${GALAXY_SLOTS:-2}
            -g \${GALAXY_MEMORY_GB:-8}        
    </token>

    <token name="@DESCRIPTION@">small variant caller</token>

    <token name="@COMMAND_INIT@">
        ln -s '$input_ref' ./input_ref.fasta &amp;&amp;
        samtools faidx ./input_ref.fasta &amp;&amp;
   	</token>

    <token name="@HELP_HEADER@">
**What it does**

Strelka2 is a fast and accurate small variant caller optimized for analysis of germline variation in small cohorts (Strelka Germline) and somatic variation in tumor/normal sample pairs (Strelka Somatic). The germline caller employs an efficient tiered haplotype model to improve accuracy and provide read-backed phasing, adaptively selecting between assembly and a faster alignment-based haplotyping approach at each variant locus. The germline caller also analyzes input sequencing data using a mixture-model indel error estimation method to improve robustness to indel noise. The somatic calling model improves on the original Strelka method for liquid and late-stage tumor analysis by accounting for possible tumor cell contamination in the normal sample. A final empirical variant re-scoring step using random forest models trained on various call quality features has been added to both callers to further improve precision.

More information are available on https://github.com/Illumina/strelka.

**Parameter**
    </token>

        <token name="@HELP_PARAMETER@">

--referenceFasta    samtools-indexed reference fasta file

----

*Advanced parameter*

--indelCandidates   Specify a VCF of candidate indel alleles. These alleles are always evaluated but only reported in the output when they are inferred to exist in the sample. The VCF must be tabix indexed. All indel alleles must be left-shifted/normalized, any unnormalized alleles will be ignored. This option may be specified more than once, multiple input VCFs will be merged.
--forcedGT  Specify a VCF of candidate alleles. These alleles are always evaluated and reported even if they are unlikely to exist in the sample. The VCF must be tabix indexed. All indel alleles must be left- shifted/normalized, any unnormalized allele will trigger a runtime error. This option may be specified more than once, multiple input VCFs will be merged. Note that for any SNVs provided in the VCF, the SNV site will be reported (and for gVCF, excluded from block compression), but the specific SNV alleles are ignored.
--exome     Set options for exome input: note in particular that this flag turns off high-depth filters
--targeted  Set options for other targeted input: note in particular that this flag turns off high-depth filters
--callRegions   Optionally provide a bgzip-compressed/tabix-indexed BED file containing the set of regions to call. No VCF output will be provided outside of these regions. The full genome will still be used to estimate statistics from the input (such as expected depth per chromosome). Only one BED file may be specified.  
    </token>
</macros>