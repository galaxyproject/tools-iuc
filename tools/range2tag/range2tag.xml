<?xml version="1.0" encoding="UTF-8"?>
<tool id="range2tag" name="Duplex Sequencing Analysis: range2tag" version="1.0.0">
    <description>Tool that extracts tags of reads that are within user-specified regions</description>
    <requirements>
        <requirement type="package" version="2.7">python</requirement>
        <requirement type="package" version="1.13.3">numpy</requirement>
    </requirements>
    <command>
        python2 '$__tool_directory__/range2tag.py' '$file1' '$file2' '$output'
    </command>
    <inputs>
        <param name="file1" type="data" format="sam" label="Dataset 1: SAM file with aligned reads." optional="false" help="SAM File with reads aligned to reference."/>
        <param name="file2" type="data" format="txt" label="Dataset 2: TXT file with start and stop positions of regions." optional="false" help="Tab delimited TXT file with start and stop positions of regions."/>
    </inputs>
    <outputs>
        <data name="output" format="txt" />
    </outputs>
    <tests>
        <test>
            <param name="file1" value="test_data.sam"/>
            <param name="file2" value="ranges.txt"/>
            <output name="output" file="output_data.txt"/>
        </test>
    </tests>
    <help> <![CDATA[
**What it does**
        
    This tool takes a SAM file and a TXT file with start and stop positions as input and prints all tags of reads that overlap with regions to user specified output file.
               
        
**Input**
        
    **Dataset 1:** SAM file of aligned reads.
    
    **Dataset 2:** Tab delimited TXT file with start and stop positions.
    
    +-------------+--------+
    | 90          | 633    |
    +-------------+--------+
    | 659         | 1140   |
    +-------------+--------+
    | 1144        | 1561   |
    +-------------+--------+ 
    
    
**Output**
        
    The output is a blank delimited TXT file of tags of all reads that overlap the user-specified regions with start_stop in the first column and the tag in the second column.
    
    +-----------+------------------------------+
    | 87_636    | AAATCAAAGTATGAATGAAGTTGCCT   |
    +-----------+------------------------------+
    | 87_636    | AAATTCATAGCATTAATTTCAACGGG   |
    +-----------+------------------------------+
    | 656_1143  | GGGGCAGCCATATTGGCAATTATCAT   |
    +-----------+------------------------------+
        
**About Author**
        
    Author: Gundula Povysil, MD, PhD
    
    Department: Institute of Bioinformatics, Johannes Kepler University Linz, Austria
    
    Contact: gpovysil@gmail.com
        
        ]]> 

    </help>
    <citations>
        <citation type="bibtex">
            @misc{duplex,
            author = {Heinzl, Monika},
            year = {2018},
            title = {Development of algorithms for the analysis of duplex sequencing data}
         }
        </citation>
    </citations>
</tool>