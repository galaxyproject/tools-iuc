<tool id="seaborn_pairgrid" name="seaborn pair-wise scatterplot" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="20.01" license="MIT">
    <description>scatterplot matrix of all-vs-all column combinations</description>
    <macros>
        <import>macros.xml</import>
    </macros>

    <expand macro="edam"/>
    <expand macro="requirements"/>
    <expand macro="creator" />

    <command detect_errors="exit_code"><![CDATA[
        python3 "${run_script}"
    ]]></command>

    <configfiles>
        <configfile name="run_script"><![CDATA[
@INIT@

from scipy.stats import gaussian_kde

def scatter_density(x, y, **kwargs):
    kwargs.pop('color')
    # Calculate the point density
    xy = np.vstack([x, y])
    z = gaussian_kde(xy)(xy)
    plt.scatter(x, y, c=z, cmap="jet", **kwargs)


g = sns.PairGrid(data)
g.map_lower(sns.regplot, scatter_kws=dict(s=4))
g.map_lower(sns.kdeplot, levels=4, color=".2")
g.map_upper(scatter_density, s=6)
g.map_diag(sns.histplot)

plt.savefig(f"{output_file}", format=output_format, dpi=300)
        ]]></configfile>
    </configfiles>
    <inputs>
        <expand macro="inputs"/>
        <expand macro="transformation"/>
    </inputs>
    <outputs>
        <data name="output_file" format="png" label="${tool.name} on ${on_string}" />
    </outputs>
    <tests>
        <!-- Hint: You can use [ctrl+alt+t] after defining the inputs/outputs to auto-scaffold some basic test cases. -->
    </tests>
    <help><![CDATA[

.. class:: infomark

**What it does**

TODO: Fill in help in reStructuredText format (https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html)

Usage
.....


**Input**


**Output**


    ]]></help>
    <expand macro="citation"/>
</tool>