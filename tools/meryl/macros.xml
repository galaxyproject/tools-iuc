<macros>
    <token name="@TOOL_VERSION@">1.4.1</token>
    <token name="@GALAXY_TOOL_VERSION@">galaxy</token>
    <token name="@SUFFIX_VERSION@">0</token>
    <token name="@PROFILE@">22.01</token>
    <xml name="edam_ontology">
        <edam_topics>                                                                                  
            <edam_topic>topic_0196</edam_topic>
        </edam_topics>
        <edam_operations>
            <edam_operation>operation_0525</edam_operation>
        </edam_operations>
    </xml>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="1.1">merqury</requirement>
            <requirement type="package" version="@TOOL_VERSION@">meryl</requirement>
            <requirement type="package" version="1.34">tar</requirement>
            <requirement type="package" version="2.8">pigz</requirement>
        </requirements>
    </xml>
    <xml name="kmer_param">
        <conditional name="options_kmer_size">
            <param name="kmer_size" type="select" label="K-mer size selector">
                <option value="provide">Set a k-mer size</option>
                <option value="estimate">Estimate the best k-mer size</option>
            </param>
            <when value="provide">
                <param name="input_kmer_size" type="integer" min="1" value="" label="K-mer size" help="For a human genome, the best k-mer size is k=21 for both haploid (3.1G) or diploid (6.2G).."/>
            </when>
            <when value="estimate">
                <param name="genome_size" type="integer" min="1000" max="70000000000" value="1000" label="Genome size" help="Haploid genome size or diploid genome size, depending on what we evaluate. In bp. Only required if the k-mer size is not provided."/>
                <param name="collision_rate" type="float" min="0.0001" max="0.01" value="0.001" label="Tolerable collision rate" help="Tolerable collision rate. By default is 0.001."/>
            </when>
        </conditional>
    </xml>
    <xml name="meryldb_archive_assumptions">
        <has_archive_member path="^[^/]+.meryl$" n="1"/>  <!-- folder also counts -->
        <has_archive_member path="[^/]+.meryl/merylIndex" n="1" all="true">
            <has_size min="1"/>
        </has_archive_member>
        <has_archive_member path="[^/]+.meryl/.*\.merylIndex" n="64" all="true">
            <has_size min="1"/>
        </has_archive_member>
        <has_archive_member path="[^/]+.meryl/.*\.merylData" n="64" all="true">
            <!-- <has_size min="1"/> seems to be 0 sometimes -->
        </has_archive_member>
        <has_archive_member path=".*" n="130"/>
    </xml>
    <xml name="citations">
        <citations>
            <citation type="bibtex">                                                                   
                @misc{githubMeryl,                                                                 
                author = {Arang Rhie, Brian P. Walez, Sergey Koren, Adam M. Phillippy},
                year = {2020},                                                                 
                title = {Meryl},                                                        
                publisher = {GitHub},
                journal = {GitHub repository},                                               
                url = {https://github.com/marbl/meryl},                        
                }                                                                    
            </citation>
        </citations>
    </xml>
</macros>
