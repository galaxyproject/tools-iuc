<tool id="nextclade_dataset_get" name="Get Nextclade Dataset" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.0">
    <description>Fetch a Nextclade dataset</description>
    <macros>
        <import>macros.xml</import>
        <import>generated_macros.xml</import>
        <token name="@VERSION_SUFFIX@">0</token>
    </macros>   
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">nextclade</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        nextclade dataset get
            --name '$dataset_name'
            --output-zip '$output_dataset'
    ]]></command>
    <inputs>
        <param name="dataset_name" type="select" label="Organism (dataset) name" 
            help="Select a dataset to download. The dataset will be downloaded as a ZIP file containing the reference sequence, annotation and configuration.">
            <expand macro="dataset_selector" />
        </param>
    </inputs>
    <outputs>
        <data name="output_dataset" format="zip" label="Output dataset ZIP file" />
    </outputs>
    <tests>
        <!-- test1 -->
        <test>
            <param name="dataset_name" value="nextstrain/yellow-fever/prM-E"/>
            <output name="output_dataset">
                <assert_contents>
                    <has_text text="CHANGELOG.md" />
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

**What it does**

Nextclade_ assigns clades, calls mutations and performs sequence quality checks on viral genome sequences.
It does this using datasets that contain reference sequences, annotations and pathogen specific
configuration files.

This tool downloades a Nextclade dataset (compressed as a ZIP file).

.. _Nextclade: https://github.com/nextstrain/nextclade
    ]]></help>
    <expand macro="citations"/>
</tool>