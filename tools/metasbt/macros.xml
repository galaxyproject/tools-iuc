<macros>
    <token name="@TOOL_VERSION@">0.1.5</token>
    <token name="@GALAXY_VERSION@">1</token>
    <token name="@PROFILE@">24.00</token>

    <xml name="creator">
        <creator>
            <person givenName="Fabio" familyName="Cumbo"
                    url="https://cumbof.github.io/"
                    email="fabio.cumbo@gmail.com" />

            <person givenName="Daniel" familyName="Blankenberg"
                    url="https://www.lerner.ccf.org/computational-medicine/blankenberg/"
                    email="blanked2@ccf.org" />
        </creator>
    </xml>

    <xml name="requirements">
        <requirements>
            <requirement type="package" version="4.9">sed</requirement>
            <requirement type="package" version="@TOOL_VERSION@">metasbt</requirement>
        </requirements>
    </xml>

    <xml name="database">
        <conditional name="database_selection">
            <param name="source" type="select"
                    label="Database source"
                    help="Public databases are hosted on the Galaxy CVMFS.">
                <option value="cvmfs" selected="true">Use a public database</option>
                <option value="history">Use a database from the history</option>
            </param>

            <when value="cvmfs">
                <param name="db_tarball" type="select"
                        label="Select a MetaSBT database"
                        help="Choose a specific version of a database.">
                    <options from_data_table="funannotate">
                        <column name="value" index="0" />
                        <column name="version" index="1" />
                        <column name="name" index="2" />
                        <column name="path" index="3" />
                        <filter type="sort_by" column="0" reverse_sort_order="true"/>
                        <validator message="No MetaSBT database is available" type="no_options"/>
                    </options>
                </param>
            </when>

            <when value="history">
                <param name="db_tarball" type="data" format="tar"
                       label="Select a MetaSBT database tarball" />
            </when>
        </conditional>
    </xml>

    <xml name="citations">
        <citations>
            <citation type="bibtex">
@misc{metasbtrepo,
    author={Fabio Cumbo, Daniel Blankenberg},
    title={{MetaSBT: A scalable framework for automatically indexing microbial genomes and accurately characterizing metagenome-assembled genomes with Sequence Bloom Trees}},
    publisher={Github},
    url={https://github.com/cumbof/MetaSBT}
}
            </citation>
        </citations>
    </xml>
</macros>