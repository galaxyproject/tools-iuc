<?xml version="1.0"?>
<macros>
    <token name="@TOOL_VERSION@">0.8.3</token>
    <token name="@DESCRIPTION@"></token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">delly</requirement>
            <requirement type="package" version="1.10.2">bcftools</requirement>
        </requirements>
    </xml>
    <xml name="version_command">
        <version_command><![CDATA[delly -v 2>&1 | grep 'Delly version' | awk -F': ' '{print $2}']]></version_command>
    </xml>
	<xml name="citations">
        <citations>
            <citation type="doi">10.1093/bioinformatics/bts378</citation>
        </citations>
    </xml>

    <!-- 
        command
    -->
	
    <!-- 
        configfile - parser cannot handle indents
    -->
	
    <!--
        input 
    -->

    <xml name="exclude">
        <param argument="--exclude" type="data" format="tabular" optional="true" label="Select file with regions to exclude"/> <!-- filetype ?! -->
    </xml>
    <xml name="genome">
        <param argument="--genome" type="data" format="fasta" label="Select genome"/>
    </xml>
    <xml name="genoqual">
        <param name="genoqual" type="integer" value="5" label="Set minimum mapping quality for genotyping" help="(--geno-qual)"/>
    </xml>
    <xml name="minclip">
        <param argument="--minclip" type="integer" value="25" label="Set minimum clipping length"/>
    </xml>
    <xml name="maxreadsep">
        <param argument="--maxreadsep" type="integer" value="40" label="Set maximum read separation"/>
    </xml>
    <xml name="minrefsep">
        <param argument="--minrefsep" type="integer" value="25" label="Set minimum reference separation"/>
    </xml>
    <xml name="samples" token_format="bam" token_multiple="true">
        <param name="samples" type="data" format="@FORMAT@" multiple="@MULTIPLE@" label="Select sample file(s)"/>
    </xml>
    <xml name="svtype">
        <param argument="--svtype" type="select" label="Set SV type to compute">
            <option value="ALL" selected="true">ALL</option>
            <option value="DEL">DEL</option>
            <option value="INS">INS</option>
            <option value="DUP">DUP</option>
            <option value="INV">INV</option>
            <option value="BND">BND</option>
        </param>
    </xml>
    <xml name="vcffile">
        <param argument="--vcffile" type="data" format="vcf,bcf" optional="true" label="Select genotyping file"/>
    </xml>

    <!--
        output 
    -->
    <!--
        Help
    -->

    <token name="@WID@"><![CDATA[
Delly is an integrated structural variant (SV) prediction method that can discover, genotype and visualize deletions, tandem duplications, inversions and translocations at single-nucleotide resolution in short-read massively parallel sequencing data. It uses paired-ends, split-reads and read-depth to sensitively and accurately delineate genomic rearrangements throughout the genome.
    ]]></token>

    <token name="@INPUT@"><![CDATA[
Delly needs a sorted, indexed and duplicate marked BAM file for every input sample. An indexed reference genome is required to identify split-reads.
    ]]></token>

    <token name="@OUTPUT@"><![CDATA[
The output is in BCF format. Delly supports germline and somatic SV discovery, genotyping and filtering.
    ]]></token>

    <token name="@REFERENCES@"><![CDATA[
More information are available on `github <https://github.com/>`_.
    ]]></token>
</macros>