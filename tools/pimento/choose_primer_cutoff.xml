<tool id="pimento_choose_primer_cutoff" name="PIMENTO Choose primer cutoff" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" license="@LICENSE@">
    <description>Selects optimal primer cutoff and generates final inferred primer sequences</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="creators"/>
    <expand macro="requirements"/>
    <command detect_errors="aggressive"><![CDATA[
        pimento choose_primer_cutoff -i '$input_reads' -p '$primer_cutoffs' -o sample
    ]]></command>
    <inputs>
        <param name="input_reads" type="data" label="Input reads" format="fastqsanger.gz"/>
        <param name="primer_cutoffs" type="data" label="Input standard primers" format="tsv"/>
    </inputs>
    <outputs>
        <data name="output" label="${tool.name} on ${on_string}: Inferred primer sequences" format="fasta" from_work_dir="sample_auto_primers.fasta"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_reads" value="test.fastq.gz"/>
            <param name="primer_cutoffs" value="test_cutoffs.tsv"/>
            <output name="output">
                <assert_contents>
                    <has_line line=">F_auto"/>
                    <has_line line="CCTACGGGDGGCWGCAGT"/>
                    <has_n_lines n="4"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[ 
        Choose the optimal primer cutoff point from an input set. Using patterns of
        base-conservation in reads and a set of potential cutoff points to choose
        from, this function makes a prediction for the "optimal" cutoff point to be
        used for primer inference. This function then generates a consensus sequence
        using the reads and the chosen cutoff point to be used as the final primer
        sequence. Performed for both strands, the final primer sequences are output
        into a FASTA file.
    ]]></help>
    <expand macro="citations"/>
</tool>
