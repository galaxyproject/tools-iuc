<tool id="pimento_gen_bcv" name="PIMENTO Generate base-conservation vector(s)" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" license="@LICENSE@">
    <description>for primer fastq files</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="creators"/>
    <expand macro="requirements"/>
    <command detect_errors="aggressive"><![CDATA[
        pimento gen_bcv -i '$input_fastq' -st $strand -o sample
    ]]></command>
    <inputs>
        <param name="input_fastq" type="data" label="Input reads to generate the BCV for" format="fastqsanger.gz"/>
        <param name="strand" type="select" label="The strand(s) to generate a BCV for">
            <option value="F">Forward</option>
            <option value="R">Reverse</option>
            <option value="FR">Forward and reverse</option>
        </param>
    </inputs>    
    <outputs>
        <data name="output" label="${tool.name} on ${on_string}: Base-conservation vector(s)" format="tsv" from_work_dir="sample_bcv.tsv"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_fastq" value="test.fastq.gz"/>
            <param name="strand" value="FR"/>
            <output name="output">
                <assert_contents>
                    <has_text text="F"/>
                    <has_text text="0.9583999999999999"/>
                    <has_text text="R"/>
                    <has_text text="0.7263999999999999"/>
                    <has_n_columns n="24"/>
                    <has_n_lines n="3"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[ 
        Generates base-conservation vector(s) for input fastq files. To be used by
        the primer cutoff inference strategy, this function computes the base-
        conservation vector for input reads. Users can choose to perform this
        computation for either forward or reverse strands of the reads, or both.
    ]]></help>
    <expand macro="citations" />
</tool>
