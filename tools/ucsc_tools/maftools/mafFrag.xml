<tool id="ucsc_maffrag" name="mafFrag" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@" license="MIT">
    <description>Extract MAF sequences for a region from database</description>
    <macros>
        <token name="@TOOL_VERSION@">482</token>
        <token name="@VERSION_SUFFIX@">0</token>
        <token name="@PROFILE@">24.2</token>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">ucsc-maffrag</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
        cp '$ucsc_db_connection' "\${HOME}/.hg.conf" &&
        chmod 600 "\${HOME}/.hg.conf" &&
        mafFrag '$genome' '$track' '$chrom' '$start' '$end' '$strand' out.maf
        ]]>
    </command>
    <configfiles>
        <configfile name="ucsc_db_connection"><![CDATA[
#European MariaDB server
db.host=genome-euro-mysql.soe.ucsc.edu
db.user=genomep
db.password=password
central.db=hgcentral
central.host=genome-euro-mysql.soe.ucsc.edu
central.user=genomep
central.password=password
gbdbLoc1=http://hgdownload.soe.ucsc.edu/gbdb/
forceTwoBit=on 
        ]]></configfile>
    </configfiles>
    <inputs>
        <param name="genome" type="text" optional="false" label="Enter Genome database name" help="Name should match with the UCSC Table Browser Entries (For Eg. mm10, hg19, hg38)"/>
        <param name="track" type="text" optional="false" label="Enter UCSC Table name for desired table of the above genome" help="Table name should match with the UCSC Table Browser Entries (For eg. knownGene, all_mrna)"/>
        <param name="chrom" type="text" optional="false" label="Chromosome" help="Chromosome name (e.g., chr1, chr2, etc.)"/>
        <param name="start" type="integer" optional="false" label="Start position" help="Start position of the region in the chromosome (0-based)"/>
        <param name="end" type="integer" optional="false" label="End position" help="End position of the region in the chromosome (0-based)"/>
        <param name="strand" type="select" optional="false" label="Strand" help="Strand of the region">
            <option value=".">No Strand</option>
            <option value="+">Forward Strand(+)</option>
            <option value="-">Reverse Strand(-)</option>
        </param>
    </inputs>
    <outputs>
        <data name="output" format="maf" from_work_dir="out.maf" label="${tool.name} on ${on_string}:Output MAF"/>
    </outputs>
    <tests>
        <!-- Test 01: Testing with default options -->
        <test expect_num_outputs="1">
            <param name="genome" value="hg19"/>
            <param name="track" value="multiz46way"/>
            <param name="chrom" value="chr17"/>
            <param name="start" value="7578370"/>
            <param name="end" value="7578400"/>
            <param name="strand" value="+"/>
            <output name="output" ftype="maf">
                <assert_contents>
                    <has_n_lines n="43"/>
                    <has_size value="3087"/>
                    <has_line line="s hg19.chr17 7578370 30 + 81195210 CA---TCGCTA----TCTGAG--CAGCGCTC-ATGGTGGG"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[

mafFrag is a command-line tool from the UCSC Genome Browser suite that extracts MAF sequences for a region from database.

    ]]></help>
        <citations>
            <citation type="bibtex">
                @misc{mafFrag,
                author = {Kent UCSC},
                title = {mafFrag: A tool that extracts MAF sequences for a region from database},
                note = {Tool that extracts MAF sequences for a region from database}
            </citation>
    </citations>
    <creator>
        <person givenName="Saim" familyName="Momin" url="https://github.com/SaimMomin12" identifier="https://orcid.org/0009-0003-9935-828X"/>
        <organization name="Galaxy Europe" url="https://galaxyproject.org/eu/"/>
    </creator>
</tool>