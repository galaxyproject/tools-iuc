<tool id="ucsc_maffetch" name="mafFetch" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@" license="MIT">
    <description>Get overlapping records from an MAF using an index table</description>
    <macros>
        <token name="@TOOL_VERSION@">482</token>
        <token name="@VERSION_SUFFIX@">0</token>
        <token name="@PROFILE@">24.2</token>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">ucsc-maffetch</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
        cp '$ucsc_db_connection' "\${HOME}/.hg.conf" &&
        chmod 600 "\${HOME}/.hg.conf" &&
        mafFetch '$genome' '$track' '$bed_file' out.maf
        ]]>
    </command>
    <configfiles>
        <configfile name="ucsc_db_connection"><![CDATA[
#European MariaDB server
db.host=genome-euro-mysql.soe.ucsc.edu
db.user=genomep
db.password=password
central.db=hgcentral
central.host=genome-euro-mysql.soe.ucsc.edu
central.user=genomep
central.password=password
gbdbLoc1=http://hgdownload.soe.ucsc.edu/gbdb/
forceTwoBit=on 
        ]]></configfile>
    </configfiles>
    <inputs>
        <param name="bed_file" type="data" format="bed" label="Input BED file" help="Input BED file can be either BED6 or BED12"/>
        <param name="genome" type="text" optional="false" label="Enter Genome database name" help="Name should match with the UCSC Table Browser Entries (For Eg. mm10, hg19, hg38)"/>
        <param name="track" type="text" optional="false" label="Enter UCSC Table name for desired table of the above genome" help="Table name should match with the UCSC Table Browser Entries (For eg. knownGene, all_mrna)"/>
    </inputs>
    <outputs>
        <data name="output" format="maf" from_work_dir="out.maf" label="${tool.name} on ${on_string}:Output MAF"/>
    </outputs>
    <tests>
        <!-- Test 01: Testing with default options -->
        <test expect_num_outputs="1">
            <param name="bed_file" value="mafFetch.bed"/>
            <param name="genome" value="hg19"/>
            <param name="track" value="multiz46way"/>
            <output name="output" ftype="maf">
                <assert_contents>
                    <has_n_lines n="167"/>
                    <has_size value="17364"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[

mafFetch is a command-line tool from the UCSC Genome Browser suite that extracts MAF records overlapping regions in a BED file (minimum 3 columns: chrom, start, end) from a specified UCSC database table (e.g., multiz46way for hg19). Outputs alignments to a MAF file using an indexed lookup for efficiency.

    ]]></help>
        <citations>
            <citation type="bibtex">
                @misc{mafFetch,
                author = {Kent UCSC},
                title = {mafFetch: A tool for get overlapping records from an MAF using an index table},
                note = {Tool for get overlapping records from an MAF using an index table}
            </citation>
    </citations>
    <creator>
        <person givenName="Saim" familyName="Momin" url="https://github.com/SaimMomin12" identifier="https://orcid.org/0009-0003-9935-828X"/>
        <organization name="Galaxy Europe" url="https://galaxyproject.org/eu/"/>
    </creator>
</tool>