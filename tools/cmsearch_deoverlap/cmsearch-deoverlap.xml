<tool id="cmsearch_deoverlap" name="CMsearch deoverlap" version="0.08+galaxy0">
    <description>removes lower scoring overlaps from cmsearch --tblout files</description>
    <requirements>
        <requirement type="package" version="5.26">perl</requirement>
    </requirements>
    <command><![CDATA[
        ln -s '$clan_information' clan_info;
        ln -s '$cmsearch_matches' cmsearch_matches;
        LC_ALL=C perl '$__tool_directory__/cmsearch-deoverlap.pl' --clanin clan_info cmsearch_matches;
        mv *.deoverlapped '$deoverlapped_matches'

    ]]></command>
    <inputs>
        <param type="data" name="clan_information" format="txt" label="clan information"/>
        <param type="data" name="cmsearch_matches" format="txt" label="cmsearch output"/>
    </inputs>
    <outputs>
        <data name="deoverlapped_matches" format="txt" />
    </outputs>
    <tests>
        <test>
            <param name="clan_information" value="ribo.claninfo" />
            <param name="cmsearch_matches" value="1.cmsearch.tblout" />
            <output name="deoverlapped_matches" file="1.cmsearch.tblout.deoverlapped">
            </output>
        </test>
    </tests>
    <help><![CDATA[
Usage:

cmsearch-deoverlap.pl    --clanin <s> <tblout file>

--------
EXAMPLES
--------

1. Remove overlapping hits to models in the same clan in a single tblout file:
$ perl ./cmsearch-deoverlap.pl --clanin test-data/ribo.claninfo test-data/1.cmsearch.tblout
Saved   357 hits (  614 removed) to test-data/1.cmsearch.tblout.deoverlapped


    ]]></help>
    <citations>
        <citation type="doi">10.1093/nar/gkac1080</citation>
    </citations>
</tool>