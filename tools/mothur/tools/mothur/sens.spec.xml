<tool id="mothur_sens_spec" name="Sens.spec" version="@WRAPPER_VERSION@.0" >
    <description>Determine the quality of OTU assignment</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />

    <command interpreter="python"><![CDATA[
        mothur_wrapper.py 
        #import re, os.path
        --cmd='sens.spec'
        --result='^mothur.\S+\.logfile$:'$logfile,'^\S+\.sensspec$:'$sensspec
        --outputdir='$logfile.extra_files_path'
        --list="$otu"
        #if isinstance($dist.datatype, $__app__.datatypes_registry.get_datatype_by_extension('pair.dist').__class__):
            --column="$dist"
        #else
            --phylip="$dist"
        #end if
        #if $label.__str__ != "None" and len($label.__str__) > 0:
            --label='$label'
        #end if
        #if len($precision.__str__) > 0:
            --precision="$precision"
        #end if
        #if float($cutoff.__str__) > 0.0:
            --cutoff="$cutoff"
        #end if
        "$hard"
    ]]></command>
    <inputs>
        <param name="otu" type="data" format="mothur.list" label="list - OTU List"/>
        <param name="dist" type="data" format="mothur.dist" label="phylip,column - Distance Matrix"/>
        <param name="label" type="select" optional="true" label="label - Select OTU Labels to include" multiple="true" help="By default all are included if no selection is made.">
            <options>
                <filter type="data_meta" ref="otu" key="labels" />
            </options>
        </param>
        <param name="precision" type="integer" value="100" optional="true" label="precision - Precision for rounding distance values"/>
        <param name="cutoff" type="float" value="0.0" label="cutoff - Distance Cutoff threshold - ignored if not > 0" 
                                                                    help="Ignore pairwise distances larger than this, a common value would be 0.10"/>
        <param name="hard" type="boolean" checked="false" truevalue="--hard=true" falsevalue="" label="hard - Use hard cutoff instead of rounding"/>
    </inputs>
    <outputs>
        <data format="html" name="logfile" label="${tool.name} on ${on_string}: logfile" />
        <data format="tabular" name="sensspec" label="${tool.name} on ${on_string}: sensspec" />
    </outputs>
    <tests>
    </tests>
    <help>
<![CDATA[

@MOTHUR_OVERVIEW@

**Command Documenation**

The sens.spec_ command takes a list_ and either a column_  or phylip_ distance matrix to determine the quality of OTU assignment.


.. _list: http://www.mothur.org/wiki/List_file
.. _column: http://www.mothur.org/wiki/Column-formatted_distance_matrix
.. _phylip: http://www.mothur.org/wiki/Phylip-formatted_distance_matrix
.. _sens.spec: http://www.mothur.org/wiki/Sens.spec
]]>
    </help>
    <expand macro="citations" />
</tool>
