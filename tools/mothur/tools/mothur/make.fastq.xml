<tool id="mothur_make_fastq" name="Make.fastq" version="@WRAPPER_VERSION@.0">
    <description>Convert fasta and quality to fastq</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />

    <command interpreter="python"><![CDATA[
        mothur_wrapper.py 
        --cmd='make.fastq'
        --result='^mothur.\S+\.logfile$:'$logfile,'^\S+\.fastq$:'$fastq
        --outputdir='$logfile.extra_files_path'
        --fasta="$fasta"
        --qfile="$qfile"
        #if $chooseformat.use: 
            --format="${chooseformat.format}"
        #end if
    ]]></command>
    <inputs>
        <param name="fasta" type="data" format="fasta" label="fasta - Fasta Sequence file"/>
        <param name="qfile" type="data" format="qual" label="qfile - Sequence Quality file"/>

        <conditional name="chooseformat">
            <param name="use" type ="boolean" truevalue="yes" falsevalue="no" label="choose what format your sequences are"/>

            <when value="yes">
                <param name="format" type="select" optional="true" multiple="true">
                    <option value="sanger" selected="true">sanger or illumina1.8+</option>
                    <option value="solexa">solexa</option>
                    <option value="illumina">illumina</option>
                </param>
            </when>
            <when value="no"/>
        </conditional>
    </inputs>
    <outputs>
        <data name="logfile" format="txt"  label="${tool.name} on ${on_string}: logfile" />
        <data name="fastq"   format="fastq" label="${tool.name} on ${on_string}: fastq">
            <change_format>
                <when input="qfile.ext" value="qual454" format="fastqsanger"/>
                <when input="qfile.ext" value="qualillumina" format="fastqillumina"/>
                <when input="qfile.ext" value="qualsolexa" format="fastqsolexa"/>
                <when input="qfile.ext" value="qualsolid" format="fastqcssanger"/>
            </change_format>
        </data>
    </outputs>
    <tests>
        <test>
            <param name="fasta" value="Mock_S280_L001_R1_001_small.trim.contigs.fasta" />
            <param name="qfile" value="Mock_S280_L001_R1_001_small.trim.contigs.qual" />
            <param name="use" value="yes" />
            <param name="format" value="sanger" />
            
            <output name="fastq" md5="e77b78321620e300946c23147ad599fd" />
            <expand macro="logfile-test" />
        </test>
    </tests>
    <help>
        <![CDATA[

@MOTHUR_OVERVIEW@

**Command Documenation**

The fastq.info_ command reads a fasta file and quality file and creates a fastq.


.. _fastq.info: http://www.mothur.org/wiki/Make.fastq
]]>
    </help>
    <expand macro="citations" />
</tool>
