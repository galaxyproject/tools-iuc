<tool id="mothur_classify_tree" name="Classify.tree" version="@WRAPPER_VERSION@.0">
    <description>Get a consensus taxonomy for each node on a tree</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />

    <command interpreter="python"><![CDATA[
        mothur_wrapper.py 
        --cmd='classify.tree'
        --result='^mothur.\S+\.logfile$:'$logfile,'^\S+\.taxonomy\.tre$:'$out_tree,'^\S+\.taxonomy\.summary$:'$summary
        --outputdir='$logfile.extra_files_path'
        --taxonomy="$taxonomy"
        --tree="$tree"
        #if $name.__str__ != "None" and len($name.__str__) > 0:
            --name='$name'
        #end if
        #if $group.__str__ != "None" and len($group.__str__) > 0:
            --group="$group"
        #end if

        --name="$names"
    ]]></command>
    <inputs>
        <param name="taxonomy" type="data" format="taxonomy" optional="true" label="taxonomy - Taxonomy to screen"/>
        <param name="tree" type="data" format="tre" label="tree - Sequences to filter"/>
        <param name="name" type="data" format="mothur.names" optional="true" label="name - Sequences Name reference file"/>
        <param name="group" type="data" format="group" optional="true" label="group - Sequences Group reference"/>
        <param name="cutoff" type="integer" value="51" optional="true" label="cutoff - consensus confidence threshold" 
                                    help="The default is 51, meaning 51%. Cutoff cannot be below 51">
                <validator type="in_range" message="The percentage cutoff must be between 51 and 100" min="51" max="100"/>
        </param>

    </inputs>
    <outputs>
        <data format="html" name="logfile" label="${tool.name} on ${on_string}: logfile" />
        <data format_source="tree" name="out_tree" label="${tool.name} on ${on_string}: taxonomy.tre" />
        <data format_source="tabular" name="summary" label="${tool.name} on ${on_string}: taxonomy.summary" />
    </outputs>
    <tests>
    </tests>
    <help>
<![CDATA[

@MOTHUR_OVERVIEW@


**Command Documenation**

The classify.tree_ command is used to get a consensus taxonomy for each node on a tree.
Input is a taxonomy_ and a tree_ with optional name_ or group_ reference.
The output is a tree_ and a summary..

  TreeNode	NumRep	Taxonomy
  243	2	Bacteria(100);"Firmicutes"(100);"Clostridia"(100);Clostridiales(100);"Ruminococcaceae"(100);Faecalibacterium(100);
  244	3	Bacteria(100);"Firmicutes"(100);"Clostridia"(100);Clostridiales(100);"Ruminococcaceae"(100);Faecalibacterium(100);
  245	4	Bacteria(100);"Firmicutes"(100);"Clostridia"(100);Clostridiales(100);"Ruminococcaceae"(100);Faecalibacterium(100);
  ...


.. _taxonomy: http://www.mothur.org/wiki/Taxonomy_outline
.. _tree: http://evolution.genetics.washington.edu/phylip/newicktree.html
.. _name: http://www.mothur.org/wiki/Name_file
.. _group: http://www.mothur.org/wiki/Group_file
.. _classify.tree: http://www.mothur.org/wiki/Classify.tree

v.1.25.0: Trivial upgrade to Mothur 1.33
]]>
    </help>
    <expand macro="citations" />
</tool>
