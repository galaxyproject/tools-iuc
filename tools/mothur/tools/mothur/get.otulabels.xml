<tool id="mothur_get_otulabels" name="Get.otulabels" version="@WRAPPER_VERSION@.0">
    <description>Selects OTU labels</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />

    <command><![CDATA[
        echo 'get.otulabels(
        
        accnos=$accnos
        
        #if $constaxonomy_in:
            ,constaxonomy=$constaxonomy_in
        #end if
        
        #if $otucorr_in:
            ,otucorr=$otucorr_in
        #end if
        
        #if $corraxes_in:
            ,corraxes=$corraxes_in
        #end if
        
        #if $list:
            ,list=$list
        #end if
        
        #if $shared:
            ,shared=$shared
        #end if
        
        )'
        | sed 's/ //g'  ## mothur trips over whitespace
        | mothur &&
        
        prefix="$accnos" &&
        mv mothur.*.logfile "$logfile"
        
        #if $constaxonomy_in:
            && prefix="$constaxonomy_in"
            && mv \${prefix%.dat}*.pick.dat "$constaxonomy_out"
        #end if
         
        #if $otucorr_in:
            && prefix="$otucorr_in"
            && mv \${prefix%.dat}*.pick.dat "$otucorr_out"
        #end if
         
        #if $corraxes_in:
            && prefix="$corraxes_in"
            && mv \${prefix%.dat}*.pick.dat "$corraxes_out"
        #end if
    ]]></command>
    <inputs>
        <param name="accnos"
               type="data"
               format="mothur.otulabels"
               label="accnos - otulabels"
               help="At least one of constaxonomy, otucorr, or corraxes must be given"/>
        <param name="constaxonomy_in"
               type="data"
               format="mothur.cons.taxonomy"
               optional="true"
               label="constaxonomy - Consensus Taxonomy from classify.otu"/>
        <param name="otucorr_in"
               type="data"
               format="mothur.otu.corr"
               optional="true"
               label="otucorr -  OTU correlation from otu.association"/>
        <param name="corraxes_in"
               type="data"
               format="mothur.axes"
               optional="true"
               label="corraxes - axes from corr.axes"/>
        <param name="list"
               type="data"
               format="mothur.list"
               optional="true"
               label="list - allows you to input a list file you wish to select OTUs from. "/>
        <param name="shared"
               type="data"
               format="mothur.shared"
               optional="true"
               label="shared - allows you to input a shared file you wish to select OTUs from. "/>
    </inputs>
    <outputs>
        <data format="txt" name="logfile" label="${tool.name} on ${on_string}: logfile" />
        <data name="constaxonomy_out" format_source="constaxonomy_in" label="${tool.name} on ${on_string}: pick.cons.taxonomy">
            <filter>constaxonomy_in != None</filter>
        </data>
        <data name="otucorr_out" format_source="otucorr_in" label="${tool.name} on ${on_string}: pick.otu.corr">
            <filter>otucorr_in != None</filter>
        </data>
        <data name="corraxes_out" format_source="corraxes_in" label="${tool.name} on ${on_string}: pick.otu.corraxes">
            <filter>corraxes_in != None</filter>
        </data>
    </outputs>
    <tests>
        <test>
            <param name="accnos" value="amazon.accnos.otulabels"/>
            <param name="corraxes_in" value="amazon.pcoa.axes"/>
           
            <expand macro="logfile-test" />
            <output name="corraxes_out" md5="c5f9d1a80b85cce640f25eb89cb67509" />
        </test>
    </tests>
    <help>
<![CDATA[

@MOTHUR_OVERVIEW@


**Command Documenation**

The get.otulabels_ command selects otu labels from the output from classify.otu_, corr.axes_ and otu.association_. This can be useful especially with subsampled datasets or when groups have been selected.

.. _classify.otu: http://www.mothur.org/wiki/Classify.otu
.. _corr.axes: http://www.mothur.org/wiki/Corr.axes
.. _otu.association: http://www.mothur.org/wiki/Otu.association
.. _get.otulabels: http://www.mothur.org/wiki/Get.otulabels

v.1.27.0: Aded list and shared parameters, updated to Mothur 1.33
]]>
    </help>
    <expand macro="citations" />
</tool>
