<macros>
    <token name="@TOOL_VERSION@">1.1.2</token>
    <token name="@SUFFIX_VERSION@">0</token>
    <xml name="xrefs">
      <xrefs>
        <xref type="bio.tools">strawberry</xref>
      </xrefs>
    </xml>
    <xml name="requirements">
        <requirements>
            <container type="docker">ruolinliu/strawberry:v@TOOL_VERSION@</container>
        </requirements>
    </xml>
    <xml name="citations">
        <citations>
            <citation type="doi">10.1371/journal.pcbi.1005851</citation>
        </citations>
    </xml>
    <xml name="common_parameters">
        <param argument="--min-exon-cov" type="float" min="0" max="1" value="1" label="Min exon coverage" help="Minimum exon coverage" />
        <param argument="--min-mapping-qual" type="integer" min="0" value="0" label="Min mapping quality" help="Minimum mapping quality to be included in the analysis" />
        <param name="strand_type" type="select" label="Specify the type of library">
            <option value="">Disabled</option>
            <option value="--fr">FR-secondstrand</option>
            <option value="--rf">RF-firststrand</option>
        </param>
        <param argument="--max-junction-splice-size" type="integer" min="0" value="300000" label="Max junction splice size" help="Maximum spliced junction" />
        <param argument="--min-junction-splice-size" type="integer" min="0" value="20" label="Min junction splice size" help="Minimum spliced junction size" />
        <param argument="--min-isoform-frac" type="float" min="0" max="1" value="0.01" label="Min isoform fraction" help="Minimum isoform fraction" />
        <param argument="--allow-multimapped-hits" type="boolean" truevalue="--allow-multimapped-hits" falsevalue="" label="Allow multimapped hits" help="By default, Strawberry only use reads which map to unique position in the genome" />
    </xml>
    <xml name="assembly_parameters">
        <param argument="--min-transcript-size" type="integer" min="0" value="200" label="Min transcript size" help="Minimum transcript size to be assembled" />
        <param argument="--max-overlap-distance" type="integer" min="0" value="30" label="Max overlap distance" help="Maximum distance between read clusters to be merged" />
        <param argument="--min-anchor-size" type="integer" min="0" value="10" label="Min anchor size" help="Read overhang less than this value is subject to Binomial test" />
        <param argument="--small-anchor-alpha" type="float" min="0" max="1" value="0" label="Small anchor alpha" help="Threshold alpha for junction binomial test filter" />
        <param argument="--min-support-4-intron" type="integer" min="1" value="2" label="Min support for intron" help="Minimum number of spliced aligned reads requited to support a intron" />
        <param argument="-combine-short-transfrag" type="boolean" truevalue="-combine-short-transfrag" falsevalue="" label="Combine short transfrag" help="Merging non-overlap short transfrags" />
        <param argument="--min-depth-4-transcript" type="float" min="0.1" value="1" label="Min depth for transcripts" help="Minimum average read depth for transcript" />
    </xml>
    <xml name="quantification_parameters">
        <param argument="--bias-correction" type="data" format="data" label="Bias correction" help="Specify a reference genome for bias correction in FASTA format" />
        <param argument="--fragment-context" type="boolean" truevalue="--fragment-context" falsevalue="" label="Fragment context" help="Generate a file with the fragment context for differential expression" />
        <conditional name="insert_size_conditional">
            <param argument="--insert-size-mean-and-sd" type="select" label="Specify insert size mean and standard deviation">
                <option value="enabled">Enabled</option>
                <option value="disabled" selected="true">Disabled</option>
            </param>
            <when value="enabled">
                <param name="mean" type="integer" min="0" label="Mean insert size"/>
                <param name="sd" type="integer" min="0" label="Insert size standard deviation"/>
            </when>
            <when value="disabled"/>
        </conditional>
        <param argument="--filter-low-expression" type="float" min="0" max="1" value="0" label="Filter low expression" help="Skip isoforms whose relative expression (within locus) are less that this number" />
    </xml>
</macros>
