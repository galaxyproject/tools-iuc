<tool id="snpbutcher2" name="SNP_Butcher" version="2.8">
    <description>
       This tool subsamples genetic linkage maps
    </description>
    <requirements>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
       python $__tool_directory__/scripts/snpbutcher2.py \
       '$mapFile' 
       '$mafFile' 
       '$genotypesFile' 
       $useHumanGenome
       $uninformative
       $zeromaf
       $nohapmap
       #if str($spaceDetector.spacingN) == "--spacing":
          --spacing '$spaceDetector.spacing' 
       #else if str($spaceDetector.spacingN) == "--max":
          --max '$spaceDetector.max' 
       #else if str($spaceDetector.spacingN) == "--centimorgans":
          --centimorgans '$spaceDetector.centimorgans' 
       #end if

       > '$output'
    ]]></command>
    <inputs>
        <param name="mapFile" type="data" format="txt" label="Map File" />
	    <param name="mafFile" type="data" format="txt" label="Maf File" />
	    <param name="genotypesFile" type="data" format="txt" label="Genotypes File" />
	    <param name="useHumanGenome" type="boolean" truevalue="--hg19" falsevalue="" label="Human Genome ver:19" />
	    <param name="uninformative" type="boolean" truevalue="--uninformative" falsevalue="" label="Include Uninformative Markers" />
	    <param name="zeromaf" type="boolean" truevalue="--zeromaf" falsevalue="" label="Include Zero Minor Allele Frequency Markers" />
	    <param name="nohapmap" type="boolean" truevalue="--nohapmap" falsevalue="" label="Include Uninformative Markers" />
	    <conditional name="spaceDetector">
	        <param name="spacingN" type="select" label="Select Markers at Intervals of N, or Specify the Max Number of Markers N, or Select at Intervals of N CentiMorgans" >
	            <option value="--spacing">Select Markers at Intervals of N</option>
	            <option value="--max">Specify the Max Number of Markers N</option>
	            <option value="--centimorgans">Select at Intervals of N CentiMorgans</option>
	        </param>
	        <when value="--spacing">
	            <param name="spacing" type="integer" value="1" label="Select Markers at Intervals of N" />
	        </when>
	        <when value="--max">
	            <param name="max" type="integer" value="1" min="1" label="Specify the Max Number of Markers N" />
	        </when>
	        <when value="--centimorgans">
	            <param name="centimorgans" type="float" value="0.05" min="1e-4" label="Select at Intervals of N CentiMorgans" />
	        </when>
	    </conditional>
    </inputs>
    <outputs>
      <data name="output" format="tabular" label="output map" />
    </outputs>
    <tests>
      <test>
         <param name='mapFile' value='test.map'/>
         <param name='mafFile' value='maf.txt'/>
         <param name='genotypesFile' value='genotypes'/>
         <output name='output' value='output.txt'/>
      </test>
      <test>
         <param name='mapFile' value='jrbase1.map'/>
         <param name='spacingN' value="--spacing"/>
         <param name='genotypesFile' value='genotypes'/>
         <param name='mafFile' value='linkstudies.alohomora_maf.txt'/>
         <param name='output' value='outputn.txt'/>
      </test>
      <test>
         <param name='mapFile' value='test.map'/>
         <param name='genotypesFile' value='genotypes'/>
         <param name='mafFile' value='maf.txt'/>
         <param name="useHumanGenome" value="--hg19"/>
         <param name='spacingN' value="--max"/>
         <param name='output' value='outputm.txt'/>
      </test>
    </tests>
    <help><![CDATA[
    This tool subsamples genetic linkage maps
    ]]></help>
    <citations>
	    <citation type="doi">10.1086/301904</citation>
	</citations>
</tool>
