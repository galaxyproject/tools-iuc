<?xml version="1.0" encoding="UTF-8"?>

<tool id="bakta" name="Bakta genome annotation" version="0.1.0" python_template_version="3.5">
    <description>
        Bakta: rapid and standardized annotation of bacterial genomes via alignment-free sequence identification
    </description>
    <macros>
        <import>macro.xml</import>
    </macros>
        <expand macro='xrefs'/>
        <expand macro="requirements" />
        <expand macro="version_command" />

    <command detect_errors="exit_code"><![CDATA[
        TODO: Fill in command template.
    ]]></command>

    <inputs>
      <!-- DB INPUT -->
        <section name="input_option" title="Input/Output options" expanded="true">
            <param name="db_select" type="select" label="The bakta database">
                <options from_data_table="bakta_database">
                    <validator message="No bakta database is available" type="no_options"/>
                </options>
            </param>
            <param name="input_file" type="data" format="fasta,fa,zip" label="Select genome in (zipped) fasta format"/>
            <param name="min_contig_length" type="integer" optional="true" min="0" value="1" label="Minimum contig size" help="Minimum contig size (default = 1; 200 in compliant mode) (--min-contig-length)"/>
        </section>
        <section name="organism" title="Optional organism options" expanded="false">
            <param name="genus" type="text" optional="true" label="Specify genus name" help="ex. Escherichia (--genus)" />
            <param name="species" type="text" optional="true" label="Specify species name" help="ex. 'coli O157:H7' (--species)" />
            <param name="strain" type="text" optional="true" label="Specify strain name" help="ex. Sakai (--strain)" />
            <param name="plasmid" type="text" optional="true" label="Specify plasmid name" help="(--plasmid)" />
        </section>
        <section name="annotation" title="Optional annotation">
            <param argument="--complete" type="boolean" truevalue="--complete" falsevalue="" label="All sequences are complete replicons (chromosome/plasmid[s])" help="--complete"/>
            <param name="prodigal" type="data" format="tf" optional="true" label="Prodigal training file for CDS prediction" help="--prodigal-tf"/>
            <param name="gram" type="select" optional="true" label="Gram type for signal peptide predictions" help="(--gram)">
                <option value="g+">Gram+</option>
                <option value="g-">Gram-</option>
                <option value="g?">Unknown</option>
            </param>
            <param argument="--keep-contig-headers" type="boolean" truevalue="--keep-contig-headers" falsevalue="" label="Keep original contig header"/>
            <param name="replicon_table" type="data" format="tsv, csv" optional="true" label="Replicon information table (tsv/csv)" help="--replicons"/>
            <param argument="--compliant" type="boolean" truevalue="--compliant" falsevalue="" label="Force Genbank/ENA/DDJB compliance"/>
            <param name="protein_file" type="data" format="fasta,faa" optional="true" label="Fasta file of trusted protein sequences for CDS annotation" help="(--proteins)"/>
        </section>
        <section name="workflow" title="Workflow option to skip steps">
            <param argument="--skip-trna"   type="boolean" truevalue="--skip-trna" falsevalue="" label="Skip tRNA detection and annotation" help="(--skip-trna)"/>
            <param argument="--skip-tmrna"  type="boolean" truevalue="--skip-tmrna" falsevalue="" label="Skip tmRNA detection and annotation" help="(--skip-tmrna)"/>
            <param argument="--skip-rrna"  type="boolean" truevalue="--skip-ncrna" falsevalue="" label=" Skip rRNA detection and annotation" help="(--skip-rrna)"/>
            <param argument="--skip-ncrna"  type="boolean" truevalue="--skip-ncrna" falsevalue="" label=" Skip ncRNA detection and annotation" help="(--skip-ncrna)"/>
            <param argument="--skip-ncrna-region" type="boolean" truevalue="--skip-ncrna-region" falsevalue="" label="Skip ncRNA region detection and annotation" help="(--skip-ncrna-region)"/>
            <param argument="--skip-crispr" type="boolean" truevalue="--skip-crispr" falsevalue="" label="Skip CRISPR array detection and annotation" help="(--skip-crispr)"/>
            <param argument="--skip-cds"    type="boolean" truevalue="--skip-cds"  falsevalue="" label="Skip CDS detection and annotation" help="(--skip-cds)"/>
            <param argument="--skip-sorf"   type="boolean" truevalue="--skip-sorf" falsevalue="" label="Skip sORF detection and annotation" help="(--skip-sorf)"/>
            <param argument="--skip-gap"    type="boolean" truevalue="--skip-gap" falsevalue="" label="Skip gap detection and annotation" help="(--skip-gap)"/>
            <param argument="--skip-ori"    type="boolean" truevalue="--skip-ori" falsevalue="" label="Skip oriC/oriT detection and annotation" help="(--skip-ori)"/>
        </section>
    </inputs>

    <outputs>
    </outputs>
    <help><![CDATA[
        usage: bakta [--db DB] [--min-contig-length MIN_CONTIG_LENGTH]
             [--prefix PREFIX] [--output OUTPUT] [--genus GENUS]
             [--species SPECIES] [--strain STRAIN] [--plasmid PLASMID]
             [--complete] [--prodigal-tf PRODIGAL_TF]
             [--translation-table {11,4}] [--gram {+,-,?}] [--locus LOCUS]
             [--locus-tag LOCUS_TAG] [--keep-contig-headers]
             [--replicons REPLICONS] [--compliant] [--proteins PROTEINS]
             [--skip-trna] [--skip-tmrna] [--skip-rrna] [--skip-ncrna]
             [--skip-ncrna-region] [--skip-crispr] [--skip-cds] [--skip-sorf]
             [--skip-gap] [--skip-ori] [--help] [--verbose]
             [--threads THREADS] [--tmp-dir TMP_DIR] [--version]
             <genome>

Rapid & standardized annotation of bacterial genomes, MAGs & plasmids

positional arguments:
  <genome>                      Genome sequences in (zipped) fasta format

Input / Output:
  --db DB, -d DB        Database path (default = <bakta_path>/db). Can also be
                        provided as BAKTA_DB environment variable.
  --min-contig-length MIN_CONTIG_LENGTH, -m MIN_CONTIG_LENGTH
                        Minimum contig size (default = 1; 200 in compliant
                        mode)
  --prefix PREFIX, -p PREFIX
                        Prefix for output files
  --output OUTPUT, -o OUTPUT
                        Output directory (default = current working directory)

Organism:
  --genus GENUS         Genus name
  --species SPECIES     Species name
  --strain STRAIN       Strain name
  --plasmid PLASMID     Plasmid name

Annotation:
  --complete                    All sequences are complete replicons (chromosome/plasmid[s])
  --prodigal-tf PRODIGAL_TF     Path to existing Prodigal training file to use for CDS prediction

  --translation-table {11,4}    Translation table: 11/4 (default = 11)
  --gram {+,-,?}                Gram type for signal peptide predictions: +/-/? (default = ?)
  --locus LOCUS                 Locus prefix (default = 'contig')
  --locus-tag LOCUS_TAG         Locus tag prefix (default = autogenerated)
  --keep-contig-headers         Keep original contig headers
  --replicons REPLICONS         Replicon information table (tsv/csv)
  --compliant                   Force Genbank/ENA/DDJB compliance
  --proteins PROTEINS   Fasta file of trusted protein sequences for CDS annotation


Workflow:
  --skip-trna           Skip tRNA detection & annotation
  --skip-tmrna          Skip tmRNA detection & annotation
  --skip-rrna           Skip rRNA detection & annotation
  --skip-ncrna          Skip ncRNA detection & annotation
  --skip-ncrna-region   Skip ncRNA region detection & annotation
  --skip-crispr         Skip CRISPR array detection & annotation
  --skip-cds            Skip CDS detection & annotation
  --skip-sorf           Skip sORF detection & annotation
  --skip-gap            Skip gap detection & annotation
  --skip-ori            Skip oriC/oriT detection & annotation

General:
  --help, -h            Show this help message and exit
  --verbose, -v         Print verbose information
  --threads THREADS, -t THREADS
                        Number of threads to use (default = number of
                        available CPUs)
  --tmp-dir TMP_DIR     Location for temporary files (default = system
                        dependent auto detection)
  --version             show program's version number and exit


    ]]></help>
    <expand macro="citations"/>
</tool>
