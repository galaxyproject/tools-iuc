<tool id="autocycler_decompress" name="AutoCycler Decompress" version="@TOOL_VERSION@+galaxy0" profile="@PROFILE@">
    <description>decompress sequences from compressed assembly graph</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
        #import re

        mkdir -p out_dir &&
        
        #set $identifier = re.sub('[^\w\-_\.]', '_', $in_gfa.element_identifier)
        ln -s '${in_gfa}' '${identifier}.gfa' &&

        autocycler decompress
        --in_gfa '${identifier}.gfa'
        --out_file decompressed.fasta
        ]]></command>
    <inputs>
        <param argument="--in_gfa" type="data" format="gfa1" label="Input GFA file"
            help="Compressed assembly graph to decompress"/>
    </inputs>
    <outputs>
        <data name="output_fasta" format="fasta" from_work_dir="decompressed.fasta"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="in_gfa" value="input_assemblies.gfa"/>
            <output name="output_fasta" file="decompressed.fasta" ftype="fasta"/>
        </test>
    </tests>
    <help><![CDATA[
**AutoCycler Decompress Tool**

This tool extracts decompressed sequences from a compressed assembly graph.

**Inputs**

- Input GFA file (compressed assembly graph)

**Output Options**

- Output as single FASTA file (all sequences combined)
- OR output to directory (individual sequence files)

**Parameters**

- Output destination: Choose between single file or collection output
- Output filename/directory name: Specify name for output destination

**Outputs**

- Either: Single FASTA file containing all decompressed sequences
- Or: Collection of FASTA files (one per sequence)

**Notes**

- Case is not preserved with Autocycler compress, so reconstructing sequences with Autocycler decompress will give all-uppercase sequences, even if the originals had lowercase bases.
- Autocycler cannot make use of any sequences smaller than the k-mer size (51 by default). This means that if you have very small contigs in your assemblies, they will be ignored, and you will not be able to recover them with Autocycler decompress.
- All contig header whitespace is converted to a single space and will therefore be restored that way when using Autocycler decompress.
- When decompressing to a single file, the filename and contig name are concatenated. Any spaces in the filename are replaced with underscores (to prevent the truncation of the sequence name).

.. class:: infomark

**More Information**

- `Autocycler decompress`: https://github.com/rrwick/Autocycler/wiki/Autocycler-decompress

**Citations**


    ]]></help>
<expand macro="citations"/>
</tool>
