<tool id="tooldistillator_summarize" name="tooldistillator_summarize" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>
        Aggregate several JSON reports from ToolDistillator
    </description>
    <macros>
        <import>macro.xml</import>
    </macros>
    <expand macro='edam'/>
    <expand macro="requirements"/>
    <expand macro="version_command"/>
    <command detect_errors="aggressive"><![CDATA[
        tooldistillator_extract --version &&
        mkdir -p input_files &&
        #for $file in $summarize_data
            cp $file input_files &&
        #end for
        tooldistillator_extract summarize input_files/* -o tooldistillator_summary.json
        ]]>
    </command>
    <inputs>
        <param name="summarize_data" type="data" multiple="true" format="json" label="Results in Json format" help="Summarize results from tooldistillator in json format"/>
    </inputs>
    <outputs>
        <data name="summary_json" format="json" from_work_dir="tooldistillator_summary.json" label="${tool.name} on ${on_string}: Summarized file"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1"> <!-- TEST_1 sumarize json results -->
            <param name="summarize_data" ftype="json" value="summarize/abricate_output.json,summarize/bracken_full_output.json,summarize/plasmidfinder_output.json"/>
            <output name="summary_json" ftype="json" value="summarize/summarize.json" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[**What it does**
        Summarize Json output file from ToolDistillator to only one json file
    ]]></help>
    <expand macro="citations"/>
</tool>
