<tool id="fastqe" name="FASTQE" version="0.1.1">
    <description></description>
    <requirements>
        <requirement type="package" version="0.1.1">fastqe</requirement>
    </requirements>
    <command detect_errors="exit_code">
    <![CDATA[

    #for i in $input:
        ln -s '$i' '$i.element_identifier' &&
    #end for

    echo "<html><head><title>FASTQE Report ðŸ¤”</title></head><body><h1>FASTQE Report ðŸ¤”</h1>" > '$output' &&

    fastqe
        --mean
        $bin
        --min
        --max
        #for i in $input:
            '$i.element_identifier'
        #end for
        | sed 's/$/<br>/;s/^\([^\t]*\)\t\([^\t]*\)\t/<h2>\1: \2<\/h2>\n/' >> '$output' &&

    echo "</body></html>" >> '$output'
    ]]></command>
    <inputs>
        <param label="FastQ data" name="input" type="data" format="fastq" multiple="true"/>
        <param label="Bin scores" name="bin" type="boolean" truevalue="--bin" falsevalue="" />
    </inputs>
    <outputs>
        <data format="html" name="output"/>
    </outputs>
    <tests>
        <test>
            <param name="input" value="test.fq,test2.fq" />
            <output name="output" file="out.html" />
        </test>
    </tests>
    <help><![CDATA[
FASTQ + Emoji = FASTQE ðŸ¤”
=========================

Compute quality stats for FASTQ files and print those stats as emoji... for some reason.

Scores can also be binned:

+-------+-------+
| Bin   | Emoji |
+=======+=======+
| N     | ðŸš«    |
+-------+-------+
| N     | ðŸš«    |
+-------+-------+
| 2-9   | ðŸ’€    |
+-------+-------+
| 10â€“19 | ðŸ’©    |
+-------+-------+
| 20â€“24 | âš ï¸    |
+-------+-------+
| 25â€“29 | ðŸ˜„    |
+-------+-------+
| 30â€“34 | ðŸ˜†    |
+-------+-------+
| 35â€“39 | ðŸ˜Ž    |
+-------+-------+
| â‰¥ 40  | ðŸ˜    |
+-------+-------+


]]></help>
    <citations>
    </citations>
</tool>
