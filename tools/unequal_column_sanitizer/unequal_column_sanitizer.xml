<tool id="unequal_column_sanitizer" name="Unequal column table sanitizer" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@">
    <description></description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
    python '$__tool_directory__/fill_missing_columns.py' --input '$input' --output '$output' --fillna '$fillna'
    ]]>
    </command>

    <inputs>
	    <param name='input' type="data" format="tabular,text" label='Table with unequal number of columns' help='Table that has an unequal number of columns per row.'/>
        <param name='fillna' type="text" value="NA" label='Fill value for missing column values.' help='This value is used to fill the cells in the tabular that are empty when the new column is created. See help for an example.'/>
    </inputs>

    <outputs>
        <data name='output' format='tabular'/>
    </outputs>

    <tests>
        <test>
            <param name="input" value="input.tsv"/>
            <output name="output" file="output.tsv"/>
        </test>
        <test>
            <param name="input" value="input.txt"/>
            <output name="output" file="output.tsv"/>
        </test>
        <test>
            <param name="input" value="input.tsv"/>
            <param name="fillna" value="0"/>
            <output name="output" file="output_2.tsv"/>
        </test>
    </tests>
    <help>
<![CDATA[
Converts tables with unequal columns per row into tables with the maximum number of columns for each row.
The extra cell values are added with the fillna parameter.

Example
~~~~~~~
Input
~~~~~
 === ============ ============== ==============
 139 Bacteria                                  
 3   Bacteria     Actinobacteria Actinobacteria
 1   Bacteria     Bacteroidetes                
 === ============ ============== ==============

This input often comes from tools that work with taxonomy levels, such as
Krona, Mapseq, Kraken2 and MetaPhlAn.

Output
~~~~~~
 === ============ ============== ==============
 139 Bacteria     NA             NA            
 3   Bacteria     Actinobacteria Actinobacteria
 1   Bacteria     Bacteroidetes  NA
 === ============ ============== ==============

The output can be used for tools that perform tabluar operations such as grouping, split_file_on_column, filter_tabular and table_compute,
that otherwise fail due to unequal column numbers.
]]>
    </help>
    <creator>
        <person givenName="Paul" familyName="Zierep" email="zierep@informatik.uni-freiburg.de" />
    </creator>
</tool>
