<macros>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">sourmash</requirement>
            <requirement type="package" version="*">zip</requirement>
        </requirements>
    </xml>
    <token name="@TOOL_VERSION@">4.9.4</token>
    <token name="@VERSION_SUFFIX@">0</token>
    <token name="@PROFILE@">21.05</token>
    <xml name="citations">
        <citations>
            <citation type="doi">10.21105/joss.06830</citation>
        </citations>
        <creator>
        <organization name="Galaxy Europe"/>
        <person givenName="Ahmad" familyName="Mahagna" url="https://github.com/Smkingsize"/>
        <person givenName="Saim" familyName="Momin" url="https://github.com/SaimMomin12"/>
    </creator>
    </xml>
    <!-- Pick list Macros -->
    <token name="@Picklist_copy_file@"><![CDATA[
    #if $picklist_cond.picklist_param == "true":
        ln -s $picklist_cond.picklist_file list.csv &&
    #end if
    ]]></token>
    <token name="@Picklist_commandline@"><![CDATA[
    #if $picklist_cond.picklist_param=="true": 
        #set exp = 'list.csv:md5:md5:%s' % (str($picklist_cond.pickstyle))
        --picklist $exp
    #end if
    ]]></token>
    <token name="@Picklist_help@">
    **Picklist**

    Picklist is a feature by which you can select or “pick out” signatures based on values in a CSV file. 
    This is typically used to index, extract, or search a subset of a large collection where modifying the collection itself isn’t desired.

    In your labels.csv file only list the signatures you want to include/exclude.

    You can generate the *label.csv files* using the Output parameter *output labels csv* in Sourmash compare. 
    
    or using *sourmash sig describe --csv out.csv signatures* or *sourmash sig manifest -o out.csv 'filename_or_db'* to construct an initial CSV file that you can then edit further and use as a picklist as above.    
    </token>
    <xml name="picklist_macro">
        <conditional name="picklist_cond" label="Picklist">
            <param name="picklist_param" label="Picklist" type="select" help="Please read Help section at the end!">
                <option value="true">Yes</option>
                <option value="false" selected="true">No</option>
            </param>
            <when value="true">
                <param name="picklist_file" type="data" format="csv" label="Picklist file" help="input signatures files (created with souramsh sksetch)"/>
                <param name="pickstyle" type="select" label="Pick style" help="Weather to include or exclude picked signatures">
                    <option value="include" selected="true">include</option>
                    <option value="exclude">exclude</option>
                </param>
            </when>
            <when value="false"/>
        </conditional>
    </xml>
</macros>