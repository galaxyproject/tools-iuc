<tool id="tracy_basecall" name="Basecall from Sanger chromatogram" version="@TOOL_VERSION@+galaxy0" profile="20.09" python_template_version="3.5">
    <macros>
        <import>macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">tracy</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        tracy basecall --pratio $pratio --format $format --output $output $tracefile
    ]]></command>
    <inputs>
        <param name="tracefile" type="data" format="ab1" label="Chromatogram (tracefile)" />
        <param argument="--pratio" type="float" label="Peak ratio to call a base" value="0.330000013" min="0" />
        <param argument="--format" type="select" label="Output format">
            <option value="fasta" selected="true">FASTA</option>
            <option value="fastq">FASTQ</option>
            <option value="tsv">TSV (tabular)</option>
            <option value="json">JSON</option>
        </param>
    </inputs>
    <outputs>
        <data name="output" format="fasta" label="Tracy Basecall on ${on_string}">
            <change_format>
                <when input="format" value="fasta" format="fasta"/>
                <when input="format" value="fastq" format="fastq"/>
                <when input="format" value="tsv" format="tabular"/>
                <when input="format" value="json" format="json" />
            </change_format>
        </data>
    </outputs>
    <tests>
        <test>
            <param name="tracefile" value="input1.ab1" ftype="ab1" />
            <output name="output" file="output1.fasta" ftype="fasta" />
        </test>
        <test>
            <param name="tracefile" value="input1.ab1" ftype="ab1" />
            <param name="format" value="json" />
            <output name="output" file="output1.json" ftype="json" />
        </test>
        <test>
            <param name="tracefile" value="input1.ab1" ftype="ab1" />
            <param name="pratio" value="0.2" />
            <output name="output" file="output2.fasta" ftype="fasta" />
        </test>
    </tests>
    <help><![CDATA[
**What it does**

The *basecall* command from _tracy 


    ]]></help>
    <citations>
        <citation type="doi">10.1186/s12864-020-6635-8</citation>
    </citations>
</tool>