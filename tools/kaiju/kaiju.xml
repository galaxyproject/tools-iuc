<tool id="kaiju" name="kaiju" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="23.2" license="MIT">
    <description></description>
    <macros>
        <token name="@TOOL_VERSION@">1.10.1</token>
        <token name="@VERSION_SUFFIX@">0</token>
    </macros>
    <xrefs>
        <xref type="bio.tools">kaiju</xref>
    </xrefs>
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">kaiju</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
    kaiju
    -t '$reference.fields.path'/*nodes.dmp
    -f '$reference.fields.path'/*.fmi
    #if $input.type == "single"
        -i '$input.reads'
    #else
        -i '$input.reads.forward'
        -j '$input.reads.reverse'
    #end if
    -o '$output'
    -z "\${GALAXY_SLOTS:-1}"
    $protein
    $low_complexity
    -a $mode_cond.mode
    #if $mode_cond.mode == "greedy"
        -e $mode_cond.mismatches
        -m $mode_cond.match_length
        -s $mode_cond.match_score
        -E $mode_cond.evalue
    #end if
    ]]></command>
    <inputs>
        <conditional name="input">
            <param name="type" type="select" label="Read types">
                <option value="paired">Paired reads</option>
                <option value="single">Single reads</option>
            </param>
            <when value="single">
                <param name="reads" type="data" format="fasta,fastqsanger" label="Reads"/>
            </when>
            <when value="paired">
                <param name="reads" type="data_collection" format="fasta,fastqsanger" collection_type="paired" label="Paired reads"/>
            </when>
        </conditional>
        <param name="reference" type="select" label="kaiju refernce data">
            <options from_data_table="kaiju"/>
            <validator type="no_options" message="No reference data installed. Ask your Galaxy admin."/>
        </param>
        <param argument="-p" name="protein" type="boolean" truevalue="-p" falsevalue="" label="Input sequences are protein sequences"/>
        <param argument="-X" name="low_complexity" type="boolean" truevalue="-x" falsevalue="-X" checked="true" label="Enable SEG low complexity filter"/>
        <conditional name="mode_cond">
            <param argument="-a" name="mode" type="select" label="Run mode">
                <option value="greedy">greedy</option>
                <option value="mem">mem</option>
            </param>
            <when value="greedy">
                <param argument="-e" name="mismatches" type="integer" value="3" min="0" label="Number of mismatches allowed"/>
                <param argument="-m" name="match_length" type="integer" value="11" min="1" label="Minimum match length"/>
                <param argument="-s" name="match_score" type="integer" value="65" min="1" label="Minimum match score"/>
                <param argument="-E" name="evalue" type="float" value="0.01" min="0" label="Minimum E-value"/>
            </when>
            <when value="mem"/>
        </conditional>
    </inputs>
    <outputs>
        <data name="output" format="tabular"/>
    </outputs>
    <tests>
        <test>
            <conditional name="input">
                <param name="type" value="single"/>
                <param name="reads" value="query.fa"/>
            </conditional>
            <param name="reference" value="test"/>
            <output name="output" value="kaiju.out"/>
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

**What it does**

TODO: Fill in help in reStructuredText format (https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html)

Usage
.....


**Input**


**Output**


    ]]></help>
    <citations>
        <citation type="doi">10.1038/ncomms11257</citation>
    </citations>
</tool>