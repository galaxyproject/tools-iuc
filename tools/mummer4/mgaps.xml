<tool id="mgaps" name="mgaps" version="0.1.0">
    <requirements>
        <requirement type="package" version="4.0.0beta2">mummer4</requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
        mgaps
            $header
            -d $diagonal
            $extent
            -f $fraction
            -l $min
            -s $max
            < '$matchfile' > '$output'
        ]]>
    </command>
    <inputs>
        <param name="matchfile" type="data" format="txt" label="Match file" />
        <param name="header" type="boolean" argument="-C" truevalue="-C" falsevalue="" label="Header" help="Check that fasta header labels alternately have 'Reverse'" />
        <param name="diagonal" type="integer" argument="-d" value="5" label="Fixed diagonal difference to join matches" />
        <param name="extent" type="boolean" argument="-e" truevalue="-e" falsevalue="" label="Extent" help="Use extent of match (end - start) rather than sum of piece lengths to determine length of cluster" />
        <param name="fraction" type="float" argument="-f" value="0.05" label="Fraction of separation for diagonal difference" />
        <param name="min" type="integer" argument="-l" value="200" label="Minimum length of cluster match" />
        <param name="max" type="integer" argument="-s" value="1000" label="Maximum separation between matches in cluster" />
    </inputs>
    <outputs>
        <data name="output" format="txt" from_work_dir="mgaps.txt" />
    </outputs>
    <tests>
        <test>
            <param name="matchfile" ftype="txt" value="nucmer.txt" />
            <output name="output" ftype="txt" compare="diff" value="mgaps.txt" />
        </test>
    </tests>
     <help><![CDATA[
        This program reads lists of unique matches between a sequence of strings and a reference string.  For each string in the sequence, it clusters the matches together into groups that may represent longer, in exact matches.
    ]]></help>
    <citations>
        <citation type="bibtex">
            @misc{githubmummer,
            author = {Art Delcher, Stefan Kurtz, Adam Phillippy, Steven Salzberg},
            year = {2012},
            title = {mummer4},
            publisher = {GitHub},
            journal = {GitHub repository},
            url = {https://github.com/mummer4/mummer},
        }</citation>
    </citations>
</tool>

