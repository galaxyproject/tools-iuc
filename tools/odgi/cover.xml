<tool id="odgi_cover" name="odgi cover" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.1">
    <description>generate path covers for graph components</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
odgi cover
--idx '$idx'
--out '$output'
#if str($hogwild_depth)
    --hogwild-depth $hogwild_depth
#end if
#if str($num_paths_per_component)
    --num-paths-per-component $num_paths_per_component
#end if
#if str($node_windows_size)
    --node-windows-size $node_windows_size
#end if
#if str($min_node_coverage)
    --min-node-coverage $min_node_coverage
#end if
$ignore_paths
#if str($save_coverages)
    --write-node-coverages '$node_coverages'
#end if
@THREADS@
    ]]></command>
    <inputs>
        <expand macro="graph_input_param"/>
        <param argument="--hogwild-depth" type="float" optional="true" min="0" label="Cover graph to this average depth" help="Randomly cover the graph until reaching the specified average depth."/>
        <param argument="--num-paths-per-component" type="integer" optional="true" min="1" label="Number of paths to generate per component"/>
        <param argument="--node-windows-size" type="integer" optional="true" min="2" label="Node window size when extending paths"/>
        <param argument="--min-node-coverage" type="integer" optional="true" min="1" label="Minimum node coverage to reach"/>
        <param argument="--ignore-paths" type="boolean" truevalue="--ignore-paths" falsevalue="" checked="false" label="Ignore embedded paths when initializing coverage"/>
        <param argument="--save-coverages" type="boolean" truevalue="true" falsevalue="" checked="false" label="Write node coverages table" help="Generate a tabular file with per-node coverage statistics."/>
    </inputs>
    <outputs>
        <data name="output" format="odgi" label="${tool.name} on ${on_string}"/>
        <data name="node_coverages" format="tabular" label="${tool.name} on ${on_string}: node coverages">
            <filter>save_coverages</filter>
        </data>
    </outputs>
    <tests/>
    <help format="markdown"><![CDATA[
@HELP_HEADER@

`odgi cover` generates path covers for each connected component of the graph.

### Inputs

- **Input odgi graph**: Graph to cover.
- **Average depth / Paths per component / Node window size / Minimum node coverage**: Control coverage generation heuristics.
- **Ignore embedded paths**: Start covering from scratch ignoring existing paths.
- **Write node coverages table**: Emit per-node coverage values.

### Outputs

- **odgi**: Graph augmented with generated cover paths.
- **node coverages**: Optional tabular coverage summary.
    ]]></help>
    <expand macro="citations"/>
</tool>
