<tool id="odgi_similarity" name="odgi similarity" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.1">
    <description>tabulate path similarities</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
odgi similarity
--idx '$idx'
#if str($delim)
    --delim '$delim'
#end if
#if str($delim_pos)
    --delim-pos $delim_pos
#end if
$distances
@THREADS@
> '$output'
    ]]></command>
    <inputs>
        <expand macro="graph_input_param"/>
        <expand macro="group_delim_params"/>
        <param argument="--distances" type="boolean" truevalue="--distances" falsevalue="" checked="false" label="Report distances instead of similarities"/>
    </inputs>
    <outputs>
        <expand macro="standard_tabular_output"/>
    </outputs>
    <tests/>
    <help format="markdown"><![CDATA[
@HELP_HEADER@

`odgi similarity` reports pairwise similarities between paths (or path groups) in the input graph.
Rows are tab-delimited and list each pair alongside their similarity score.
With the *Report distances instead of similarities* option enabled, an extra column with Euclidean distance is included.

### Inputs

- **Input odgi graph**: Variation graph in `.og` format.
- **Delimiter to define path groups**: Split path names at the given character and aggregate similarities by group prefix.
- **Use the N-th occurrence of the delimiter**: Choose which delimiter occurrence defines the group prefix.
- **Report distances instead of similarities**: Toggle between similarity scores and distances.

### Outputs

- **Tabular**: Similarity (and optionally distance) matrix suitable for downstream filtering or visualization.
    ]]></help>
    <expand macro="citations"/>
</tool>
