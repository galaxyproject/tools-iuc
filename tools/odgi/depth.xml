<tool id="odgi_depth" name="odgi depth" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.1">
    <description>compute path depth statistics</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
odgi depth
--input '$input'
#if str($subset_paths)
    --subset-paths '$subset_paths'
#end if
#if str($path)
    --path '$path'
#end if
#if str($paths)
    --paths '$paths'
#end if
#if str($graph_pos)
    --graph-pos '$graph_pos'
#end if
#if str($graph_pos_file)
    --graph-pos-file '$graph_pos_file'
#end if
#if str($path_pos)
    --path-pos '$path_pos'
#end if
#if str($path_pos_file)
    --path-pos-file '$path_pos_file'
#end if
#if str($bed_input)
    --bed-input '$bed_input'
#end if
$graph_depth_table
$graph_depth_vec
$path_depth
$self_depth
$summarize
#if str($windows_in)
    --windows-in '$windows_in'
#end if
#if str($windows_out)
    --windows-out '$windows_out'
#end if
@THREADS@
> '$output'
    ]]></command>
    <inputs>
        <expand macro="graph_input_param_input"/>
        <param argument="--subset-paths" type="data" format="txt" optional="true" label="Subset of paths for depth calculation" help="Text file with one path name per line."/>
        <param argument="--path" type="text" optional="true" label="Single path to analyze"/>
        <param argument="--paths" type="data" format="txt" optional="true" label="Report depth for these paths" help="Text file with one path name per line."/>
        <param argument="--graph-pos" type="text" optional="true" label="Graph position (node[,offset[,strand]])"/>
        <param argument="--graph-pos-file" type="data" format="txt" optional="true" label="File of graph positions"/>
        <param argument="--path-pos" type="text" optional="true" label="Path position (path[,offset[,strand]])"/>
        <param argument="--path-pos-file" type="data" format="txt" optional="true" label="File of path positions"/>
        <param argument="--bed-input" type="data" format="bed" optional="true" label="BED intervals to evaluate"/>
        <param argument="--graph-depth-table" type="boolean" truevalue="--graph-depth-table" falsevalue="" checked="false" label="Write node depth/unique depth table"/>
        <param argument="--graph-depth-vec" type="boolean" truevalue="--graph-depth-vec" falsevalue="" checked="false" label="Write graph depth vector"/>
        <param argument="--path-depth" type="boolean" truevalue="--path-depth" falsevalue="" checked="false" label="Write per-base path depth"/>
        <param argument="--self-depth" type="boolean" truevalue="--self-depth" falsevalue="" checked="false" label="Write self depth per base"/>
        <param argument="--summarize" type="boolean" truevalue="--summarize" falsevalue="" checked="false" label="Summarize depth distribution"/>
        <param argument="--windows-in" type="text" optional="true" label="Depth windows inside range (LEN:MIN:MAX)"/>
        <param argument="--windows-out" type="text" optional="true" label="Depth windows outside range (LEN:MIN:MAX)"/>
    </inputs>
    <outputs>
        <expand macro="standard_tabular_output"/>
    </outputs>
    <tests/>
    <help format="markdown"><![CDATA[
@HELP_HEADER@

`odgi depth` reports depth metrics for selected paths, positions, or intervals.

### Inputs

- **Input odgi graph**: Graph to profile.
- **Subset/path/path lists**: Limit the analysis to specific paths.
- **Positions / BED intervals**: Query exact positions or ranges.
- **Depth summary toggles**: Emit tables or vectors describing depth per node or path.
- **Depth windows**: Report intervals within or outside depth ranges.

### Outputs

- **Tabular**: Depth metrics written in tab-separated form.
    ]]></help>
    <expand macro="citations"/>
</tool>
