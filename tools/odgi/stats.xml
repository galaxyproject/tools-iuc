<tool id="odgi_stats" name="odgi stats" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.1">
    <description>summarize variation graph metrics</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
odgi stats
--idx '$idx'
$summarize
$weak_connected_components
$self_loops
$nondeterministic_edges
$base_content
#if str($delim)
    --delim '$delim'
#end if
$file_size
#if str($pangenome_sequence_class_counts)
    --pangenome-sequence-class-counts '$pangenome_sequence_class_counts'
#end if
#if str($coords_in)
    --coords-in '$coords_in'
#end if
$mean_links_length
$no_gap_links
$sum_path_nodes_distances
$penalize_different_orientation
$path_statistics
$weighted_feedback_arc
$weighted_reversing_join
$links_length_per_nuc
$yaml
$multiqc
@THREADS@
> '$output'
    ]]></command>
    <inputs>
        <expand macro="graph_input_param"/>
        <param argument="--summarize" type="boolean" truevalue="--summarize" falsevalue="" checked="true" label="Summarize nodes, edges, paths, steps"/>
        <param argument="--weak-connected-components" type="boolean" truevalue="--weak-connected-components" falsevalue="" checked="false" label="Report weakly connected components"/>
        <param argument="--self-loops" type="boolean" truevalue="--self-loops" falsevalue="" checked="false" label="Count nodes with self-loops"/>
        <param argument="--nondeterministic-edges" type="boolean" truevalue="--nondeterministic-edges" falsevalue="" checked="false" label="Report nondeterministic edges"/>
        <param argument="--base-content" type="boolean" truevalue="--base-content" falsevalue="" checked="false" label="Summarize base composition"/>
        <param argument="--delim" type="text" optional="true" label="Group paths using this delimiter"/>
        <param argument="--file-size" type="boolean" truevalue="--file-size" falsevalue="" checked="false" label="Report file size"/>
        <param argument="--pangenome-sequence-class-counts" type="text" optional="true" label="Pangenome sequence class split" help="Specify DELIM,POS to aggregate Private/Core/Shell counts by sample."/>
        <param argument="--coords-in" type="data" format="txt" optional="true" label="2D layout coordinates (binary .lay)"/>
        <param argument="--mean-links-length" type="boolean" truevalue="--mean-links-length" falsevalue="" checked="false" label="Compute mean links length"/>
        <param argument="--no-gap-links" type="boolean" truevalue="--no-gap-links" falsevalue="" checked="false" label="Do not penalize gap links"/>
        <param argument="--sum-path-nodes-distances" type="boolean" truevalue="--sum-path-nodes-distances" falsevalue="" checked="false" label="Compute sum of path node distances"/>
        <param argument="--penalize-different-orientation" type="boolean" truevalue="--penalize-different-orientation" falsevalue="" checked="false" label="Penalize orientation changes"/>
        <param argument="--path-statistics" type="boolean" truevalue="--path-statistics" falsevalue="" checked="false" label="Emit per-path statistics"/>
        <param argument="--weighted-feedback-arc" type="boolean" truevalue="--weighted-feedback-arc" falsevalue="" checked="false" label="Compute weighted feedback arc metric"/>
        <param argument="--weighted-reversing-join" type="boolean" truevalue="--weighted-reversing-join" falsevalue="" checked="false" label="Compute weighted reversing joins"/>
        <param argument="--links_length_per_nuc" type="boolean" truevalue="--links_length_per_nuc" falsevalue="" checked="false" label="Compute links length per nucleotide"/>
        <param argument="--yaml" type="boolean" truevalue="--yaml" falsevalue="" checked="false" label="Report in YAML format"/>
        <param argument="--multiqc" type="boolean" truevalue="--multiqc" falsevalue="" checked="false" label="Emit full YAML suitable for MultiQC"/>
    </inputs>
    <outputs>
        <expand macro="standard_text_output"/>
    </outputs>
    <tests/>
    <help format="markdown"><![CDATA[
@HELP_HEADER@

`odgi stats` reports graph-wide metrics, from simple counts to layout-aware quality measures.
Select the statistics you need, optionally grouping paths or exporting YAML for MultiQC.

### Inputs

- **Input odgi graph**: Graph to summarize.
- **Summarize nodes, edges, paths, steps**: Emit the core size metrics (enabled by default).
- **Additional toggles**: Component counts, self-loops, nondeterministic edges, base composition, file size, and layout-aware metrics.
- **Group paths using this delimiter / Pangenome sequence class split**: Aggregate statistics by sample or cohort.
- **2D layout coordinates**: Supply a layout to evaluate link metrics in 2D.
- **Report in YAML format / Emit full YAML suitable for MultiQC**: Choose structured output when integrating with other tooling.

### Outputs

- **Text**: Selected statistics in TSV-style text (or YAML when requested).
    ]]></help>
    <expand macro="citations"/>
</tool>
