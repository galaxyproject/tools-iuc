<tool id="odgi_position" name="odgi position" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="24.1">
    <description>translate coordinates between graph paths</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
odgi position
--target '$target'
#if str($source)
    --source '$source'
#end if
#if str($ref_path)
    --ref-path '$ref_path'
#end if
#if str($ref_paths)
    --ref-paths '$ref_paths'
#end if
#if str($lift_path)
    --lift-path '$lift_path'
#end if
#if str($lift_paths)
    --lift-paths '$lift_paths'
#end if
#if str($graph_pos)
    --graph-pos '$graph_pos'
#end if
#if str($graph_pos_file)
    --graph-pos-file '$graph_pos_file'
#end if
#if str($path_pos)
    --path-pos '$path_pos'
#end if
#if str($path_pos_file)
    --path-pos-file '$path_pos_file'
#end if
#if str($bed_input)
    --bed-input '$bed_input'
#end if
#if str($gff_input)
    --gff-input '$gff_input'
#end if
$give_graph_pos
$all_immediate
#if str($search_radius)
    --search-radius $search_radius
#end if
#if str($jaccard_context)
    --jaccard-context $jaccard_context
#end if
@THREADS@
> '$output'
    ]]></command>
    <inputs>
        <param argument="--target" type="data" format="odgi" label="Target odgi graph"/>
        <param argument="--source" type="data" format="odgi" optional="true" label="Source graph for liftovers"/>
        <param argument="--ref-path" type="text" optional="true" label="Reference path name"/>
        <param argument="--ref-paths" type="data" format="txt" optional="true" label="Reference paths list"/>
        <param argument="--lift-path" type="text" optional="true" label="Lift path common to source and target"/>
        <param argument="--lift-paths" type="data" format="txt" optional="true" label="Lift paths list"/>
        <param argument="--graph-pos" type="text" optional="true" label="Single graph position (node,offset,strand)"/>
        <param argument="--graph-pos-file" type="data" format="txt" optional="true" label="Graph positions file"/>
        <param argument="--path-pos" type="text" optional="true" label="Single path position (path,offset,strand)"/>
        <param argument="--path-pos-file" type="data" format="txt" optional="true" label="Path positions file"/>
        <param argument="--bed-input" type="data" format="bed" optional="true" label="BED ranges to lift"/>
        <param argument="--gff-input" type="data" format="gff3" optional="true" label="GFF/GTF annotations to lift"/>
        <param argument="--give-graph-pos" type="boolean" truevalue="--give-graph-pos" falsevalue="" checked="false" label="Emit graph positions instead of path positions"/>
        <param argument="--all-immediate" type="boolean" truevalue="--all-immediate" falsevalue="" checked="false" label="Emit all immediate positions"/>
        <param argument="--search-radius" type="integer" optional="true" min="1" label="Search radius (bp)"/>
        <param argument="--jaccard-context" type="integer" optional="true" min="1" label="Maximum walking distance for Jaccard context"/>
    </inputs>
    <outputs>
        <expand macro="standard_tabular_output"/>
    </outputs>
    <tests/>
    <help format="markdown"><![CDATA[
@HELP_HEADER@

`odgi position` maps positions between graph coordinates and path coordinates, enabling liftover between graphs that share common paths.

### Inputs

- **Target odgi graph**: Graph whose coordinate system you want as output.
- **Source graph for liftovers**: Optional second graph supplying the original coordinates.
- **Reference path / Lift path / Path lists**: Guide how positions are translated between source and target graphs.
- **Graph/path positions or files**: Provide single coordinates or newline-delimited collections; BED and GFF/GTF inputs are supported.
- **Emit graph positions / Emit all immediate positions**: Control the style of reported coordinates.
- **Search radius / Maximum walking distance**: Limit traversal during coordinate projection.

### Outputs

- **Tabular**: Coordinate translations (path or graph positions, depending on options).
    ]]></help>
    <expand macro="citations"/>
</tool>
