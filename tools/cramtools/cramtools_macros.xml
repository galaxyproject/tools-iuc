<macros>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="3.0">cramtools</requirement>
            <requirement type="package" version="0.1.19">samtools</requirement>
        </requirements>
    </xml>

    <xml name="stdio">
        <stdio>
            <exit_code range="1:" />
            <exit_code range=":-1" />
        </stdio>
    </xml>
    
    <xml name="version_command">
        <version_command>java -jar $CRAMTOOLS_ROOT_DIR/jars/cramtools-3.0.jar | grep Version</version_command>
    </xml>
    
    <token name="@PREPROCESS_FASTA_FILE@"><![CDATA[
        ## Cramtools requires the fasta file to hava a certain extension
        ln -s $input_reference "${input_reference}.fa" &&
        
        ## Cramtools requires indexed fasta files but can't provide them itself
        samtools faidx "${input_reference}.fa" &&
    ]]></token>
</macros>
