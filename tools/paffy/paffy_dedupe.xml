<tool id="paffy_dedupe" name="paffy dedupe" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>removes duplicates from a PAF file</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/> 
    <expand macro="stdio"/>
    <command detect_errors="aggressive">
        <![CDATA[
        paffy dedupe
            $checkInverse
            --logLevel "INFO"
            --outputFile '$out_file'
            #if $input_paf.ext.endswith(".gz")
                < gunzip -c '$input_paf' 
            #else:
                --inputFile '$input_paf'
            #end if
    ]]></command>
    <inputs>
        <expand macro="input_paf"/>      
        <param argument="--checkInverse" type="boolean" truevalue="--checkInverse" falsevalue="" checked="false" label="Check inverse" help="Also deduplicate alignments that are the same, but with query and target reversed"/>  
    </inputs>
    <outputs>
        <data name="out_file" format="paf" label="${tool.name} on ${on_string}: Deduped PAF"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="input_paf" value="paffy_dedupe_input.paf"/>
            <output name="out_file" ftype="paf" file="paffy_dedupe_output.paf"/>
        </test>
        <test expect_num_outputs="1">
            <param name="input_paf" value="paffy_dedupe_input.paf.gz"/>
            <output name="out_file" ftype="paf" file="paffy_dedupe_output.paf"/>
        </test>
        <test expect_num_outputs="1">
            <param name="input_paf" value="paffy_dedupe_input.paf"/>
            <param name="checkInverse" value="true"/>
            <output name="out_file" ftype="paf" file="paffy_dedupe_checkInverse_output.paf"/>
        </test>
    </tests>
    <help><![CDATA[
Paffy dedupe scans a PAF file and removes duplicate alignments that share identical query and target coordinates. 
Only one copy of each exact alignment is kept. 
Optionally, the tool can also detect duplicates where the query and target are swapped, treating inverted records as duplicates of each other.
    ]]></help>
    <expand macro="citation"/>
    <expand macro="creator"/>
</tool>