<tool id="ena_upload" name="ENA Upload tool" version="0.1.0" python_template_version="3.5">
    <token name="@VERSION@">0.1</token>   
    <requirements>
      <requirement type="package" version="@VERSION@">ena-upload-cli</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        ena-upload-cli
        --action $action
        --center $center
        --webin_id $webin_id
        --password $password
        if $action == 'add':
            --data $data
            --experiment $experiment
            --run $run
            --sample $sample
        > $output
    ]]></command>
<inputs>
       <conditional name="action_options">
            <param argument="--action" type="select" label="Action to execute">
                <option value="add" selected="True">Add new data</option>
                <option value="modify">Modify metadata</option>
            </param>
            <when value="add">
                <param argument="--data" type="data" format="fastq.gz" multiple="true" label="Datasets to upload" help="fastq.gz data to upload"/>
                <param argument="--experiment" type="data" format="tabular" multiple="false" label="Metadata" help="Experiment metadata file"/>
                <param argument="--run" type="data" format="tabular" multiple="false" label="Datasets to upload" help="Run metadata file"/>
                <param argument="--sample" type="data" format="tabular" multiple="false" label="Datasets to upload" help="Sample metadata file"/>
            </when>
        </conditional>
        <param argument="--center" type="text" format="text" optional="False" label="Affiliation center"/>
        <param argument="--webin_id" type="text" format="text" optional="False" label="Web access ID"/>
    </inputs>
    <outputs>
        <data name="output" format="data" label="${tool.name} on ${on_string}: Upload summary"/>
    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>
