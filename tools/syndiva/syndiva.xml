<tool id="syndiva" name="syndiva" version="1.0">
  <description>
    diversity analysis of synthetic libraries of a Fibronectin domain
  </description>
  <macros>
        <import>syndiva_macros.xml</import>
  </macros>
  <expand macro="requirements"/>

  <command detect_errors="exit_code">
  <![CDATA[
    python $__tool_directory__/syndiva_wrapper.py $fasta_file $pattern $restriction_site_5 $restriction_site_3
    $__root_dir__ 
    $report.extra_files_path 
    $report
    $__app__.config.new_file_path
    $__tool_directory__
    ]]> 
  </command>
  <inputs>
    <param label="Fasta file" name="fasta_file" type="data" format="fasta" help="Fasta file that contains the DNA sequences" />
    <param label="Pattern" name="pattern" type="text" area="true" size="4x50" help="Pattern of the sequence" />
    <param label="5&#39; Restriction sites" name="restriction_site_5" type="text" help="Sequence of the restrict" />
    <param label="3&#39; Restriction sites" name="restriction_site_3" type="text" help="Sequence of the restrict" />
  </inputs>
  <outputs>
    <data format="html" name="report" />
  </outputs>
  <tests>
    <test>
      <param name="fasta_file" value="syndiva_datatest.fasta"/>
      <param name="pattern" value="AAAGSSVSSVPTKLEVVAATPTSLLISWDA:4-6:V:1:YYRITYGETGGNSPVQEFTVPG:3:TATISGLSPGVDYTITVYA:11-12:PISINYRTGTGGSGGSHHHHHHHHGGSYPYDVPDYAPRVG*GRVGSKDIRAETVESCLAKSHTENSFTNVWKDDKTLDRYANYE"/>
      <param name="restriction_site_5" value="GCGGCCGC"/>
      <param name="restriction_site_3" value="GGTACC"/>
      <output name="report" file="syndiva_report.html" lines_diff="2">
      </output> 
    </test>
  </tests>
  <help>
  <![CDATA[
- **Contexte scientifique**

- *SynDivA* a été développé dans le but de permettre l'analyse de la diversité de banques synthétiques d'un domaine de la Fibronectine. 
- Cette diversité est générée dans le contexte d'un projet d'évolution dirigée par approche de phage display en vue d'obtenir des ligands de forte affinité et spécificité pour des cibles biologiques. Elle a été introduite au niveau de trois boucles du domaine et consiste aussi bien en une variation des acides aminés qu'en une variation des longueurs des boucles. 
- *SynDivA* intervient avant l'étape de sélection des banques d'intérêt, en s'assurant de la qualité - et donc de la diversité - de la banque en déterminant notamment par projection, le nombre de séquences uniques et fonctionnelles.

- **Description**

- *SynDivA* a été implémenté en Python. 

- Les calculs sont répartis en 3 étapes :

    1. Pré-traitement des données d'entrées (détermination de l'orientation des séquences, détermination de la phase de lecture, traduction des séquences nucléotidiques en séquences protéiques, élimination des séquences dites "déchets" contenant des codons stop dans les zones variables)
    2. Alignement des séquences 2 à 2
    3. Calculs statistiques sur les alignements (distances)

- Les résultats sont présentés sous forme d'un rapport HTML.

- **Exemple**

- Motif : AAAGSSVSSVPTKLEVVAATPTSLLISWDA:4-6:V:1:YYRITYGETGGNSPVQEFTVPG:3:TATISGLSPGVDYTITVYA:11-12:PISINYRTGTGGSGGSHHHHHHHHGGSYPYDVPDYAPRVG*GRVGSKDIRAETVESCLAKSHTENSFTNVWKDDKTLDRYANYE
- Site de restriction 5' : GCGGCCGC
- Site de restriction 3' : GGTACC

=====

- **Scientific context**

- *SynDivA* was developed to analyze the diversity of synthetic libraries of a Fibronectin domain.
- This diversity is generated in the context of a project of directed evolution using a phage display approach, to obtain ligands with high affinity and specificity for biological targets. It was introduced in three loops of the domain. It is both a variation of amino acids and a variation of the lengths of loops.
- *SynDivA* is used before the step of selecting banks of interest, by ensuring quality - and therefore of diversity - of the bank by determining, by projection, the number of unique and functional sequences.

- **Description**

- *SynDivA* is implemented in Python.

- The computations are divided into three steps:

    1. Pre-processing of the input data (determination of the orientation of the sequences, determination of the reading frame, translation of nucleotide sequences in protein sequences, elimination of the sequences "wastes" containing stop codons in variable regions)
    2. Alignment of sequences 2-2
    3. Statistics calculations on the alignments (distances)

- The results are presented as an HTML report.

- **Example**

- Pattern : AAAGSSVSSVPTKLEVVAATPTSLLISWDA:4-6:V:1:YYRITYGETGGNSPVQEFTVPG:3:TATISGLSPGVDYTITVYA:11-12:PISINYRTGTGGSGGSHHHHHHHHGGSYPYDVPDYAPRVG*GRVGSKDIRAETVESCLAKSHTENSFTNVWKDDKTLDRYANYE
- 5' restriction site : GCGGCCGC
- 3' restriction site : GGTACC

 ]]> </help>
 <expand macro="citations" />
</tool>
