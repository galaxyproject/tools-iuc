<?xml version="1.0"?>
<macros>
  <token name="@VERSION@">1.12.0</token>
  <xml name="requirements">
    <requirements>
      <requirement type="package" version="@VERSION@">bioconductor-csaw</requirement>
    </requirements>
  </xml>
  <xml name="citations">
    <citations>
          
    </citations>
  </xml>
      <xml name="gRanges">
      <param name="GRanges" type="text" label="Sequence Names" />
      <param name="IRanges" type="data" format="tabular" label="Ranges" help="Upload as a dataframe where the first column is the start position and the second column is the end position." />
    </xml>

    <xml name="readParam">
      <param name="pe" type="select" label="Is paired-end data present in the BAM file(s)?" help="Reads are assumed to be single-end when None is selected">
        <option value="none">None</option>
        <option value="both">Both Files</option>
        <option value="first">First File</option>
        <option value="second">Second File</option>
      </param>
      <param name="max_frag" type="integer" value="500" label="Maximum fragment length corresponding to a read pair" />
      <param name="dedup" type="boolean" truevalue="true" falsevalue="" checked="false" label="Ignore marked duplicate reads?" help="Marked duplicate reads will be removed with if yes is selected. This may be necessary when many rounds of PCR have been performed. However, it is not recommended for routine counting as it will interfere with the downstream statistical methods. Note that the duplicate field must be set beforehand in the BAM file for this argument to have any effect" />
      <param name="minq" type="integer" value="" optional="true" label="Minimum mapping quality score for an aligned read" help="Reads will be filtered by their mapping quality scores. This is generally recommended to remove low-confidence alignments. The exact threshold for minq will depend on the range of scores provided by the aligner. No filtering on the score will be performed if no value specified." />
      <param name="forward" type="select" label="How should the reads be extracted?">
        <option value="NA">Extract from all strands</option>
        <option value="forward">Extract only from forward strands</option>
        <option value="reverse">Extract only from reverse strands</option>
      </param>
      <param name="restrict" type="text" optional="true" label="Names of allowable chromosomes from which readswill be extracted" help="Reads will only be extracted for the specified chromosomes. This is useful to restrict the analysis to interesting chromosomes, e.g., no contigs/scaffolds or mitochondria."/>
      <conditional name="discard_select">
        <param name="discard" type="select" label="Discard any alignments?" help="A read will be removed if the corresponding alignment is wholly contained within the supplied ranges. This is useful for removing reads in repeat regions.">
          <option value="yes">Yes</option>
          <option value="no" selected="true">No</option>
        </param>
        <when value="yes">
          <expand macro="gRanges" />
        </when>
        <when value="no"> </when>
      </conditional>
      <!--BiocParallelParam object-->
      </xml>
      <xml name="weight">
        <param name="weight" type="float" value="" optional="true" label="Frequency weights" help="Argument assumed to contain frequency weights of significant tests/windows. For example, a weight of 2 for a test would be equivalent to repeating that test (i.e., repeating the same window so it shows up twice in your analysis). These weights should be the same as those used during weighted FDR control to compute adjusted p-values." />
      </xml>
      <xml name="grid_param">
        <conditional name="grid_param_select">
            <param name="grid_param" type="select" label="Tune grid search settings?" help="At each iteration, the grid point with the closest cluster-level FDR to target is chosen and the grid is recentered around that point. The size of the grid is also scaled down to provide greater resolution.">
              <option value="yes">Yes</option>
              <option value="no" selected="true">No</option>
            </param>
            <when value="yes">
              <param name="length" type="integer" value="21" optional="true" label="Length of the grid" />
              <param name="range" type="float" value="20" optional="true" label="Range of the grid in logit units" />
              <param name="iter" type="integer" value="" optional="true" label="Number of iterations of the grid search" />
              <param name="scale" type="float" value="" optional="true" label="How much should the range of the grid be downscaled at each iteration?" />
              <!--FUN argument?-->
            </when>
            <when value="no"> </when>
          </conditional>
    </xml>





    <xml name="col_names">
      <param name="pval_col" type="text" optional="true" label="Specify the column of tab with the p-values" help="Enter a string or integer" >
        <sanitizer>
          <valid>
            <add value="." />
          </valid>
        </sanitizer>
      </param>
      <param name="fc_col" type="text" optional="true" label="Specify the column of tab with the log-fold changes" help="Enter a string or integer" >
        <sanitizer>
          <valid>
            <add value="." />
          </valid>
        </sanitizer>
      </param>
    </xml>
    <xml name="clusterWindows_param">
      <param name="GRanges" type="text" label="Objects" />
      <param name="IRanges" type="data" format="tabular" label="Ranges" help="Upload as a dataframe where each row is a interval separated by a space" />
      <param name="tab" type="data" format="tabular" label="Dataframe of results with a PValue field for each window" />
      <param name="target" type="float" value="" label="Desired cluster-level FDR" />
      <macro expand="col_names" />
      <param name="tol" type="float" value="" optional="true" label="Maximum distance between adjacent windows"/>
    </xml>
    <xml name="consolidate_param">
      <repeat name="gRange_obj" title="Enter GRanges objects">
        <param name="GRanges" type="text" label="Objects" />
          <param name="IRanges" type="data" format="tabular" label="Ranges" help="Upload as a dataframe where each row is a interval separated by a space" />
          <param name="width" type="float" value="" label="Width" />
      </repeat>
      <repeat name="db" title="Upload dataframes containing the DB test results for each entry of data">
        <param name="result_list" type="data" format="tabular" label="DB test results" />
      </repeat>
      <param name="equiweight" type="boolean" truevalue="true" falsevalue="" checked="true" label="Enforce equal weighting from each analysis?" help="Some effort is required to equalize the contribution of the results from each analysis. This is done by setting selecting yes, where the weight of each window is inversely proportional to the number of windows from that analysis." />
      <param name="tol" type="float" value="" label="Maximum distance between adjacent windows"/>
    </xml>
    <xml name="combineTest_param">
      <param name="ids" type="data" format="tabular" label="Cluster ID for each test" help="Upload as a dataframe where each row is an integer." />
      <param name="tab" type="data" format="tabular" label="Dataframe of results with PValue and at least one logFC field for each test" />
      <param name="weight" type="data" format="tabular" optional="true" label="Weights for each window" help="Upload as a dataframe where each row is a numeric value. If none specified, the weight defaults to 1 for each test. Supplying different relative weight values may be useful for downweighting low-confidence tests, e.g., those in repeat regions. In Simesâ€™ procedure, weights are interpreted as relative frequencies of the tests in each cluster." />
      <expand macro="col_names" />
    </xml>
</macros>
