<macros>
  <xml name="requirement">
      <requirement type="package" version="@TOOL_VERSION@">snpeff</requirement>
        <yield/>
    </xml>
  <xml name="stdio">
    <stdio>
        <exit_code range=":-1"  level="fatal" description="Error: Cannot open file" />
        <exit_code range="1:"  level="fatal" description="Error" />
    </stdio>
  </xml>
  <xml name="version_command">
    <version_command><![CDATA[
snpEff -version
    ]]></version_command>
  </xml>
  <token name="@TOOL_VERSION@">5.1d</token>
  <token name="@VERSION_SUFFIX@">0</token>  
  <token name="@SNPEFF_DB_VERSION@">SnpEff5.1</token>
  <token name="@JAVA_OPTIONS@">-Xmx\${GALAXY_MEMORY_MB:-8192}m</token>
  <token name="@EXTERNAL_DOCUMENTATION@">


-------

To learn more about snpEff read its manual at http://snpeff.sourceforge.net/SnpEff_manual.html
  </token>
  <token name="@SNPEFF_IN_GALAXY_INFO@">

-------

.. class:: warningmark

**Using SnpEff in Galaxy: A few points to remember**

SnpEff relies on specially formatted databases to generate annotations. It will not work without them. There are several ways in which these databases can be obtained.

**Pre-cached databases**

Some standard (e.g., human, mouse, *Drosophila*) databases may be pre-cached within a given Galaxy instance. You should be able to see them listed in the **Genome** drop-down menu of the **SnpEff eff** tool.

In case *you do not see the database you want*, keep reading...

**Download pre-built databases**

The SnpEff project generates large numbers of pre-built databases, which you can downloaded by following these steps:

  #. Use the **SnpEff databases** tool to generate a list of existing databases. Note the name of the database you need.
  #. Use the **SnpEff download** tool to download the database.
  #. Finally, use **SnpEff eff** by choosing the downloaded database from the history using the *Downloaded snpEff database in your history* option of the **Genome source** parameter.

Alternatively, you can specify the name of the database directly in **SnpEff eff** using the *Download on demand* option (again, **Genome source** parameter). In this case snpEff will download the database on the fly before performing annotation. Note that this saves a bit of quota in your history, but is inefficient for repeated runs of the tool because the database needs to be redownloaded every time.

**Create your own database**

If there is no cached or pre-built database available for your genome of interest, you can create one yourself. For this you need to:

 #. Download the Genbank record corresponding to your genome of interest from NCBI or use annotations in GFF format accompanied by the corresponding genome in FASTA format.
 #. Use **SnpEff build** to create the database.
 #. Use the database in **SnpEff eff** (using the *Custom* option of the **Genome source** parameter).

Creating a custom database has one major advantage. It guarantees that you will not have any issues related to reference sequence naming -- the most common source of SnpEff errors.

</token>



  <xml name="citations">
      <citations>
        <citation type="doi">10.4161/fly.19695</citation>
        <yield />
      </citations>
  </xml>
</macros>
